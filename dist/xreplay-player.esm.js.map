{"version":3,"file":"xreplay-player.esm.js","sources":["../utils/node.ts","../types/index.ts","../utils/tools/common.ts","../utils/tools/dom.ts","../utils/tools/transform.ts","../utils/tools/animation-frame.ts","../node_modules/smoothscroll-polyfill/dist/smoothscroll.js","../player/utils/fmp.ts","../player/utils/observer.ts","../player/utils/redux/create-store.ts","../player/utils/redux/combine-reducers.ts","../player/utils/redux/reducers/progress.ts","../player/utils/redux/reducers/player.ts","../player/utils/transform.ts","../player/utils/redux/reducers/replay-data.ts","../player/utils/redux/index.ts","../node_modules/is-mobile/index.js","../virtual-dom/dom.ts","../virtual-dom/deserialize.ts","../player/utils/common.ts","../player/utils/pure-redux/index.ts","../player/utils/heat-bar/base.ts","../player/utils/heat-bar/pillar.ts","../player/utils/heat-bar/line.ts","../player/utils/component.ts","../player/utils/scroll.ts","../player/utils/tpl.ts","../player/types.ts","../player/components/keyboard.ts","../player/renders/font.ts","../player/renders/patch.ts","../player/renders/location.ts","../player/renders/snapshot.ts","../player/renders/scroll.ts","../player/renders/window.ts","../player/renders/mouse.ts","../player/renders/form-el.ts","../player/renders/dom.ts","../player/render.ts","../player/components/player.ts","../player/components/pointer.ts","../player/components/progress.ts","../player/components/broadcaster.ts","../player/components/toolbox.ts","../player/components/panel.ts","../player/components/page-start.ts","../player/components/container.ts","../player/index.ts"],"sourcesContent":["\nclass NodeStore {\n    private static nodeId = 1\n    private nodeMap: Map<number, Node>\n    private idMap: WeakMap<Node, number>\n\n    constructor() {\n        this.init()\n    }\n\n    private init() {\n        this.nodeMap = new Map()\n        this.idMap = new WeakMap()\n    }\n\n    public reset() {\n        this.nodeMap.clear()\n    }\n\n    public createNodeId = () => NodeStore.nodeId++\n\n    public getNode(id: number) {\n        return this.nodeMap.get(id) || null\n    }\n\n    public addNode(node: Node, id: number = this.createNodeId()) {\n        this.idMap.set(node, id)\n        this.nodeMap.set(id, node)\n        return id\n    }\n\n    public removeNode(id: number) {\n        this.nodeMap.delete(id)\n        this.idMap.delete(this.getNode(id) as Node)\n    }\n\n    public getNodeId(node: Node) {\n        return this.idMap.get(node)\n    }\n\n    public updateNode(id: number, node: Node) {\n        this.idMap.set(node, id)\n        this.nodeMap.set(id, node)\n    }\n}\n\nexport const nodeStore = new NodeStore()\n","\nexport type ValueOf<T> = T[keyof T]\nexport type ValueOfKey<T, K extends keyof T> = T[K]\nexport type UnionToIntersection<U> = (U extends any ? (k: U) => void : never) extends (k: infer I) => void ? I : never\n\nexport interface InfoData {\n    doctype: DocumentType\n    href: string\n    width: number\n    height: number\n    scrollLeft: number\n    scrollTop: number\n    frameId: number | null\n}\n\nexport type SnapshotRecord = BaseRecord<RecordType.SNAPSHOT, { vNode: VNode } & InfoData>\n\ntype Extra = {\n    props: {\n        textContent: string\n        value: string\n        checked: boolean\n        selected: boolean\n        scroll?: { top: number; left: number }\n        autoplay: boolean\n        controls: boolean\n        loop: boolean\n        muted: boolean\n    }\n    isSVG: boolean\n}\n\ntype Children = (VNode | VSNode)[]\n\ntype Attrs = { [key: string]: string }\n\nexport interface VSNode {\n    id: number\n    type: number\n    value: string\n}\n\nexport interface VNode {\n    type: number\n    id: number\n    tag: string\n    attrs: Attrs\n    children: Children\n    extra: Extra\n}\n\nexport enum RecordType {\n    'HEAD',\n    'SNAPSHOT',\n    'WINDOW',\n    'SCROLL',\n    'MOUSE',\n    'DOM',\n    'FORM_EL',\n    'LOCATION',\n    'AUDIO',\n    'CANVAS',\n    'TERMINATE',\n    'FONT',\n    'PATCH',\n    'CUSTOM',\n    'WEBGL',\n    'CANVAS_SNAPSHOT',\n    'VIDEO'\n}\n\nexport enum FormElementEvent {\n    'PROP',\n    'INPUT',\n    'CHANGE',\n    'FOCUS',\n    'BLUR'\n}\nexport enum MouseEventType {\n    'MOVE',\n    'CLICK'\n}\n\nexport type TerminateRecord = BaseRecord<RecordType.TERMINATE, null>\n\nexport type WindowRecord = BaseRecord<RecordType.WINDOW, WindowRecordData>\n\nexport interface WindowRecordData {\n    id: number | null\n    width: number\n    height: number\n}\n\nexport type ScrollRecord = BaseRecord<RecordType.SCROLL, ScrollRecordData>\n\nexport interface ScrollRecordData {\n    id: number | null\n    top: number\n    left: number\n    behavior?: 'auto'\n}\n\nexport type MouseRecord = BaseRecord<RecordType.MOUSE, MouseRecordData>\nexport interface MouseRecordData {\n    type: MouseEventType\n    x: number\n    y: number\n    id?: number,\n    selector?: string,\n}\n\nexport type DOMRecord = BaseRecord<RecordType.DOM, DOMRecordData>\n\nexport interface AttributesUpdateData {\n    id: number\n    value: string | boolean\n    key: string\n}\n\nexport interface CharacterDataUpdateData {\n    parentId: number\n    value: string\n    id: number\n}\n\nexport interface UpdateNodeData<T = VSNode | VNode | number> {\n    parentId: number\n    nextId: number | null\n    node: T\n}\n\nexport interface movedNodesData {\n    parentId: number\n    id: number\n    nextId: number | null\n}\n\nexport interface RemoveUpdateData {\n    parentId: number\n    id: number\n}\n\nexport interface DOMRecordData {\n    addedNodes?: UpdateNodeData[]\n    movedNodes?: movedNodesData[]\n    removedNodes?: RemoveUpdateData[]\n    attrs?: AttributesUpdateData[]\n    texts?: CharacterDataUpdateData[]\n}\n\nexport type FormElementRecord = BaseRecord<RecordType.FORM_EL, FormElementRecordData>\n\nexport interface FormElementRecordData {\n    type: FormElementEvent\n    id: number\n    key?: string\n    value?: string\n    patches?: FormElementStrPatches[]\n}\n\ninterface FormElementStrPatches {\n    index: number\n    type: 'add' | 'rm'\n    value?: string | undefined\n    len?: number | undefined\n}\n\nexport type AudioRecord<T = AudioStrList | AudioOptions | AudioData> = BaseRecord<RecordType.AUDIO, T>\nexport interface AudioOptions {\n    type: 'opts'\n    data: AudioOptionsData\n}\nexport interface AudioStrList {\n    encode: 'base64'\n    type: 'pcm' | 'wav'\n    data: string[]\n}\n\nexport type LocationRecord = BaseRecord<RecordType.LOCATION, LocationRecordData>\n\nexport interface LocationRecordData {\n    href: string\n    path: string\n    hash: string\n    title: string\n    contextNodeId: number\n}\nexport type CanvasRecord = BaseRecord<RecordType.CANVAS, CanvasRecordData>\n\nexport type CanvasRecordData = CanvasMutationRecordData | CanvasInitSnapshotData | CanvasInitStatusData\n\nexport interface CanvasMutationRecordData {\n    id: number\n    strokes: {\n        name: keyof CanvasRenderingContext2D | number\n        args: any[]\n    }[]\n}\n\nexport interface CanvasInitSnapshotData {\n    id: number\n    src: string\n}\n\nexport interface CanvasInitStatusData {\n    id: number\n    status: { [key: string]: string | number }\n}\n\nexport type RecordEvent<T extends RecordData> = (e: T) => void\n\nexport type DBRecordData = { id: number } & RecordData\n\nexport type RecordData =\n    | HeadRecord\n    | SnapshotRecord\n    | FormElementRecord\n    | DOMRecord\n    | MouseRecord\n    | WindowRecord\n    | ScrollRecord\n    | AudioRecord\n    | LocationRecord\n    | CanvasRecord\n    | TerminateRecord\n    | FontRecord\n    | PreFetchRecord\n    | CustomRecord\n    | WebGLRecord\n    | CanvasSnapshotRecord\n    | VideoRecord\n\nexport interface AudioData {\n    src: string\n    opts: AudioOptionsData\n    wavStrList: string[]\n    pcmStrList: string[]\n    subtitles: SubtitlesData[]\n}\n\ninterface SubtitlesData {\n    start: string\n    end: string\n    text: string\n}\n\nexport interface AudioOptionsData {\n    sampleBits: 8 | 16\n    sampleRate: 8000 | 16000 | 22050 | 24000 | 44100 | 48000\n    channelCount: 1 | 2\n}\n\nexport interface VideoData {\n    id: number\n    src: string\n    startTime: number\n    endTime: number\n}\n\nexport type IRecorderStatus = 'PAUSE' | 'RECORDING' | 'STOP'\n\nexport enum TransactionMode {\n    'READONLY' = 'readonly',\n    'READWRITE' = 'readwrite',\n    'VERSIONCHANGE' = 'versionchange'\n}\n\nexport type WatcherArgs<T extends RecordData | HeadRecord, WatchersInstance = any, Recorder = any> = {\n    recorder: Recorder\n    context: Window\n    listenStore: Set<Function>\n    emit: RecordEvent<T>\n    relatedId: string\n    watchers: WatchersInstance\n}\n\nexport interface Constructable<T> {\n    new(...args: any): T\n}\n\nexport interface ReplayOptions {\n    exportName?: string\n    mode?: 'live' | 'default'\n    receiver?: (sender: (data: RecordData) => void) => void\n    autoplay?: boolean\n    records?: RecordData[]\n    target?: string | HTMLElement | Window\n    heatPoints?: boolean\n    timeMode?: 'recordingTime' | 'durationTime'\n    fastForward?: number[]\n    disableScrolling?: boolean\n}\n\nexport interface ReplayInternalOptions extends ReplayOptions {\n    destroyStore: Set<Function>\n    fastForward: number[]\n    autoplay: boolean\n    mode: 'live' | 'default'\n    target: string | HTMLElement | Window\n    timeMode: 'recordingTime' | 'durationTime'\n}\n\nexport interface ReplayData {\n    index?: number\n    head?: HeadRecord\n    snapshot: SnapshotRecord\n    records: RecordData[]\n    audio: AudioData\n    videos: VideoData[]\n}\n\nexport interface ReplayHead {\n    version: string\n    href: string\n    title: string\n    relatedId: string\n    userAgent: string\n    platform: string\n    beginTime: number\n    endTime?: number\n    extra?: {\n        [key: string]: string\n    }\n}\n\nexport type HeadRecord = BaseRecord<RecordType.HEAD, ReplayHead>\n\nexport interface BaseRecord<T, D = any> {\n    type: T\n    data: D\n    time: number\n    relatedId: string\n    id?: number\n}\n\nexport interface FontRecordData {\n    family: string\n    source: string\n}\n\nexport type FontRecord = BaseRecord<RecordType.FONT, FontRecordData>\n\nexport interface PreFetchRecordData {\n    id: number\n    tag: string\n    key: string\n    time: number\n    url: string\n    text: string\n}\n\nexport type PreFetchRecord = BaseRecord<RecordType.PATCH, PreFetchRecordData>\n\nexport type CustomRecordData = { [key: string]: any }\n\nexport type CustomRecord = BaseRecord<RecordType.CUSTOM, CustomRecordData>\n\nexport type WebGLRecord = BaseRecord<RecordType.WEBGL, WebGLRecordData>\n\nexport interface WebGLRecordData {\n    id: number\n    args: any[]\n}\n\nexport type CanvasSnapshotRecord = BaseRecord<RecordType.CANVAS_SNAPSHOT, CanvasSnapshotRecordData>\n\nexport interface CanvasSnapshotRecordData {\n    id: number\n    src: string\n}\n\nexport type VideoRecord = BaseRecord<RecordType.VIDEO, VideoRecordData>\n\nexport interface VideoRecordData {\n    id: number\n    dataStr?: string\n    blobUrl?: string\n}\n","\nimport * as diff from 'diff'\nimport { radix64 } from '../performance/radix64'\nimport { VNode, VSNode, SnapshotRecord, RecordData, RecordType } from '../../types'\n\nexport const isDev = process.env.NODE_ENV === 'development'\n\nimport { name, version, homepage } from '../../package.json';\n\nexport function logError(e: Error | string | any): string {\n    const msg = (e as Error).message || (e as string)\n    console.error(`TimeCat Error: ${msg}`)\n    return msg\n}\n\nexport function logWarn(e: Error | string): string {\n    const msg = (e as Error).message || (e as string)\n    console.warn(`TimeCat Warning: ${msg}`)\n    return msg\n}\n\nexport function logAdvice(msg: string): string {\n    console.log(`%c TimeCat Advice: ${msg}`, 'color:#0f0;')\n    return msg\n}\n\nexport function getTime(): number {\n    return Date.now()\n}\n\nexport function getRadix64TimeStr() {\n    return radix64.btoa(getTime())\n}\n\nexport function getRandomCode(len: 6 | 7 | 8 = 8) {\n    const code = (Math.random() * 20 + 16).toString(36).substring(2, len + 2)\n    return code.toUpperCase()\n}\n\nexport function secondToTime(second: number) {\n    if (second <= 0) {\n        second = 0\n    }\n    const [h, m, s] = [Math.floor(second / 3600), Math.floor((second / 60) % 60), Math.floor(second % 60)]\n    const timeStr = [h, m, s].map(i => (i <= 9 ? '0' + i : i)).join(':')\n    return timeStr.replace(/^00\\:/, '')\n}\n\nexport function getDateTime(timestamp: number) {\n    const date = new Date(timestamp)\n    const hours = date.getHours()\n    const minutes = '0' + date.getMinutes()\n    const seconds = '0' + date.getSeconds()\n    const formattedTime = (hours < 10 ? '0' + hours : hours) + ':' + minutes.substr(-2) + ':' + seconds.substr(-2)\n    return formattedTime\n}\n\nexport function toTimeStamp(timeStr: string) {\n    const parts = timeStr.split(':')\n    if (parts.length === 2) {\n        const [min, sec] = parts\n        return (+min * 60 + +sec) * 1000\n    }\n\n    const [hour, min, sec] = parts\n    return (+hour * 3600 + +min * 60 + +sec) * 1000\n}\n\nexport function isSnapshot(frame: RecordData) {\n    return (frame as SnapshotRecord).type === RecordType.SNAPSHOT && !(frame as SnapshotRecord).data.frameId\n}\n\nexport async function delay(t = 200): Promise<void> {\n    return new Promise(r => {\n        setTimeout(() => r(), t)\n    })\n}\nexport function isVNode(n: VNode | VSNode) {\n    return !!(n as VNode).tag\n}\n\nexport function getStrDiffPatches(oldStr: string, newStr: string) {\n    return getPatches(diff.diffChars(oldStr, newStr))\n}\n\nexport function revertStrByPatches(str: string, changes: ReturnType<typeof getStrDiffPatches>) {\n    changes.forEach((change: any) => {\n        const { type, value, len } = change\n        switch (type) {\n            case 'add':\n                str = str.substring(0, change.index) + value + str.substring(change.index)\n                break\n            case 'rm':\n                str = str.substring(0, change.index) + str.substring(change.index + len)\n                break\n        }\n    })\n    return str\n}\n\nfunction getPatches(changes: diff.Change[]) {\n    let index = 0\n    const patches = changes\n        .map(change => {\n            const { added: add, removed: rm, value, count } = change\n            const len = count || 0\n            if (add) {\n                const ret = {\n                    index,\n                    type: 'add',\n                    value\n                }\n                index += len\n                return ret\n            } else if (rm) {\n                const ret = {\n                    index,\n                    type: 'rm',\n                    len\n                }\n                return ret\n            }\n            index += len\n        })\n        .filter(Boolean)\n\n    return patches as Array<{\n        index: number\n        type: 'add' | 'rm'\n        value?: string\n        len?: number\n    }>\n}\n\nexport function isNumeric(n: string) {\n    return !isNaN(parseFloat(n)) && isFinite(parseFloat(n))\n}\n\nexport function throttle(func: Function, wait: number, options: { leading?: boolean; trailing?: boolean } = {}): any {\n    let context: any\n    let args: any\n    let result: any\n    let timeout: any = null\n    let previous = 0\n\n    const later = function () {\n        previous = options.leading === false ? 0 : Date.now()\n        timeout = null\n        result = func.apply(context, args)\n        if (!timeout) context = args = null\n    }\n    return function (this: any) {\n        const now = Date.now()\n        if (!previous && options.leading === false) previous = now\n        const remaining = wait - (now - previous)\n        context = this\n        args = arguments\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout)\n                timeout = null\n            }\n            previous = now\n            result = func.apply(context, args)\n            if (!timeout) context = args = null\n        } else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining)\n        }\n        return result\n    }\n}\n\ntype Procedure = (...args: any[]) => void\n\ntype Options = {\n    isImmediate?: boolean\n\n    // not standard\n    isTrailing?: boolean\n}\n\nexport function debounce<F extends Procedure>(\n    func: F,\n    waitMilliseconds: number,\n    options: Options = {\n        isImmediate: false,\n        isTrailing: false\n    }\n): (this: ThisParameterType<F>, ...args: Parameters<F>) => void {\n    let timeoutId: ReturnType<typeof setTimeout> | undefined\n\n    return function (this: ThisParameterType<F>, ...args: Parameters<F>) {\n        const context = this\n\n        const doLater = function () {\n            timeoutId = undefined\n            if (!options.isImmediate || options.isTrailing) {\n                func.apply(context, args)\n            }\n        }\n\n        const shouldCallNow = options.isImmediate && timeoutId === undefined\n\n        if (timeoutId !== undefined) {\n            clearTimeout(timeoutId)\n        }\n\n        timeoutId = setTimeout(doLater, waitMilliseconds)\n\n        if (shouldCallNow) {\n            func.apply(context, args)\n        }\n    }\n}\n\nexport function createURL(url: string, base?: string) {\n    try {\n        return new URL(url, base)\n    } catch (e) {\n        logError(e)\n    }\n    return { href: url, pathname: url }\n}\n\nexport function stateDebounce<T extends string | boolean | number>(\n    stateHandle: (setState: (state: T) => void) => void,\n    delay: ((state: T) => number) | number,\n    initState?: T\n) {\n    let preState = initState\n    let timer = 0\n    return (cb: (state: T) => void) => {\n        stateHandle(delayExec)\n\n        function delayExec(state: T) {\n            if (timer) {\n                clearTimeout(timer)\n            }\n\n            timer = window.setTimeout(\n                () => {\n                    if (preState === state) {\n                        return\n                    }\n                    cb(state)\n                    preState = state\n                    clearTimeout(timer)\n                    timer = 0\n                },\n                typeof delay === 'number' ? delay : delay(state)\n            )\n        }\n    }\n}\n\nexport function logBadge(opts: { title: string; content: string; titleColor?: string; backgroundColor?: string }) {\n    const { title, content, titleColor, backgroundColor } = opts\n    const tColor = titleColor || '#606060'\n    const bColor = backgroundColor || '#1475b2'\n    const args = [\n        '%c '.concat(title, ' %c ').concat(content, ' '),\n        'padding: 1px; border-radius: 3px 0 0 3px; color: #fff; background: '.concat(tColor, ';'),\n        'padding: 1px; border-radius: 0 3px 3px 0; color: #fff; background: '.concat(bColor, ';')\n    ]\n    console.log.apply(void 0, args)\n}\n\nexport function logInfo() {\n    logBadge({ title: name, content: version });\n    logBadge({ title: 'homepage', content: homepage })\n}\n\nexport function removeGlobalVariables() {\n    const keys = Object.keys(window)\n    const targetKeys = keys.filter(key => {\n        if (key) {\n            if (key.startsWith('G_RECORD') || key.startsWith('G_REPLAY')) {\n                return true\n            }\n        }\n    }) as (keyof Window)[]\n\n    targetKeys.forEach(key => {\n        delete window[key]\n    })\n}\n\nexport function isNativeFunction(fn: Function) {\n    if (fn.toString().indexOf('[native code]') > -1) {\n        return true\n    }\n    return false\n}\n\nexport const tempEmptyFn = () => { }\nexport const tempEmptyPromise = () => Promise.resolve()\n","\nimport { logError, createURL } from './common'\n\nconst snapshot = () => window.G_REPLAY_DATA && window.G_REPLAY_DATA.snapshot.data\n\nconst href = () => snapshot()?.href || location.href\n\nexport function isCommentNode(node: Node) {\n    return node.nodeType === Node.COMMENT_NODE\n}\n\nexport function isElementNode(node: Node) {\n    return node.nodeType === Node.ELEMENT_NODE\n}\n\nexport function isTextNode(node: Node) {\n    return node.nodeType === Node.TEXT_NODE\n}\n\nexport function filteringScriptTag(str: string) {\n    const reg = /<\\/script>/g\n    return str.replace(reg, '<\\\\/script>')\n}\n\nexport function completeCssHref(str: string, baseUrl?: string, setHref?: (url: string) => string) {\n    return str.replace(/(url\\(['\"]?((\\/{1,2}|\\.\\.?\\/)?.*?)(^\\?.*?)?['\"]?(?=\\)))/g, (string, b, url) => {\n        const newUrl = createURL(url, baseUrl || href())\n        if (url.startsWith('data:')) {\n            return string\n        }\n        return string.replace(url, setHref ? setHref(newUrl.href) : newUrl.href)\n    })\n}\n\nexport function completeAttrHref(str: string, node?: Element) {\n    if (str.startsWith('data')) {\n        return str\n    }\n\n    if (node) {\n        setTimeout(() => {\n            const doc = node.getRootNode() as Document\n            const context = doc.defaultView as Window\n\n            const { href, path } = context?.G_REPLAY_LOCATION || {}\n\n            if (path && href) {\n                const relationHref = createURL(path, href).href\n                const attrs = node.getAttributeNames()\n                attrs\n                    .filter(key => ~['src', 'href'].indexOf(key))\n                    .forEach(key => {\n                        const newHref = createURL(str, relationHref).href\n                        if (node.getAttribute(key) !== newHref) {\n                            node.setAttribute(key, newHref)\n                        }\n                    })\n            }\n        })\n    }\n    return createURL(str, href()).href\n}\n\nexport function isHideComment(node: Node | null) {\n    if (!node) {\n        return false\n    }\n    return node.nodeType === Node.COMMENT_NODE && node.textContent === 'hidden'\n}\n\nexport function isExistingNode(node: Node) {\n    return node.ownerDocument && !!node.ownerDocument.contains(node)\n}\n\nexport async function getRawScriptContent(src: string) {\n    if (!src) {\n        return false\n    }\n    if (src.length > 500) {\n        return false\n    }\n\n    const fullSrc = completeAttrHref(src)\n\n    if (isValidUrl(fullSrc)) {\n        try {\n            return await getScript(fullSrc)\n        } catch (err) {\n            // handle cross error\n            return false\n        }\n    }\n\n    return false\n}\n\nfunction isValidUrl(url: string) {\n    try {\n        new URL(url)\n    } catch (_) {\n        return false\n    }\n    return true\n}\n\nexport async function getScript(src: string) {\n    return await fetch(src).then(\n        async res => filteringScriptTag(await res.text()),\n        reason => {\n            logError(reason)\n            return src\n        }\n    )\n}\n","\nimport { AudioOptionsData } from '../../types'\n\nfunction encodePCM(bufferData: Float32Array, opts: AudioOptionsData) {\n    const { sampleBits } = opts\n    const isLittleEndian = true\n    const length = bufferData.length * (sampleBits / 8)\n    const data = new DataView(new ArrayBuffer(length))\n    let offset = 0\n\n    if (sampleBits === 8) {\n        for (let i = 0; i < bufferData.length; i++, offset++) {\n            const s = Math.max(-1, Math.min(1, bufferData[i]))\n            let val = s < 0 ? s * 128 : s * 127\n            val = +val + 128\n            data.setInt8(offset, val)\n        }\n    } else {\n        for (let i = 0; i < bufferData.length; i++, offset += 2) {\n            const s = Math.max(-1, Math.min(1, bufferData[i]))\n            data.setInt16(offset, s < 0 ? s * 0x8000 : s * 0x7fff, isLittleEndian)\n        }\n    }\n\n    return data\n}\n\nexport function encodeWAV(data: Float32Array[], opts: AudioOptionsData) {\n    const dataView = encodeAudioData(data, opts)\n    const blob = new Blob([dataView], {\n        type: 'audio/wav'\n    })\n\n    return blob\n}\n\nexport function encodeAudioData(data: Float32Array[], opts: AudioOptionsData) {\n    const PMC = encodePCM(mergeArray(data), opts)\n    return createWavFile(PMC, opts)\n}\n\nfunction mergeArray(list: Float32Array[]) {\n    const length = list.length * list[0].length\n    const data = new Float32Array(length)\n    let offset = 0\n    for (let i = 0; i < list.length; i++) {\n        data.set(list[i], offset)\n        offset += list[i].length\n    }\n    return data\n}\n\nfunction createWavFile(audioData: DataView, { channelCount, sampleBits, sampleRate }: AudioOptionsData) {\n    const WAV_HEAD_SIZE = 44\n    const buffer = new ArrayBuffer(WAV_HEAD_SIZE + audioData.byteLength)\n    const isLittleEndian = true\n    // control buffer\n    const view = new DataView(buffer)\n    // write head\n    // RIFF chunk descriptor/identifier\n    writeUTFBytes(view, 0, 'RIFF')\n    // RIFF chunk length\n    view.setUint32(4, 36 + audioData.byteLength * 2, isLittleEndian)\n    // RIFF type\n    writeUTFBytes(view, 8, 'WAVE')\n    // format chunk identifier\n    // FMT sub-chunk\n    writeUTFBytes(view, 12, 'fmt ')\n    // format chunk length\n    view.setUint32(16, 16, isLittleEndian)\n    // sample format (raw)\n    view.setUint16(20, 1, isLittleEndian)\n    // stereo (channels)\n    view.setUint16(22, channelCount, isLittleEndian)\n    // sample rate\n    view.setUint32(24, sampleRate, isLittleEndian)\n    // byte rate (sample rate * block align)\n    view.setUint32(28, sampleRate * channelCount * (sampleBits / 8), isLittleEndian)\n    // block align (channel count * bytes per sample)\n    view.setUint16(32, channelCount * (sampleBits / 8), isLittleEndian)\n    // bits per sample\n    view.setUint16(34, sampleBits, isLittleEndian)\n    // data sub-chunk\n    // data chunk identifier\n    writeUTFBytes(view, 36, 'data')\n    // data chunk length\n    view.setUint32(40, audioData.byteLength, isLittleEndian)\n    // view.setUint32(40, audioData.length * 2, isLittleEndian)\n\n    // write PCM\n    const length = audioData.byteLength\n    let offset = 44\n    for (let i = 0; i < length; i++) {\n        view.setUint8(offset, audioData.getUint8(i))\n        offset++\n    }\n\n    return view\n}\n\nfunction writeUTFBytes(view: DataView, offset: number, string: string) {\n    const len = string.length\n    for (let i = 0; i < len; i++) {\n        view.setUint8(offset + i, string.charCodeAt(i))\n    }\n}\n\nexport function float32ArrayToBase64(data: Float32Array) {\n    return bufferArrayToBase64(data.buffer)\n}\n\nexport function base64ToFloat32Array(str: string) {\n    return new Float32Array(base64ToBufferArray(str))\n}\n\nexport function bufferArrayToBase64(arrayBuffer: ArrayBufferLike) {\n    let binary = ''\n    const bytes = new Uint8Array(arrayBuffer)\n    const len = bytes.byteLength\n    for (let i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i])\n    }\n    return btoa(binary)\n}\n\nexport function base64ToBufferArray(str: string) {\n    const blob = atob(str)\n    const bLength = blob.length\n    const arrayBuffer = new ArrayBuffer(bLength)\n    const dataView = new DataView(arrayBuffer)\n    for (let i = 0; i < bLength; i++) {\n        dataView.setUint8(i, blob.charCodeAt(i))\n    }\n\n    return arrayBuffer\n}\n\nexport function uint8ArrayToAscii(array: Uint8Array) {\n    let outputStr = ''\n    const carry = 1 << 8\n    for (let i = 0; i < array.length; i++) {\n        let num = array[i]\n\n        if (~[13, 34, 39, 44, 60, 62, 92, 96, 10, 0].indexOf(num)) {\n            num += carry\n        }\n\n        outputStr += String.fromCharCode(num)\n    }\n    return outputStr\n}\n\nexport function asciiToUint8Array(str: string) {\n    const carry = 1 << 8\n    const strArray = str.split('')\n    const byteArray = new Uint8Array(strArray.length)\n    for (let i = 0; i < strArray.length; i++) {\n        const num = strArray[i].charCodeAt(0)\n        byteArray[i] = num >= carry ? num - carry : num\n    }\n    return byteArray\n}\n","\nexport class AnimationFrame {\n    requestID: number\n    fps: number\n    animate: Function\n    index = 0\n    constructor(animate: Function, fps = 60) {\n        this.fps = fps\n        this.animate = animate\n    }\n\n    public start() {\n        let then = performance.now()\n        const interval = 1000 / this.fps\n        const tolerance = 0.1\n\n        const animateLoop = (now: number) => {\n            this.requestID = requestAnimationFrame(animateLoop)\n            const delta = now - then\n\n            if (delta >= interval - tolerance) {\n                then = now - (delta % interval)\n                this.animate(delta, this.index++)\n            }\n        }\n        this.requestID = requestAnimationFrame(animateLoop)\n    }\n\n    public stop() {\n        cancelAnimationFrame(this.requestID)\n    }\n}\n","/* smoothscroll v0.4.4 - 2019 - Dustan Kasten, Jeremias Menichelli - MIT License */\n(function () {\n  'use strict';\n\n  // polyfill\n  function polyfill() {\n    // aliases\n    var w = window;\n    var d = document;\n\n    // return if scroll behavior is supported and polyfill is not forced\n    if (\n      'scrollBehavior' in d.documentElement.style &&\n      w.__forceSmoothScrollPolyfill__ !== true\n    ) {\n      return;\n    }\n\n    // globals\n    var Element = w.HTMLElement || w.Element;\n    var SCROLL_TIME = 468;\n\n    // object gathering original scroll methods\n    var original = {\n      scroll: w.scroll || w.scrollTo,\n      scrollBy: w.scrollBy,\n      elementScroll: Element.prototype.scroll || scrollElement,\n      scrollIntoView: Element.prototype.scrollIntoView\n    };\n\n    // define timing method\n    var now =\n      w.performance && w.performance.now\n        ? w.performance.now.bind(w.performance)\n        : Date.now;\n\n    /**\n     * indicates if a the current browser is made by Microsoft\n     * @method isMicrosoftBrowser\n     * @param {String} userAgent\n     * @returns {Boolean}\n     */\n    function isMicrosoftBrowser(userAgent) {\n      var userAgentPatterns = ['MSIE ', 'Trident/', 'Edge/'];\n\n      return new RegExp(userAgentPatterns.join('|')).test(userAgent);\n    }\n\n    /*\n     * IE has rounding bug rounding down clientHeight and clientWidth and\n     * rounding up scrollHeight and scrollWidth causing false positives\n     * on hasScrollableSpace\n     */\n    var ROUNDING_TOLERANCE = isMicrosoftBrowser(w.navigator.userAgent) ? 1 : 0;\n\n    /**\n     * changes scroll position inside an element\n     * @method scrollElement\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {undefined}\n     */\n    function scrollElement(x, y) {\n      this.scrollLeft = x;\n      this.scrollTop = y;\n    }\n\n    /**\n     * returns result of applying ease math function to a number\n     * @method ease\n     * @param {Number} k\n     * @returns {Number}\n     */\n    function ease(k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n\n    /**\n     * indicates if a smooth behavior should be applied\n     * @method shouldBailOut\n     * @param {Number|Object} firstArg\n     * @returns {Boolean}\n     */\n    function shouldBailOut(firstArg) {\n      if (\n        firstArg === null ||\n        typeof firstArg !== 'object' ||\n        firstArg.behavior === undefined ||\n        firstArg.behavior === 'auto' ||\n        firstArg.behavior === 'instant'\n      ) {\n        // first argument is not an object/null\n        // or behavior is auto, instant or undefined\n        return true;\n      }\n\n      if (typeof firstArg === 'object' && firstArg.behavior === 'smooth') {\n        // first argument is an object and behavior is smooth\n        return false;\n      }\n\n      // throw error when behavior is not supported\n      throw new TypeError(\n        'behavior member of ScrollOptions ' +\n          firstArg.behavior +\n          ' is not a valid value for enumeration ScrollBehavior.'\n      );\n    }\n\n    /**\n     * indicates if an element has scrollable space in the provided axis\n     * @method hasScrollableSpace\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function hasScrollableSpace(el, axis) {\n      if (axis === 'Y') {\n        return el.clientHeight + ROUNDING_TOLERANCE < el.scrollHeight;\n      }\n\n      if (axis === 'X') {\n        return el.clientWidth + ROUNDING_TOLERANCE < el.scrollWidth;\n      }\n    }\n\n    /**\n     * indicates if an element has a scrollable overflow property in the axis\n     * @method canOverflow\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function canOverflow(el, axis) {\n      var overflowValue = w.getComputedStyle(el, null)['overflow' + axis];\n\n      return overflowValue === 'auto' || overflowValue === 'scroll';\n    }\n\n    /**\n     * indicates if an element can be scrolled in either axis\n     * @method isScrollable\n     * @param {Node} el\n     * @param {String} axis\n     * @returns {Boolean}\n     */\n    function isScrollable(el) {\n      var isScrollableY = hasScrollableSpace(el, 'Y') && canOverflow(el, 'Y');\n      var isScrollableX = hasScrollableSpace(el, 'X') && canOverflow(el, 'X');\n\n      return isScrollableY || isScrollableX;\n    }\n\n    /**\n     * finds scrollable parent of an element\n     * @method findScrollableParent\n     * @param {Node} el\n     * @returns {Node} el\n     */\n    function findScrollableParent(el) {\n      while (el !== d.body && isScrollable(el) === false) {\n        el = el.parentNode || el.host;\n      }\n\n      return el;\n    }\n\n    /**\n     * self invoked function that, given a context, steps through scrolling\n     * @method step\n     * @param {Object} context\n     * @returns {undefined}\n     */\n    function step(context) {\n      var time = now();\n      var value;\n      var currentX;\n      var currentY;\n      var elapsed = (time - context.startTime) / SCROLL_TIME;\n\n      // avoid elapsed times higher than one\n      elapsed = elapsed > 1 ? 1 : elapsed;\n\n      // apply easing to elapsed time\n      value = ease(elapsed);\n\n      currentX = context.startX + (context.x - context.startX) * value;\n      currentY = context.startY + (context.y - context.startY) * value;\n\n      context.method.call(context.scrollable, currentX, currentY);\n\n      // scroll more if we have not reached our destination\n      if (currentX !== context.x || currentY !== context.y) {\n        w.requestAnimationFrame(step.bind(w, context));\n      }\n    }\n\n    /**\n     * scrolls window or element with a smooth behavior\n     * @method smoothScroll\n     * @param {Object|Node} el\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {undefined}\n     */\n    function smoothScroll(el, x, y) {\n      var scrollable;\n      var startX;\n      var startY;\n      var method;\n      var startTime = now();\n\n      // define scroll context\n      if (el === d.body) {\n        scrollable = w;\n        startX = w.scrollX || w.pageXOffset;\n        startY = w.scrollY || w.pageYOffset;\n        method = original.scroll;\n      } else {\n        scrollable = el;\n        startX = el.scrollLeft;\n        startY = el.scrollTop;\n        method = scrollElement;\n      }\n\n      // scroll looping over a frame\n      step({\n        scrollable: scrollable,\n        method: method,\n        startTime: startTime,\n        startX: startX,\n        startY: startY,\n        x: x,\n        y: y\n      });\n    }\n\n    // ORIGINAL METHODS OVERRIDES\n    // w.scroll and w.scrollTo\n    w.scroll = w.scrollTo = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.scroll.call(\n          w,\n          arguments[0].left !== undefined\n            ? arguments[0].left\n            : typeof arguments[0] !== 'object'\n              ? arguments[0]\n              : w.scrollX || w.pageXOffset,\n          // use top prop, second argument if present or fallback to scrollY\n          arguments[0].top !== undefined\n            ? arguments[0].top\n            : arguments[1] !== undefined\n              ? arguments[1]\n              : w.scrollY || w.pageYOffset\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        arguments[0].left !== undefined\n          ? ~~arguments[0].left\n          : w.scrollX || w.pageXOffset,\n        arguments[0].top !== undefined\n          ? ~~arguments[0].top\n          : w.scrollY || w.pageYOffset\n      );\n    };\n\n    // w.scrollBy\n    w.scrollBy = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0])) {\n        original.scrollBy.call(\n          w,\n          arguments[0].left !== undefined\n            ? arguments[0].left\n            : typeof arguments[0] !== 'object' ? arguments[0] : 0,\n          arguments[0].top !== undefined\n            ? arguments[0].top\n            : arguments[1] !== undefined ? arguments[1] : 0\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        w,\n        d.body,\n        ~~arguments[0].left + (w.scrollX || w.pageXOffset),\n        ~~arguments[0].top + (w.scrollY || w.pageYOffset)\n      );\n    };\n\n    // Element.prototype.scroll and Element.prototype.scrollTo\n    Element.prototype.scroll = Element.prototype.scrollTo = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        // if one number is passed, throw error to match Firefox implementation\n        if (typeof arguments[0] === 'number' && arguments[1] === undefined) {\n          throw new SyntaxError('Value could not be converted');\n        }\n\n        original.elementScroll.call(\n          this,\n          // use left prop, first number argument or fallback to scrollLeft\n          arguments[0].left !== undefined\n            ? ~~arguments[0].left\n            : typeof arguments[0] !== 'object' ? ~~arguments[0] : this.scrollLeft,\n          // use top prop, second argument or fallback to scrollTop\n          arguments[0].top !== undefined\n            ? ~~arguments[0].top\n            : arguments[1] !== undefined ? ~~arguments[1] : this.scrollTop\n        );\n\n        return;\n      }\n\n      var left = arguments[0].left;\n      var top = arguments[0].top;\n\n      // LET THE SMOOTHNESS BEGIN!\n      smoothScroll.call(\n        this,\n        this,\n        typeof left === 'undefined' ? this.scrollLeft : ~~left,\n        typeof top === 'undefined' ? this.scrollTop : ~~top\n      );\n    };\n\n    // Element.prototype.scrollBy\n    Element.prototype.scrollBy = function() {\n      // avoid action when no arguments are passed\n      if (arguments[0] === undefined) {\n        return;\n      }\n\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.elementScroll.call(\n          this,\n          arguments[0].left !== undefined\n            ? ~~arguments[0].left + this.scrollLeft\n            : ~~arguments[0] + this.scrollLeft,\n          arguments[0].top !== undefined\n            ? ~~arguments[0].top + this.scrollTop\n            : ~~arguments[1] + this.scrollTop\n        );\n\n        return;\n      }\n\n      this.scroll({\n        left: ~~arguments[0].left + this.scrollLeft,\n        top: ~~arguments[0].top + this.scrollTop,\n        behavior: arguments[0].behavior\n      });\n    };\n\n    // Element.prototype.scrollIntoView\n    Element.prototype.scrollIntoView = function() {\n      // avoid smooth behavior if not required\n      if (shouldBailOut(arguments[0]) === true) {\n        original.scrollIntoView.call(\n          this,\n          arguments[0] === undefined ? true : arguments[0]\n        );\n\n        return;\n      }\n\n      // LET THE SMOOTHNESS BEGIN!\n      var scrollableParent = findScrollableParent(this);\n      var parentRects = scrollableParent.getBoundingClientRect();\n      var clientRects = this.getBoundingClientRect();\n\n      if (scrollableParent !== d.body) {\n        // reveal element inside parent\n        smoothScroll.call(\n          this,\n          scrollableParent,\n          scrollableParent.scrollLeft + clientRects.left - parentRects.left,\n          scrollableParent.scrollTop + clientRects.top - parentRects.top\n        );\n\n        // reveal parent in viewport unless is fixed\n        if (w.getComputedStyle(scrollableParent).position !== 'fixed') {\n          w.scrollBy({\n            left: parentRects.left,\n            top: parentRects.top,\n            behavior: 'smooth'\n          });\n        }\n      } else {\n        // reveal element in viewport\n        w.scrollBy({\n          left: clientRects.left,\n          top: clientRects.top,\n          behavior: 'smooth'\n        });\n      }\n    };\n  }\n\n  if (typeof exports === 'object' && typeof module !== 'undefined') {\n    // commonjs\n    module.exports = { polyfill: polyfill };\n  } else {\n    // global\n    polyfill();\n  }\n\n}());\n","\n/**\n * Reference: https://developers.google.com/web/tools/lighthouse/audits/first-meaningful-paint\n * TODO FMP (first Meaningful Paint) TODO\n */\nexport class FMP {\n  interval = 1000\n  len = 0\n  resolved = false\n  listener: Array<() => void> = []\n  timer: null | number = null\n  constructor() {\n    this.observe()\n  }\n\n  private clearTimer() {\n    if (this.timer) {\n      clearTimeout(this.timer)\n      this.timer = null\n    }\n  }\n\n  destroy() {\n    this.listener.length = 0\n  }\n\n  observe() {\n    this.timer = window.setTimeout(() => {\n      const entries = performance\n        .getEntriesByType('resource')\n        .filter((item: PerformanceResourceTiming) => this.isMatchType(item))\n      const len = entries.length\n      if (len <= this.len) {\n        performance.clearResourceTimings()\n        this.clearTimer()\n        this.resolved = true\n        if (this.listener.length) {\n          this.listener.forEach(run => run())\n        }\n        return\n      }\n      this.len = len\n      this.observe()\n    }, this.interval)\n  }\n\n  isMatchType(entry: PerformanceResourceTiming) {\n    switch (entry.initiatorType) {\n      case 'link':\n      case 'img':\n      case 'css':\n      case 'iframe':\n        return true\n      default:\n        break\n    }\n  }\n\n  ready(fn: () => void) {\n    if (this.resolved) {\n      return fn()\n    }\n    this.listener.push(fn)\n  }\n}\n","\nimport { PlayerEventTypes } from '../types'\n\nclass Observer<T extends string> {\n    id = 1\n    listenersMap = new Map<T, Map<number, Function>>()\n\n    public on(key: T, fn: Function): number {\n        const map = this.getListenersByKey(key)\n        map.set(++this.id, fn)\n        return this.id\n    }\n\n    public emit(key: T, ...args: any): void {\n        this.getListenersByKey(key).forEach(fn => {\n            fn(...args)\n        })\n    }\n\n    public once(key: T, fn: Function): number {\n        const onceFunc = (...args: any) => {\n            fn(...args)\n            this.off(key, id)\n        }\n        const id = this.on(key, onceFunc)\n        return id\n    }\n\n    public flush(key: T): void {\n        this.getListenersByKey(key).clear()\n    }\n\n    public destroy(): void {\n        this.listenersMap.clear()\n    }\n\n    private off(key: T, id: number): void {\n        const map = this.getListenersByKey(key)\n        map.delete(id)\n    }\n\n    private getListenersByKey(key: T): Map<number, Function> {\n        const map = this.listenersMap.get(key) || new Map<number, Function>()\n        this.listenersMap.set(key, map)\n        return map\n    }\n}\n\nexport const observer = new Observer<PlayerEventTypes>()\n","\nimport { Action, State, RootReducer } from './types'\n\nexport function createStore(reducer: RootReducer) {\n    let state = reducer({} as State)\n    const listeners: Array<(state: State) => void> = []\n\n    function unsubscribe() {\n        listeners.length = 0\n        dispatch({ type: 'RESET', data: {} })\n    }\n\n    function subscribe(listener: (state: State) => void): void {\n        listeners.push(listener)\n    }\n\n    function dispatch(action: Action) {\n        state = reducer(state, action)\n\n        listeners.forEach(listener => {\n            listener(state)\n        })\n    }\n\n    function getState(): State {\n        return state\n    }\n\n    return {\n        unsubscribe,\n        subscribe,\n        dispatch,\n        getState\n    }\n}\n","\nimport { Action, SubReducer } from './types'\nimport { State } from './types'\nexport function combineReducers(reducers: { [key: string]: SubReducer }) {\n    const reducerKeys = Object.keys(reducers)\n    return function combination(state: State, action: Action) {\n        const nextState = {} as State\n\n        for (let i = 0; i < reducerKeys.length; i++) {\n            const key = reducerKeys[i] as keyof State\n\n            const reducer = reducers[key]\n\n            const previousStateForKey = state[key]\n\n            const nextStateForKey = reducer(previousStateForKey, action)\n\n            nextState[key] = nextStateForKey as any\n        }\n        return nextState\n    }\n}\n","\nconst initState = {\n    startTime: 0,\n    endTime: 0,\n    duration: 0,\n    packsInfo: [] as {\n        startTime: number\n        endTime: number\n        duration: number\n        diffTime: number\n    }[]\n}\n\nexport type ProgressState = typeof initState\n\nexport enum ProgressReducerTypes {\n    RESET = 'RESET',\n    PROGRESS = 'PROGRESS'\n}\n\nexport function ProgressReducer(state: ProgressState, action: { type: string; data: Partial<ProgressState> }) {\n    if (!state) {\n        state = initState\n    }\n\n    if (!action) {\n        return state\n    }\n\n    const { type, data } = action\n\n    switch (type) {\n        case ProgressReducerTypes.PROGRESS:\n            return {\n                ...state,\n                ...data\n            }\n        case ProgressReducerTypes.RESET:\n            return { ...initState }\n        default:\n            return state\n    }\n}\n","\nimport { ReplayOptions } from '../../../../types'\n\nconst initState = {\n    speed: 0,\n    options: {} as ReplayOptions\n}\n\nexport type PlayerState = typeof initState\n\nexport enum PlayerReducerTypes {\n    RESET = 'RESET',\n    SPEED = 'SPEED',\n    OPTIONS = 'OPTIONS'\n}\n\nexport function PlayerReducer(\n    state: typeof initState,\n    action: { type: PlayerReducerTypes; data: Partial<typeof initState> }\n) {\n    if (!state) {\n        state = initState\n    }\n\n    if (!action) {\n        return state\n    }\n\n    const { type, data } = action\n\n    switch (type) {\n        case PlayerReducerTypes.OPTIONS:\n            return {\n                ...state,\n                options: data.options!\n            }\n        case PlayerReducerTypes.SPEED:\n            return {\n                ...state,\n                speed: data.speed!\n            }\n        case PlayerReducerTypes.RESET:\n            return { ...initState }\n        default:\n            return state\n    }\n}\n","import { AudioOptionsData, AudioRecord, AudioStrList, RecordData, RecordType } from '../../types'\nimport { base64ToFloat32Array, encodeAudioData } from '../../utils'\n\nexport function getPacks(records: RecordData[]) {\n    const packs: RecordData[][] = []\n    const pack: RecordData[] = []\n\n    records.forEach((record, i) => {\n        if (i && record.type === RecordType.HEAD) {\n            packs.push(pack.slice())\n            pack.length = 0\n        }\n        pack.push(record)\n\n        if (records.length - 1 === i) {\n            packs.push(pack)\n        }\n    })\n\n    return packs\n}\n\nexport function convertAudioBuffer(audioRecords: AudioRecord<AudioStrList>[]): DataView {\n    const bufferStrList: string[] = []\n    audioRecords.forEach(record => {\n        const { data } = record.data\n        bufferStrList.push(...data)\n    })\n\n    const dataArray: Float32Array[] = []\n    for (let i = 0; i < bufferStrList.length; i++) {\n        const data = base64ToFloat32Array(bufferStrList[i])\n        dataArray.push(data)\n    }\n\n    const opts = {\n        sampleBits: 8,\n        channelCount: 1,\n        sampleRate: 48000\n    } as AudioOptionsData\n\n    return encodeAudioData(dataArray, opts)\n}\n","\nimport { RecordData, ReplayData } from '../../../../types'\nimport { getPacks } from '../../transform'\n\nconst initState = {\n    records: [] as RecordData[],\n    packs: [] as RecordData[][],\n    currentData: {} as ReplayData\n}\n\nexport type ReplayDataState = typeof initState\n\nexport enum ReplayDataReducerTypes {\n    RESET = 'RESET',\n    UPDATE_DATA = 'UPDATE_DATA',\n    APPEND_RECORDS = 'APPEND_RECORDS'\n}\n\nexport function ReplayDataReducer(\n    state: typeof initState,\n    action: { type: ReplayDataReducerTypes; data: Partial<typeof initState> }\n) {\n    if (!state) {\n        state = initState\n    }\n\n    if (!action) {\n        return state\n    }\n\n    const { type, data } = action\n\n    switch (type) {\n        case ReplayDataReducerTypes.APPEND_RECORDS:\n            const records = state.records\n            records.push(...data.records!)\n            const packs = getPacks(records)\n            state.packs = packs\n            return state\n        case ReplayDataReducerTypes.UPDATE_DATA:\n            if (data.currentData && data.currentData) {\n                window.G_REPLAY_DATA = data.currentData\n            }\n            return {\n                ...state,\n                ...data\n            }\n        case ReplayDataReducerTypes.RESET:\n            return { ...initState }\n        default:\n            return state\n    }\n}\n","\nimport { createStore } from './create-store'\nimport { combineReducers } from './combine-reducers'\nimport { ProgressReducer } from './reducers/progress'\nimport { PlayerReducer } from './reducers/player'\nimport { ReplayDataReducer } from './reducers/replay-data'\n\nconst reducer = combineReducers({\n    player: PlayerReducer,\n    progress: ProgressReducer,\n    replayData: ReplayDataReducer\n})\n\nexport const Store = createStore(reducer)\nexport * from './reducers'\n","'use strict'\n\nmodule.exports = isMobile\nmodule.exports.isMobile = isMobile\nmodule.exports.default = isMobile\n\nconst mobileRE = /(android|bb\\d+|meego).+mobile|armv7l|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series[46]0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i\n\nconst tabletRE = /android|ipad|playbook|silk/i\n\nfunction isMobile (opts) {\n  if (!opts) opts = {}\n  let ua = opts.ua\n  if (!ua && typeof navigator !== 'undefined') ua = navigator.userAgent\n  if (ua && ua.headers && typeof ua.headers['user-agent'] === 'string') {\n    ua = ua.headers['user-agent']\n  }\n  if (typeof ua !== 'string') return false\n\n  let result = mobileRE.test(ua) || (!!opts.tablet && tabletRE.test(ua))\n\n  if (\n    !result &&\n    opts.tablet &&\n    opts.featureDetect &&\n    navigator &&\n    navigator.maxTouchPoints > 1 &&\n    ua.indexOf('Macintosh') !== -1 &&\n    ua.indexOf('Safari') !== -1\n  ) {\n    result = true\n  }\n\n  return result\n}\n","\nimport { completeAttrHref, completeCssHref, logError } from '../utils'\n\nconst ignoreNodeNames = ['VIDEO', 'IFRAME']\n\nexport function setAttribute(node: HTMLElement, name: string, value: string | boolean | null | object): void {\n    if (node.nodeType !== Node.ELEMENT_NODE) {\n        return\n    }\n    if (name === 'style') {\n        if (typeof value === 'string') {\n            node.style.cssText = completeCssHref(value)\n        } else if (value !== null && typeof value === 'object') {\n            for (const [k, v] of Object.entries(value)) {\n                if (k[0] === '-') {\n                    node.style.setProperty(k, v as any)\n                } else {\n                    node.style[k as any] = v as any\n                }\n            }\n        }\n        return\n    }\n\n    if (name === 'src' && ~ignoreNodeNames.indexOf(node.tagName)) {\n        return\n    }\n\n    // for disabled js prefetch\n    if (value && typeof value === 'string' && /\\.js$/.test(value)) {\n        return\n    }\n\n    if (/^\\d+/.test(name)) {\n        return\n    }\n\n    if (/^on\\w+$/.test(name)) {\n        return\n    }\n\n    if (value === null) {\n        return node.removeAttribute(name)\n    }\n\n    value = String(value)\n\n    if (name === 'href') {\n        value = completeAttrHref(String(value), node)\n    }\n\n    if (name === 'background' || name === 'src') {\n        if (value.startsWith('data:')) {\n            // skip\n        } else {\n            value = completeAttrHref(String(value), node)\n        }\n    }\n\n    // The srcset attribute specifies the URL of the image to use in different situations\n    if (name === 'srcset') {\n        const srcArray = value.split(',')\n        value = srcArray\n            .map(src => {\n                const [url, size] = src.trim().split(' ')\n                if (url && size) {\n                    return `${completeAttrHref(url, node)} ${size}`\n                }\n                if (url) {\n                    return completeAttrHref(url, node)\n                }\n                return ''\n            })\n            .join(', ')\n        // decode uri\n        value = decodeURIComponent(value)\n    }\n\n    if (value.startsWith('/')) {\n        value = completeAttrHref(value, node)\n    }\n\n    try {\n        node.setAttribute(name, value)\n    } catch (err) {\n        logError(err)\n    }\n}\n","\nimport { setAttribute } from './dom'\nimport { nodeStore, isDev, isHideComment, completeCssHref } from '../utils'\nimport { VNode, VSNode } from '../types'\n\nexport function convertVNode(vNode: VNode | VSNode | null, parent?: VNode): Element | null {\n    if (vNode === null || vNode === undefined) {\n        return null\n    }\n    const vs = vNode as VSNode\n    if (vNode.type === Node.COMMENT_NODE) {\n        return createCommentNode(vs) as Element\n    }\n    if (vNode.type === Node.TEXT_NODE) {\n        if (parent && parent.tag === 'style') {\n            const baseUrl = parent?.attrs['css-url']\n            vs.value = completeCssHref(vs.value, baseUrl)\n        }\n        return createText(vs) as Element\n    }\n    const vn = vNode as VNode\n    const output = createNode(vn)\n\n    if ((vn.children && vn.children.length) || (output.childNodes && output.childNodes.length)) {\n        travel(vn, output)\n    }\n\n    return output\n}\n\nfunction travel(vNode: VNode, node: Element): void {\n    const nodeChildren: Element[] = []\n    const vNodeChildren = vNode.children.slice()\n    vNodeChildren.forEach(vChild => {\n        let child = nodeChildren.pop() as Element | null\n        child = convertVNode(vChild, vNode)\n        if (child) {\n            if (isHideComment(node.lastChild)) {\n                setAttribute(child as HTMLElement, 'style', 'visibility: hidden')\n            }\n            node.appendChild(child)\n        }\n    })\n}\n\nfunction createProps(vNode: VNode, node: Element): void {\n    const { props } = vNode.extra\n    if (props) {\n        for (const [key, val] of Object.entries(props)) {\n            if (key === 'scroll') {\n                const { left, top } = val as { top: number; left: number }\n                // TODO\n                // when the inserted element onload?\n                setTimeout(() => {\n                    node.scrollTop = top\n                    node.scrollLeft = left\n                }, 1000)\n            } else {\n                ;(node as any)[key] = val\n            }\n        }\n    }\n}\n\nfunction createAttributes(vNode: VNode, node: Element): void {\n    const attrs = getAttributes(vNode)\n\n    for (const [name, val] of Object.entries(attrs)) {\n        setAttribute(node as HTMLElement, name, val)\n    }\n    if (vNode.tag === 'a') {\n        node.setAttribute('target', '_blank')\n    }\n}\n\nfunction getAttributes(vNode: VNode) {\n    const attrs = { ...vNode.attrs }\n    return attrs\n}\n\nexport function createSpecialNode(vsNode: VSNode) {\n    const { type, value, id } = vsNode\n\n    let output: Node\n\n    switch (type) {\n        case Node.TEXT_NODE:\n            output = document.createTextNode(value)\n            break\n        case Node.COMMENT_NODE:\n            output = document.createComment(value)\n            break\n    }\n    nodeStore.updateNode(id, output!)\n    return output!\n}\n\nexport function createNode(vNode: VNode): Element {\n    const { id, extra } = vNode\n    const { isSVG } = extra\n    let output: Element\n    const tagName = transformTagName(vNode.tag)\n    if (isSVG) {\n        output = document.createElementNS('http://www.w3.org/2000/svg', tagName)\n    } else {\n        output = document.createElement(tagName)\n    }\n\n    if (isDev) {\n        setAttribute(output as HTMLElement, 'vid', id.toString())\n    }\n    createAttributes(vNode, output)\n    createProps(vNode, output)\n    nodeStore.updateNode(id, output)\n    return output\n}\n\nfunction transformTagName(tag: string) {\n    const tagMap: { [key: string]: string } = {\n        // script deactivated\n        script: 'noscript',\n\n        // SVG transform tagName\n        altglyph: 'altGlyph',\n        altglyphdef: 'altGlyphDef',\n        altglyphitem: 'altGlyphItem',\n        animatecolor: 'animateColor',\n        animatemotion: 'animateMotion',\n        animatetransform: 'animateTransform',\n        clippath: 'clipPath',\n        feblend: 'feBlend',\n        fecolormatrix: 'feColorMatrix',\n        fecomponenttransfer: 'feComponentTransfer',\n        fecomposite: 'feComposite',\n        feconvolvematrix: 'feConvolveMatrix',\n        fediffuselighting: 'feDiffuseLighting',\n        fedisplacementmap: 'feDisplacementMap',\n        fedistantlight: 'feDistantLight',\n        feflood: 'feFlood',\n        fefunca: 'feFuncA',\n        fefuncb: 'feFuncB',\n        fefuncg: 'feFuncG',\n        fefuncr: 'feFuncR',\n        fegaussianblur: 'feGaussianBlur',\n        feimage: 'feImage',\n        femerge: 'feMerge',\n        femergenode: 'feMergeNode',\n        femorphology: 'feMorphology',\n        feoffset: 'feOffset',\n        fepointLight: 'fePointLight',\n        fespecularlighting: 'feSpecularLighting',\n        fespotlight: 'feSpotLight',\n        fetile: 'feTile',\n        feturbulence: 'feTurbulence',\n        foreignobject: 'foreignObject',\n        lineargradient: 'linearGradient',\n        radialgradient: 'radialGradient',\n        textpath: 'textPath'\n    }\n    const tagName = tagMap[tag] || tag\n    return tagName\n}\n\nfunction createText(vs: VSNode) {\n    const { value, id } = vs\n    const output: Node = document.createTextNode(value)\n    nodeStore.updateNode(id, output)\n    return output\n}\n\nfunction createCommentNode(vs: VSNode) {\n    const { value, id } = vs\n    const output: Node = document.createComment(value)\n    nodeStore.updateNode(id, output)\n    return output\n}\n","\nimport {\n  RecordData,\n  ReplayData,\n  RecordType,\n  SnapshotRecord,\n  AudioOptionsData,\n  DBRecordData,\n  AudioRecord,\n  HeadRecord,\n  AudioStrList,\n  AudioData,\n  AudioOptions,\n  VideoData,\n  VideoRecord\n} from '../../types'\nimport { decompressWithGzipByte } from 'brick.json/gzip/esm'\nimport { delay, asciiToUint8Array, base64ToBufferArray } from '../../utils'\nimport { Store } from './redux'\nimport mobile from 'is-mobile'\nimport { ContainerComponent } from '../components/container'\nimport { convertVNode } from '../../virtual-dom'\n\nimport FIXED_CSS from '../fixed.scss' // @ts-nocheck @ts-ignore\n\nexport function download(src: Blob | string, name: string) {\n  const tag = document.createElement('a')\n  tag.download = name\n  if (typeof src === 'string') {\n    tag.href = src\n    tag.click()\n  } else {\n    tag.href = URL.createObjectURL(src)\n    tag.click()\n    URL.revokeObjectURL(tag.href)\n  }\n}\n\nexport function transToReplayData(records: RecordData[]): ReplayData {\n  function isAudioPCMStr(record: AudioStrList) {\n    return record.type === 'pcm' && record.encode === 'base64'\n  }\n  function isAudioWAVStr(record: AudioStrList) {\n    return record.type === 'wav' && record.encode === 'base64'\n  }\n\n  const audio = {\n    src: '',\n    pcmStrList: [],\n    wavStrList: [],\n    subtitles: [],\n    opts: {} as AudioOptionsData\n  }\n\n  const replayData: ReplayData = {\n    head: {} as HeadRecord,\n    snapshot: {} as SnapshotRecord,\n    records: [],\n    audio,\n    videos: [] as VideoData[]\n  }\n\n  const videosMap = new Map<number, VideoData & { bufferStrList: string[] }>()\n\n  records.forEach((record, index) => {\n    const next = records[index + 1]\n\n    if (record.type === RecordType.HEAD) {\n      if (next && !(next.data as SnapshotRecord['data']).frameId) {\n        replayData.head = record\n      }\n    } else if (record.type === RecordType.SNAPSHOT) {\n      if (!record.data.frameId) {\n        if (replayData) {\n          replayData.snapshot = record\n        }\n      } else {\n        replayData.records.push(record)\n      }\n    } else {\n      switch (record.type) {\n        case RecordType.AUDIO:\n          const { data: audioData } = record as AudioRecord\n          if ((audioData as AudioData).src) {\n            const data = audioData as AudioData\n            replayData.audio.src = data.src\n            replayData.audio.subtitles = data.subtitles\n          } else if (isAudioPCMStr(audioData as AudioStrList)) {\n            replayData.audio.pcmStrList.push(...(audioData as AudioStrList).data)\n          } else if (isAudioWAVStr(audioData as AudioStrList)) {\n            replayData.audio.wavStrList.push(...(audioData as AudioStrList).data)\n          } else {\n            replayData.audio.opts = (audioData as AudioOptions).data\n          }\n          replayData.records.push(record as RecordData)\n          break\n        case RecordType.VIDEO:\n          const { data, time } = record as VideoRecord\n          const { id, dataStr } = data\n\n          if (!dataStr) {\n            break\n          }\n\n          const videoData = videosMap.get(id)\n          if (videoData) {\n            videoData.bufferStrList.push(dataStr)\n            videoData.endTime = time\n          } else {\n            const newVideoData = {\n              id,\n              startTime: time,\n              endTime: time,\n              bufferStrList: [dataStr]\n            } as VideoData & { bufferStrList: string[] }\n            videosMap.set(id, newVideoData)\n          }\n          replayData.records.push(record as RecordData)\n          break\n      }\n      if (replayData) {\n        replayData.records.push(record as RecordData)\n      }\n    }\n  })\n\n  if (videosMap.size) {\n    const videos = Array.from(videosMap.entries()).map(([, video]) => {\n      const { bufferStrList, startTime, endTime, id } = video\n\n      const chunks = bufferStrList.map(str => {\n        const buffer = base64ToBufferArray(str)\n        const blob = new Blob([buffer], { type: 'video/webm;codecs=vp9' })\n        return blob\n      })\n\n      const steam = new Blob(chunks, { type: 'video/webm' })\n      const blobUrl = window.URL.createObjectURL(steam)\n\n      return {\n        id,\n        src: blobUrl,\n        startTime,\n        endTime\n      } as VideoData\n    })\n    replayData.videos.push(...videos)\n  }\n\n  return replayData\n}\n\nexport function getGZipData(): RecordData[] | null {\n  const str = window.G_REPLAY_STR_RECORDS\n  if (!str) {\n    return null\n  }\n\n  const byteArray = asciiToUint8Array(str)\n\n  return decompressWithGzipByte(byteArray) as RecordData[]\n}\n\nexport function getRecordsFromStore() {\n  const records = Store.getState().replayData.records\n  return records.length ? records : null\n}\n\nexport function parseHtmlStr(htmlStr: string) {\n  const parser = new DOMParser()\n  const children = parser.parseFromString(htmlStr, 'text/html').body.children\n  return [...children] as HTMLElement[]\n}\n\nexport function isMobile(ua?: string) {\n  if (!ua) {\n    return false\n  }\n\n  return mobile({ ua })\n}\n\nexport function showStartMask(c: ContainerComponent) {\n  const startPage = c.container.querySelector('.player-start-page')! as HTMLElement\n  startPage.setAttribute('style', '')\n}\n\nfunction showStartBtn(el: HTMLElement) {\n  const startPage = el.querySelector('.player-start-page')! as HTMLElement\n  const btn = startPage.querySelector('.play-btn') as HTMLElement\n  btn.classList.add('show')\n  return btn\n}\n\nexport function removeStartPage(el: HTMLElement) {\n  const startPage = el.querySelector('.player-start-page') as HTMLElement\n  startPage?.parentElement?.removeChild(startPage)\n}\n\nexport async function waitStart(el: HTMLElement): Promise<void> {\n  const btn = showStartBtn(el)\n  return new Promise(r => {\n    btn.addEventListener('click', async () => {\n      btn.classList.remove('show')\n      await delay(500)\n      r()\n    })\n  })\n}\n\nexport function createIframeDOM(contentDocument: Document, snapshotData: SnapshotRecord['data']) {\n  contentDocument.open()\n  const doctype = snapshotData.doctype\n  const doc = `<!DOCTYPE ${doctype.name} ${doctype.publicId ? 'PUBLIC ' + '\"' + doctype.publicId + '\"' : ''} ${doctype.systemId ? '\"' + doctype.systemId + '\"' : ''\n    }><html><head></head><body></body></html>`\n  contentDocument.write(doc)\n}\n\nexport function injectIframeContent(contentDocument: Document, snapshotData: SnapshotRecord['data']) {\n  const content = convertVNode(snapshotData.vNode)\n  if (content) {\n    const head = content.querySelector('head')\n    if (head) {\n      const style = parseHtmlStr(\n        `<div>\n            <style>\n                ${FIXED_CSS}\n            </style>\n        </div>`\n      )[0].firstElementChild!\n      head.appendChild(style)\n    }\n    const documentElement = contentDocument.documentElement\n    content.scrollLeft = snapshotData.scrollLeft\n    content.scrollTop = snapshotData.scrollTop\n    contentDocument.replaceChild(content, documentElement)\n  }\n}\n","\nimport { Store } from '../redux'\nimport { State } from '../redux/types'\nimport { ValueOf } from '../../../types'\n\nexport type Props = Partial<ValueOf<State>>\n\nconst shallowEqual = (prevProps: Props, nextProps: Props) => {\n    if (prevProps === nextProps) {\n        return true\n    }\n    if (\n        !(typeof prevProps === 'object' && prevProps != null) ||\n        !(typeof nextProps === 'object' && nextProps != null)\n    ) {\n        return false\n    }\n    const keysA = Object.keys(prevProps) as [keyof Props]\n    const keysB = Object.keys(nextProps) as [keyof Props]\n    if (keysA.length !== keysB.length) {\n        return false\n    }\n    for (let i = 0; i < keysA.length; i++) {\n        if (nextProps.hasOwnProperty(keysA[i])) {\n            if (prevProps[keysA[i]] !== nextProps[keysA[i]]) {\n                return false\n            }\n        } else {\n            return false\n        }\n    }\n    return true\n}\n\nconst provider = (store: typeof Store) => {\n    return (mapStateToProps: (state: State) => Props) => {\n        let props: Props\n        return (render: (state: Props) => void) => {\n            const getProps = () => mapStateToProps(store.getState())\n            store.subscribe(() => {\n                const newProps = getProps()\n                if (shallowEqual(newProps, props)) {\n                    return\n                }\n                render((props = newProps))\n            })\n        }\n    }\n}\n\nexport const connect = provider(Store)\n\nexport const ConnectProps = (mapStateToProps: (state: State) => Props | ValueOf<State>) => {\n    return function (target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n        const originalMethod = descriptor.value\n\n        descriptor.value = function (cb?: Function) {\n            connect(mapStateToProps)(state => {\n                originalMethod.call(this, state)\n                cb && cb(state)\n            })\n        }\n    }\n}\n","\nexport abstract class HeatBarBase {\n    target: HTMLCanvasElement\n    context: CanvasRenderingContext2D\n    points: { step: number; snapshot: boolean }[]\n    targetWidth: number\n    targetHeight: number\n    ratio = 2\n    constructor(target: HTMLCanvasElement, points: { step: number; snapshot: boolean }[] = []) {\n        this.target = target\n        this.points = points\n\n        const targetWidth = this.target.offsetWidth * this.ratio\n        const targetHeight = this.target.offsetHeight * this.ratio\n\n        this.targetWidth = target.width = targetWidth\n        this.targetHeight = target.height = targetHeight\n\n        this.context = target.getContext('2d')!\n    }\n\n    abstract draw(): void\n\n    radiusRect(x: number, y: number, w: number, h: number, r: number, color = '#fff') {\n        const min_size = Math.min(w, h)\n        if (r > min_size / 2) {\n            r = min_size / 2\n        }\n\n        this.context.fillStyle = color\n        this.context.strokeStyle = color\n\n        this.context.beginPath()\n        this.context.moveTo(x + r, y)\n        this.context.arcTo(x + w, y, x + w, y + h, r)\n        this.context.arcTo(x + w, y + h, x, y + h, r)\n        this.context.arcTo(x, y + h, x, y, r)\n        this.context.arcTo(x, y, x + w, y, r)\n        this.context.closePath()\n\n        this.context.stroke()\n        this.context.fill()\n    }\n}\n","\nimport { HeatBarBase } from './base'\n\nexport class Pillar extends HeatBarBase {\n    constructor(target: HTMLCanvasElement, points: { step: number; snapshot: boolean }[]) {\n        super(target, points)\n        this.draw()\n    }\n\n    draw(): void {\n        const points = this.points\n        const len = points.length\n\n        const reactWidth = this.targetWidth / (len * 2)\n        const reactHeight = this.targetHeight\n\n        const max = Math.max.apply(\n            null,\n            points.map(p => p.step)\n        )\n\n        for (let i = 0; i < len; i++) {\n            const point = points[i]\n            if (!point.step) {\n                continue\n            }\n            const x = i * 2 * reactWidth\n            const y = 2\n            const w = reactWidth\n            const maxHeight = reactHeight * 0.9\n            const sinCurve = Math.sin((point.step / max) * (Math.PI / 2))\n            const z = 0.16\n            const scale = sinCurve * (1 - z) + z\n            const h = point.snapshot ? maxHeight : scale * maxHeight\n            const color = point.snapshot ? '#6AD1C7' : '#fff'\n\n            this.radiusRect(x, y, w, h, 2, color)\n        }\n    }\n}\n","\nimport { HeatBarBase } from './base'\n\nexport class NormalLine extends HeatBarBase {\n    constructor(target: HTMLCanvasElement) {\n        super(target)\n        this.draw()\n    }\n\n    draw() {\n        if (!this.targetWidth) {\n            return\n        }\n        const radius = 4\n        this.radiusRect(radius, 2 * radius, this.targetWidth - 2 * radius, 8, radius)\n    }\n}\n","\nimport { parseHtmlStr } from './common'\n\nexport interface IComponent {\n  parent: HTMLElement\n  target: HTMLElement\n}\n\nexport function Component(name: string, html: string, opts?: Partial<{ isShadow: boolean }>) {\n  return function (constructor: Function) {\n    if (!customElements.get(name))\n      customElements.define(\n        name,\n        class extends HTMLElement {\n          constructor() {\n            super()\n            const child = parseHtmlStr(html)[0]\n            constructor.prototype.target = child\n\n            const slot = child.getElementsByTagName('slot')[0]\n\n            if (slot && this.children?.length > 0) {\n              const parent = slot.parentElement\n                ;[...this.children].forEach(el => parent?.insertBefore(el, null))\n              parent?.removeChild(slot)\n            }\n\n            if (opts?.isShadow) {\n              this.attachShadow({ mode: 'open' }).append(child)\n            } else {\n              this.parentElement?.replaceChild(child, this)\n            }\n\n            constructor.prototype.parent = child.parentElement\n          }\n        }\n      )\n  }\n}\n\n/**\n * for vscode lit-html\n * highlight tagged string template\n * @param str\n */\nexport const html = function (strings: TemplateStringsArray, ...values: any) {\n  let str = ''\n  strings.forEach((string, i) => {\n    str += string + (values[i] || '')\n  })\n  return str\n}\n","\n// left: 37, up: 38, right: 39, down: 40,\n// spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36\n\nexport function disableScrolling(target: Document) {\n    const keys = { 37: 1, 38: 1, 39: 1, 40: 1 } as { [key: string]: number }\n\n    function preventDefault(e: Event) {\n        e.preventDefault()\n    }\n\n    function preventDefaultForScrollKeys(e: Event & { keyCode: string }) {\n        if (keys[e.keyCode]) {\n            preventDefault(e)\n            return false\n        }\n    }\n\n    // modern Chrome requires { passive: false } when adding event\n    let supportsPassive = false\n    try {\n        target.addEventListener(\n            'test' as any,\n            () => {},\n            Object.defineProperty({}, 'passive', {\n                get: function () {\n                    supportsPassive = true\n                }\n            })\n        )\n    } catch (e) {}\n\n    const wheelOpt = supportsPassive ? ({ passive: false } as EventListenerOptions) : false\n    const wheelEvent = 'onwheel' in document.createElement('div') ? 'wheel' : 'mousewheel'\n\n    // call this to Disable\n    function disableScroll() {\n        target.addEventListener('DOMMouseScroll', preventDefault, false) // older FF\n        target.addEventListener(wheelEvent, preventDefault, wheelOpt) // modern desktop\n        target.addEventListener('touchmove', preventDefault, wheelOpt) // mobile\n        target.addEventListener('keydown', preventDefaultForScrollKeys, false)\n    }\n\n    // call this to Enable\n    // function enableScroll() {\n    //     target.removeEventListener('DOMMouseScroll', preventDefault, false)\n    //     target.removeEventListener(wheelEvent as any, preventDefault, wheelOpt)\n    //     target.removeEventListener('touchmove', preventDefault, wheelOpt)\n    //     target.removeEventListener('keydown', preventDefaultForScrollKeys, false)\n    // }\n\n    disableScroll()\n}\n","\nexport const emptyTemplate = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0,user-scalable=no, viewport-fit=cover\">\n    <meta http-equiv=\"Content-Security-Policy-Report-Only\" />\n    <title>TimeCat</title>\n</head>\n<body style=\"margin: 0; overflow: hidden\">\n</body>\n</html>\n`\nexport const pacmanCss = `.pacman-box{margin:0 auto;display:flex;vertical-align:middle;height:100vh;flex:0 1 auto;flex-direction:column;flex-grow:1;flex-shrink:0;flex-basis:25%;max-width:25%;align-items:center;justify-content:center}.pacman>div:first-of-type,.pacman>div:nth-child(2){width:0;height:0;border-right:25px solid transparent;border-top:25px solid grey;border-left:25px solid grey;border-bottom:25px solid grey;border-radius:25px;position:relative;left:-30px}@-webkit-keyframes rotate_pacman_half_up{0%,100%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}50%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate_pacman_half_up{0%,100%{-webkit-transform:rotate(270deg);transform:rotate(270deg)}50%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes rotate_pacman_half_down{0%,100%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}50%{-webkit-transform:rotate(0);transform:rotate(0)}}@keyframes rotate_pacman_half_down{0%,100%{-webkit-transform:rotate(90deg);transform:rotate(90deg)}50%{-webkit-transform:rotate(0);transform:rotate(0)}}@-webkit-keyframes pacman-balls{75%{opacity:.7}100%{-webkit-transform:translate(-100px,-6.25px);transform:translate(-100px,-6.25px)}}@keyframes pacman-balls{75%{opacity:.7}100%{-webkit-transform:translate(-100px,-6.25px);transform:translate(-100px,-6.25px)}}.pacman{transform: translateX(30px);position:relative}.pacman>div:nth-child(3){-webkit-animation:pacman-balls 1s -.66s infinite linear;animation:pacman-balls 1s -.66s infinite linear}.pacman>div:nth-child(4){-webkit-animation:pacman-balls 1s -.33s infinite linear;animation:pacman-balls 1s -.33s infinite linear}.pacman>div:nth-child(5){-webkit-animation:pacman-balls 1s 0s infinite linear;animation:pacman-balls 1s 0s infinite linear}.pacman>div:first-of-type{-webkit-animation:rotate_pacman_half_up .5s 0s infinite;animation:rotate_pacman_half_up .5s 0s infinite}.pacman>div:nth-child(2){-webkit-animation:rotate_pacman_half_down .5s 0s infinite;animation:rotate_pacman_half_down .5s 0s infinite;margin-top:-50px}.pacman>div:nth-child(3),.pacman>div:nth-child(4),.pacman>div:nth-child(5),.pacman>div:nth-child(6){background-color:grey;border-radius:100%;margin:2px;width:10px;height:10px;position:absolute;-webkit-transform:translate(0,-6.25px);transform:translate(0,-6.25px);top:25px;left:70px}`\n\nexport const loadingScriptContent = `const loadingNode = document.createElement('div')\nloadingNode.className = 'pacman-box';\nloadingNode.innerHTML = '<style>${pacmanCss}<\\/style><div class=\"pacman\"><div><\\/div><div><\\/div><div><\\/div><div><\\/div><div><\\/div><\\/div>'\nloadingNode.setAttribute('style', 'text-align: center;vertical-align: middle;line-height: 100vh;')\ndocument.body.insertBefore(loadingNode, document.body.firstChild);window.addEventListener('DOMContentLoaded', () => loadingNode.parentNode.removeChild(loadingNode))`\n\nconst ringCss = `.lds-ring{margin-left:-40px;margin-top:-40px;width:80px;height:80px;position:absolute;left:50%;top:50%}.lds-ring div{box-sizing:border-box;display:block;position:absolute;width:64px;height:64px;margin:8px;border:8px solid grey;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(0.5,0,0.5,1) infinite;border-color:grey transparent transparent transparent}.lds-ring div:nth-child(1){animation-delay:-0.45s}.lds-ring div:nth-child(2){animation-delay:-0.3s}.lds-ring div:nth-child(3){animation-delay:-0.15s}@keyframes lds-ring{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}`\nexport const normalLoading = `<div class=\"lds-ring\"><style>${ringCss}<\\/style><div></div><div></div><div></div><div></div></div>`\n","\nexport enum PlayerEventTypes {\n    PLAY = 'play',\n    PAUSE = 'pause',\n    STOP = 'stop',\n    SPEED = 'speed',\n    RESIZE = 'resize',\n    PROGRESS = 'progress',\n    JUMP = 'jump'\n}\n","\nimport { ContainerComponent } from './container'\nimport { ReplayInternalOptions } from '../../types'\nimport { ConnectProps, Component, html, Store, PlayerReducerTypes, parseHtmlStr, IComponent } from '../utils'\n\n@Component(\n    'player-keyboard',\n    html`<div class=\"player-keyboard\">\n        <button class=\"play-or-pause\" type=\"button\" speed=\"1\">▲</button>\n    </div>`\n)\nexport class KeyboardComponent implements IComponent {\n    parent: HTMLElement\n    target: HTMLElement\n    c: ContainerComponent\n    options: ReplayInternalOptions\n    controller: HTMLElement\n    playOrPauseBtn: HTMLButtonElement\n\n    constructor(options: ReplayInternalOptions, container: ContainerComponent) {\n        this.options = options\n        this.c = container\n        this.init()\n    }\n\n    @ConnectProps(state => ({\n        speed: state.player.speed\n    }))\n    private watchPlayerSpeed(state?: { speed: number }) {\n        if (state) {\n            this.paly(state.speed)\n            this.setSpeed(state.speed)\n        }\n    }\n\n    private init() {\n        this.controller = this.c.container.querySelector('.player-keyboard') as HTMLElement\n        this.playOrPauseBtn = this.c.container.querySelector('.play-or-pause') as HTMLButtonElement\n\n        this.createFastForwards(this.options.fastForward)\n\n        const controllerHandler = (e: MouseEvent & { target: HTMLElement & { type: string } }) => {\n            if (e.target && e.target.type === 'button') {\n                const speed = Number((e.target as HTMLElement).getAttribute('speed'))\n                this.dispatchPlay(speed)\n            }\n        }\n\n        this.controller.addEventListener('click', controllerHandler, false)\n        this.options.destroyStore.add(() => {\n            this.controller.removeEventListener('click', controllerHandler, false)\n        })\n\n        this.watchPlayerSpeed()\n        this.detectWindowIsActive()\n    }\n\n    createFastForwards(speeds: number[]) {\n        speeds = Array.from(new Set([1].concat(speeds)))\n        if (speeds) {\n            const htmlStr = speeds.reduce(\n                (s, speed) => s + html`<button type=\"button\" class=\"speed\" speed=\"${speed}\">${speed}x</button>`,\n                ''\n            )\n\n            this.controller.append(...parseHtmlStr(htmlStr))\n        }\n    }\n\n    private dispatchPlay(speed = 0) {\n        Store.dispatch({\n            type: PlayerReducerTypes.SPEED,\n            data: {\n                speed\n            }\n        })\n    }\n\n    private detectWindowIsActive() {\n        const handler = () => {\n            if (document.visibilityState === 'hidden') {\n                this.dispatchPlay(0)\n            }\n        }\n        document.addEventListener('visibilitychange', handler, false)\n        this.options.destroyStore.add(() => {\n            document.removeEventListener('visibilitychange', handler, false)\n        })\n    }\n\n    private paly(speed: number) {\n        if (speed !== 0) {\n            this.playOrPauseBtn.innerText = '〓'\n            this.playOrPauseBtn.setAttribute('style', 'letter-spacing: 1px;font-weight: bold;')\n            this.playOrPauseBtn.removeAttribute('speed')\n        } else {\n            this.playOrPauseBtn.innerText = '▲'\n            this.playOrPauseBtn.removeAttribute('style')\n            this.playOrPauseBtn.setAttribute('speed', '1')\n        }\n    }\n\n    private setSpeed(speed: number) {\n        const speedNodes = this.c.container.querySelectorAll('.speed') as NodeListOf<HTMLButtonElement>\n        ;[...speedNodes].forEach(node => {\n            node.removeAttribute('disabled')\n        })\n\n        const index = getBtnIndex(speed)\n\n        function getBtnIndex(speed: number) {\n            return [...speedNodes].findIndex(node => node.getAttribute('speed') === speed.toString())\n        }\n        if (index > -1) {\n            speedNodes[index].setAttribute('disabled', '')\n        }\n    }\n}\n","import { FontRecordData } from '../../types'\nimport { PlayerComponent } from '../components/player'\n\nexport function renderFont(this: PlayerComponent, data: FontRecordData) {\n    const { family, source } = data\n    const buffer = new Uint8Array(source.length)\n    for (let i = 0; i < source.length; i++) {\n        const code = source.charCodeAt(i)\n        buffer[i] = code\n    }\n    const font = new window.FontFace(family, buffer)\n    this.c.sandBoxDoc.fonts.add(font)\n    document.fonts.add(font)\n}\n","import { PreFetchRecordData } from '../../types'\nimport { delay, nodeStore } from '../../utils'\n\nexport async function renderPatch(data: PreFetchRecordData) {\n    const { id, key, url, tag, text } = data\n    const node = nodeStore.getNode(id)\n    if (!node) {\n        await delay(1000)\n    }\n    const n = node as HTMLElement\n    if (n && n.getAttribute(key) === url && n.tagName === tag.toUpperCase()) {\n        if (tag === 'link') {\n            const replaceNode = document.createElement('style')\n            replaceNode.setAttribute('type', 'text/css')\n            replaceNode.setAttribute('css-url', url)\n            replaceNode.innerHTML = text\n            n.replaceWith(replaceNode)\n        }\n    }\n}\n","import { LocationRecordData } from '../../types'\nimport { nodeStore } from '../../utils'\n\nexport async function renderLocation(data: LocationRecordData) {\n    const { path, hash, href, contextNodeId } = data as LocationRecordData\n    const contextNode = nodeStore.getNode(contextNodeId)\n\n    if (contextNode) {\n        const context = contextNode.ownerDocument!.defaultView!\n        context.G_REPLAY_LOCATION = { ...context.G_REPLAY_LOCATION, ...{ path, hash, href } }\n    }\n}\n","import { SnapshotRecord } from '../../types'\nimport { nodeStore } from '../../utils'\nimport { setAttribute } from '../../virtual-dom'\nimport { createIframeDOM, injectIframeContent } from '../utils'\n\nexport async function renderSnapshot(data: SnapshotRecord['data']) {\n    const snapshotData = data\n    const { frameId } = snapshotData\n\n    if (frameId) {\n        const iframeNode = nodeStore.getNode(frameId) as HTMLIFrameElement\n        if (iframeNode) {\n            const src = iframeNode.getAttribute('src')\n            if (src) {\n                setAttribute(iframeNode, 'disabled-src', src)\n                setAttribute(iframeNode, 'src', null)\n            }\n            const contentDocument = iframeNode.contentDocument!\n            createIframeDOM(contentDocument, snapshotData)\n            injectIframeContent(contentDocument, snapshotData)\n        }\n    }\n}\n","import { ScrollRecordData } from '../../types'\nimport { nodeStore } from '../../utils'\nimport { PlayerComponent } from '../components/player'\n\nexport function renderScroll(this: PlayerComponent, data: ScrollRecordData) {\n    const { top, left, id, behavior: b } = data\n    const target = id ? (nodeStore.getNode(id) as HTMLElement) : this.c.sandBoxDoc.documentElement\n\n    if (!target) {\n        return\n    }\n\n    const curTop = target.scrollTop\n\n    // prevent jump too long distance\n    const height = window.G_REPLAY_DATA.snapshot.data.height\n    const behavior = b || Math.abs(top - curTop) > height * 3 ? 'auto' : 'smooth'\n\n    const opts = {\n        top,\n        left,\n        behavior\n    } as ScrollToOptions\n\n    try {\n        target.scroll(opts)\n    } catch (error) {\n        // fixed for in firefox\n        if (target.nodeName === 'HTML') {\n            target.ownerDocument.defaultView?.scroll(opts)\n        } else {\n            target.scrollLeft = left\n            target.scrollTop = top\n        }\n    }\n}\n","import { WindowRecordData } from '../../types'\nimport { nodeStore } from '../../utils'\nimport { PlayerComponent } from '../components/player'\n\nexport function renderWindow(this: PlayerComponent, data: WindowRecordData) {\n    const { width, height, id } = data\n    let target: HTMLElement\n    if (id) {\n        target = nodeStore.getNode(id) as HTMLElement\n        ;(target as HTMLElement).style.width = width + 'px'\n        ;(target as HTMLElement).style.height = height + 'px'\n    } else {\n        target = this.c.sandBoxDoc.body\n        this.c.resize({ setWidth: width, setHeight: height })\n    }\n}\n","import { MouseEventType, MouseRecordData } from '../../types'\nimport { nodeStore } from '../../utils'\nimport { PlayerComponent } from '../components/player'\n\nexport function renderMouse(this: PlayerComponent, data: MouseRecordData) {\n    const { x, y, id, type } = data\n\n    let left = 0,\n        top = 0\n\n    if (id) {\n        const node = nodeStore.getNode(id) as HTMLElement\n        let rect = {}\n        if (node && node.getBoundingClientRect) {\n            rect = node.getBoundingClientRect()\n        }\n        const { left: nodeLeft, top: nodeTop } = rect as any\n        left = nodeLeft\n        top = nodeTop\n    }\n\n    if (type === MouseEventType.MOVE) {\n        this.pointer.move(x + left, y + top)\n    } else if (type === MouseEventType.CLICK) {\n        this.pointer.click(x + left, y + top)\n    }\n}\n","import { FormElementEvent, FormElementRecordData } from '../../types'\nimport { nodeStore, revertStrByPatches } from '../../utils'\nimport { Store } from '../utils'\n\nexport function renderFormEl(data: FormElementRecordData, opts: { isJumping?: boolean }) {\n    const { isJumping } = opts || {}\n    const { id, key, type: formType, value, patches } = data as FormElementRecordData\n    const node = nodeStore.getNode(id) as HTMLInputElement | undefined\n    const { mode } = Store.getState().player.options\n\n    if (node) {\n        if (formType === FormElementEvent.INPUT || formType === FormElementEvent.CHANGE) {\n            if (patches && patches.length) {\n                const newValue = revertStrByPatches(node.value, patches)\n                node.value = newValue\n            } else if (key) {\n                ;(node as any)[key] = value\n            }\n        } else if (formType === FormElementEvent.FOCUS) {\n            mode !== 'live' && !isJumping && node.focus && node.focus({ preventScroll: true })\n        } else if (formType === FormElementEvent.BLUR) {\n            mode !== 'live' && !isJumping && node.blur && node.blur()\n        } else if (formType === FormElementEvent.PROP) {\n            if (key) {\n                ;(node as any)[key] = value\n            }\n        }\n    }\n}\n","import {\n  AttributesUpdateData,\n  CharacterDataUpdateData,\n  DOMRecordData,\n  RemoveUpdateData,\n  UpdateNodeData,\n  VNode,\n  VSNode\n} from '../../types'\nimport { isElementNode, isExistingNode, isVNode, nodeStore } from '../../utils'\nimport { convertVNode, createSpecialNode, setAttribute } from '../../virtual-dom'\n\nfunction insertOrMoveNode(data: UpdateNodeData, orderSet: Set<number>) {\n  const { parentId, nextId, node } = data\n  const parentNode = nodeStore.getNode(parentId!)\n\n  const findNextNode = (nextId: number | null): Node | null => {\n    return nextId ? nodeStore.getNode(nextId) : null\n  }\n\n  if (parentNode && isElementNode(parentNode)) {\n    let nextNode: Node | null = null\n\n    if (nextId) {\n      // Must wait for the relation node inserted first\n      if (orderSet.has(nextId)) {\n        return true\n      }\n\n      nextNode = findNextNode(nextId)\n      if (!nextNode) {\n        return true\n      }\n\n      if (!parentNode.contains(nextNode)) {\n        return true\n      }\n    }\n    const n = node as VNode | VSNode\n\n    let insertNode: Node | null\n\n    if (typeof node === 'number') {\n      insertNode = nodeStore.getNode(node)!\n\n      if (orderSet.has(node)) {\n        orderSet.delete(node)\n      }\n    } else if (isVNode(n)) {\n      insertNode = convertVNode(n)\n    } else {\n      insertNode = createSpecialNode(<VSNode>n)\n    }\n\n    if (insertNode) {\n      parentNode.insertBefore(insertNode, nextNode)\n    }\n  } else {\n    return true\n  }\n}\n\nexport function renderDom(data: DOMRecordData) {\n  const { addedNodes, movedNodes, removedNodes, attrs, texts } = data\n  removedNodes &&\n    removedNodes.forEach((data: RemoveUpdateData) => {\n      const { parentId, id } = data\n      const parentNode = nodeStore.getNode(parentId)\n      const node = nodeStore.getNode(id)\n      if (node && parentNode && parentNode.contains(node)) {\n        parentNode.removeChild(node as Node)\n      }\n    })\n\n  const orderSet: Set<number> = new Set()\n  const movedList = (movedNodes && movedNodes.slice()) || []\n\n  // node1 -> node2 -> node3\n  // insert node2 first\n  // insert node1 last\n  // => if nextId equal id, insert id first\n\n  movedList.forEach(data => {\n    // Is there a relations between two nodes\n    if (data.nextId) {\n      if (movedList.some(a => a.id === data.nextId)) {\n        orderSet.add(data.nextId)\n      }\n    }\n  })\n\n  const addedList = movedList\n    .map(item => {\n      const { id, parentId, nextId } = item\n      return {\n        node: id,\n        parentId,\n        nextId\n      } as UpdateNodeData\n    })\n    .concat((addedNodes && addedNodes.slice()) || [])\n\n  // Math Termial\n  if (addedList) {\n    const n = addedList.length\n    const maxRevertCount = n > 0 ? (n * n + n) / 2 : 0\n    let revertCount = 0\n\n    while (addedList.length) {\n      const addData = addedList.shift()\n      if (addData) {\n        if (insertOrMoveNode(addData, orderSet)) {\n          // revert here\n          if (revertCount++ < maxRevertCount) {\n            addedList.push(addData)\n          }\n        }\n      }\n    }\n  }\n\n  attrs &&\n    attrs.forEach((attr: AttributesUpdateData) => {\n      const { id, key, value } = attr\n      const node = nodeStore.getNode(id) as HTMLElement\n\n      if (node) {\n        setAttribute(node as HTMLElement, key, value)\n      }\n    })\n\n  texts &&\n    texts.forEach((text: CharacterDataUpdateData) => {\n      const { id, value, parentId } = text\n      const parentNode = nodeStore.getNode(parentId) as HTMLElement\n      const node = nodeStore.getNode(id) as HTMLElement\n\n      if (parentNode && node) {\n        if (isExistingNode(node)) {\n          node.textContent = value\n          return\n        }\n        parentNode.innerText = value\n      }\n    })\n}\n","\nimport {\n    RecordData,\n    FormElementRecordData,\n    RecordType,\n    DOMRecordData,\n    LocationRecordData,\n    CanvasRecordData,\n    SnapshotRecord,\n    PreFetchRecordData,\n    WebGLRecordData,\n    CanvasSnapshotRecordData\n} from '../types'\nimport { PlayerComponent } from './components/player'\nimport { delay } from '../utils'\nimport { renderFont } from './renders/font'\nimport { renderPatch } from './renders/patch'\nimport { renderLocation } from './renders/location'\nimport { renderSnapshot } from './renders/snapshot'\nimport { renderScroll } from './renders/scroll'\nimport { renderWindow } from './renders/window'\nimport { renderMouse } from './renders/mouse'\nimport { renderFormEl } from './renders/form-el'\nimport { renderDom } from './renders/dom'\n\nexport async function renderAll(\n    this: PlayerComponent,\n    recordData: RecordData,\n    opts?: { speed: number; isJumping: boolean }\n) {\n    const { isJumping, speed } = opts || {}\n    const delayTime = isJumping ? 0 : 200\n    const { type, data } = recordData\n\n    // waiting for mouse or scroll transform animation finish\n    const actionDelay = () => (delayTime ? delay(delayTime) : Promise.resolve())\n\n    switch (type) {\n        case RecordType.SNAPSHOT: {\n            renderSnapshot(data as SnapshotRecord['data'])\n            break\n        }\n\n        case RecordType.SCROLL: {\n            renderScroll.call(this, data)\n            break\n        }\n        case RecordType.WINDOW: {\n            renderWindow.call(this, data)\n            break\n        }\n        case RecordType.MOUSE: {\n            renderMouse.call(this, data)\n            break\n        }\n        case RecordType.DOM: {\n            if (!isJumping && speed === 1) {\n                await actionDelay()\n            }\n            renderDom(data as DOMRecordData)\n            break\n        }\n        case RecordType.FORM_EL: {\n            if (!isJumping && speed === 1) {\n                await actionDelay()\n            }\n            renderFormEl(data as FormElementRecordData, { isJumping })\n            break\n        }\n        case RecordType.LOCATION: {\n            renderLocation(data as LocationRecordData)\n            break\n        }\n        case RecordType.FONT: {\n            renderFont.call(this, data as CanvasRecordData)\n            break\n        }\n        case RecordType.PATCH: {\n            renderPatch(data as PreFetchRecordData)\n            break\n        }\n        default: {\n            break\n        }\n    }\n}\n","\nimport { PointerComponent } from './pointer'\nimport { renderAll } from '../render'\nimport {\n  getTime,\n  isSnapshot,\n  toTimeStamp,\n  base64ToFloat32Array,\n  delay,\n  AnimationFrame,\n  nodeStore,\n  encodeWAV\n} from '../../utils'\nimport { ProgressComponent } from './progress'\nimport { ContainerComponent } from './container'\nimport { RecordData, AudioData, SnapshotRecord, ReplayInternalOptions, ReplayData, VideoData } from '../../types'\nimport { BroadcasterComponent } from './broadcaster'\nimport { PlayerEventTypes } from '../types'\nimport {\n  Component,\n  html,\n  Store,\n  PlayerReducerTypes,\n  ReplayDataReducerTypes,\n  ConnectProps,\n  observer,\n  transToReplayData,\n  normalLoading,\n  parseHtmlStr,\n  isMobile,\n  IComponent\n} from '../utils'\n\n@Component(\n  'timecat-player',\n  html`<div class=\"timecat-player\">\n        <iframe\n            class=\"player-sandbox\"\n            sandbox=\"allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox\"\n        ></iframe>\n    </div>`\n)\nexport class PlayerComponent implements IComponent {\n  target: HTMLElement\n  parent: HTMLElement\n  options: ReplayInternalOptions\n  c: ContainerComponent\n  pointer: PointerComponent\n  progress: ProgressComponent\n  broadcaster: BroadcasterComponent\n  audioNode: HTMLAudioElement\n\n  records: RecordData[]\n  speed = 0\n  recordIndex = 0\n  frameIndex = 0\n  isFirstTimePlay = true\n  frameInterval: number\n  maxFrameInterval = 250\n  frames: number[]\n  maxFps = 30\n\n  initTime: number\n  startTime: number\n  animationDelayTime = 300\n  elapsedTime = 0\n  audioOffset = 150\n\n  curViewStartTime: number\n  curViewEndTime: number\n  curViewDiffTime = 0\n  preViewsDurationTime = 0\n  viewIndex = 0\n  viewsLength: number\n\n  subtitlesIndex = 0\n  audioData: AudioData\n  audioBlobUrl: string\n\n  videos: VideoData[]\n\n  RAF: AnimationFrame\n  isJumping: boolean\n  shouldWaitForSync: boolean\n\n  maxIntensityStep = 8\n\n  constructor(\n    options: ReplayInternalOptions,\n    c: ContainerComponent,\n    pointer: PointerComponent,\n    progress: ProgressComponent,\n    broadcaster: BroadcasterComponent\n  ) {\n    this.options = options\n    this.c = c\n    this.pointer = pointer\n    this.progress = progress\n    this.broadcaster = broadcaster\n    this.init()\n  }\n\n  @ConnectProps(state => ({\n    speed: state.player.speed\n  }))\n  private watchPlayerSpeed(state?: { speed: number }) {\n    if (state) {\n      const speed = state.speed\n      const curSpeed = this.speed\n      this.speed = speed\n\n      observer.emit(PlayerEventTypes.SPEED, speed)\n\n      if (speed > 0) {\n        this.play()\n        if (curSpeed === 0) {\n          observer.emit(PlayerEventTypes.PLAY)\n        }\n      } else {\n        this.pause()\n      }\n    }\n  }\n\n  @ConnectProps(state => ({\n    endTime: state.progress.endTime\n  }))\n  private watchProgress() {\n    this.recalculateProgress()\n    this.viewsLength = Store.getState().replayData.packs.length\n  }\n\n  private watcherProgressJump() {\n    observer.on(PlayerEventTypes.JUMP, async (state: { index: number; time: number; percent?: number }) =>\n      this.jump(state, true)\n    )\n  }\n\n  private async init() {\n    this.audioNode = new Audio()\n    this.calcFrames()\n    this.viewsLength = Store.getState().replayData.packs.length\n    this.initViewState()\n    this.setViewState()\n\n    if (this.records.length <= 2) {\n      // is live mode\n      window.addEventListener('record-data', this.streamHandle.bind(this))\n      this.options.destroyStore.add(() => window.removeEventListener('record-data', this.streamHandle.bind(this)))\n    } else {\n      this.watchProgress()\n      this.watchPlayerSpeed()\n      this.watcherProgressJump()\n    }\n\n    observer.on(PlayerEventTypes.RESIZE, async () => {\n      // wait for scaling page finish to get target offsetWidth\n      await delay(500)\n      this.recalculateProgress()\n    })\n\n    observer.on(PlayerEventTypes.PROGRESS, (frame: number) => {\n      const percent = frame / (this.frames.length - 1)\n      this.progress.setProgressPosition(percent)\n    })\n  }\n\n  private initAudio() {\n    if (!this.audioData) {\n      return\n    }\n\n    if (this.audioData.src) {\n      this.audioBlobUrl = location.href.split('/').slice(0, -1).join('/') + '/' + this.audioData.src\n    } else {\n      const { wavStrList, pcmStrList } = this.audioData\n\n      let type: 'wav' | 'pcm' | undefined = undefined\n      const list: string[] = []\n      if (wavStrList.length) {\n        type = 'wav'\n        list.push(...wavStrList)\n      } else if (pcmStrList.length) {\n        type = 'pcm'\n        list.push(...pcmStrList)\n      }\n\n      if (!type) {\n        return\n      }\n\n      const dataArray: Float32Array[] = []\n      for (let i = 0; i < list.length; i++) {\n        const data = base64ToFloat32Array(list[i])\n        dataArray.push(data)\n      }\n\n      const audioBlob =\n        type === 'wav' ? new Blob(dataArray, { type: 'audio/wav' }) : encodeWAV(dataArray, this.audioData.opts)\n      const audioBlobUrl = URL.createObjectURL(audioBlob)\n      this.audioBlobUrl = audioBlobUrl\n    }\n  }\n\n  private mountVideos() {\n    if (!this.videos || !this.videos.length) {\n      return\n    }\n\n    this.videos.forEach(video => {\n      const { src, id } = video\n      const videoElement = nodeStore.getNode(id)\n\n      if (videoElement) {\n        const target = videoElement as HTMLVideoElement\n        target.muted = true\n        target.autoplay = target.loop = target.controls = false\n        target.src = src\n      }\n    })\n  }\n\n  private streamHandle(this: PlayerComponent, e: CustomEvent) {\n    const record = e.detail as RecordData\n    if (isSnapshot(record)) {\n      Store.getState().replayData.currentData.snapshot = record as SnapshotRecord\n      this.setViewState()\n      return\n    }\n    this.execFrame(record as RecordData)\n  }\n\n  private initViewState() {\n    const { currentData } = Store.getState().replayData\n    const { records, audio, videos, head } = currentData\n    this.records = this.processing(records)\n    this.audioData = audio\n    this.videos = videos\n    const { userAgent } = head?.data || {}\n    if (isMobile(userAgent as string)) {\n      this.pointer.hidePointer()\n    }\n\n    // live mode\n    if (!this.records.length) {\n      return\n    }\n\n    this.subtitlesIndex = 0\n    this.broadcaster.cleanText()\n\n    this.curViewStartTime = (head && head.time) || records[0].time\n    this.curViewEndTime = records.slice(-1)[0].time\n\n    this.preViewsDurationTime = 0\n    this.curViewDiffTime = 0\n    this.viewIndex = 0\n  }\n\n  private setViewState() {\n    this.c.setViewState()\n    this.initAudio()\n    this.mountVideos()\n  }\n\n  private async jump(state: { index: number; time: number; percent?: number }, shouldLoading = false) {\n    this.isJumping = true\n    this.shouldWaitForSync = true\n    let loading: HTMLElement | undefined = undefined\n    const { speed } = Store.getState().player\n    const { index, time, percent } = state\n\n    if (shouldLoading) {\n      this.pause(false)\n      loading = parseHtmlStr(normalLoading)[0]\n      this.c.container.appendChild(loading)\n      await delay(100)\n    }\n\n    const nextReplayData = this.getNextReplayData(index)\n    if (!nextReplayData) {\n      return\n    }\n\n    this.initViewState()\n\n    if (this.viewIndex !== index || this.startTime >= time) {\n      const [{ packsInfo }, { packs }] = [Store.getState().progress, Store.getState().replayData]\n\n      const diffTime = packsInfo[index].diffTime\n      this.curViewEndTime = packs[index].slice(-1)[0].time\n      this.curViewDiffTime = diffTime\n      this.preViewsDurationTime = packsInfo.slice(0, index).reduce((a, b) => a + b.duration, 0)\n      this.viewIndex = index\n      this.records = packs[index]\n    }\n\n    const frameIndex =\n      1 +\n      this.frames.findIndex((t, i) => {\n        const cur = t\n        const next = this.frames[i + 1] || cur + 1\n        if (time >= cur && time <= next) {\n          return true\n        }\n      })\n\n    this.frameIndex = frameIndex\n    this.initTime = getTime()\n    this.recordIndex = 0\n    this.audioData = nextReplayData.audio\n    this.startTime = time\n    this.subtitlesIndex = 0\n\n    if (percent !== undefined) {\n      this.progress.moveThumb(percent)\n      await delay(100)\n    }\n\n    this.setViewState()\n    this.playAudio()\n    this.loopFramesByTime(this.frames[this.frameIndex])\n\n    if (loading) {\n      await delay(100)\n      this.c.container.removeChild(loading)\n      Store.dispatch({ type: PlayerReducerTypes.SPEED, data: { speed } })\n    }\n\n    this.isJumping = false\n    setTimeout(() => (this.shouldWaitForSync = false), 100)\n  }\n\n  private getNextReplayData(index: number): ReplayData | null {\n    const { packs } = Store.getState().replayData\n\n    const nextPack = packs[index]\n    if (nextPack) {\n      const nextData = transToReplayData(nextPack)\n      Store.dispatch({ type: ReplayDataReducerTypes.UPDATE_DATA, data: { currentData: nextData } })\n      return nextData\n    }\n    return null\n  }\n\n  private loopFramesByTime(currTime: number, isJumping = false) {\n    let nextTime = this.frames[this.frameIndex]\n\n    while (nextTime && currTime >= nextTime) {\n      if (!isJumping) {\n        observer.emit(PlayerEventTypes.PROGRESS, this.frameIndex, this.frames.length - 1)\n      }\n      this.frameIndex++\n      this.renderEachFrame()\n      nextTime = this.frames[this.frameIndex]\n    }\n    return nextTime\n  }\n\n  private play() {\n    if (this.frameIndex === 0) {\n      this.progress.moveThumb()\n      if (!this.isFirstTimePlay) {\n        this.getNextReplayData(0)\n        this.initViewState()\n        this.setViewState()\n      } else {\n        this.progress.drawHeatPoints()\n      }\n    }\n\n    this.playAudio()\n    this.isFirstTimePlay = false\n\n    if (this.RAF && this.RAF.requestID) {\n      this.RAF.stop()\n    }\n\n    this.RAF = new AnimationFrame(loop.bind(this), this.maxFps)\n    this.options.destroyStore.add(() => this.RAF.stop())\n    this.RAF.start()\n\n    this.initTime = getTime()\n    this.startTime = this.frames[this.frameIndex]\n\n    async function loop(this: PlayerComponent, t: number, loopIndex: number) {\n      const timeStamp = getTime() - this.initTime\n      if (this.frameIndex > 0 && this.frameIndex >= this.frames.length) {\n        this.stop()\n        return\n      }\n\n      const currTime = this.startTime + timeStamp * this.speed\n      const nextTime = this.loopFramesByTime(currTime)\n\n      if (nextTime > this.curViewEndTime - this.curViewDiffTime && this.viewIndex < this.viewsLength - 1) {\n        const { packsInfo } = Store.getState().progress\n        const index = this.viewIndex + 1\n        const { startTime, diffTime } = packsInfo[index]\n        this.jump({ index: index, time: startTime - diffTime })\n      }\n\n      this.elapsedTime = (currTime - this.frames[0]) / 1000\n\n      this.syncAudio()\n      this.syncVideos()\n    }\n  }\n\n  private playAudio() {\n    if (!this.audioData) {\n      return\n    }\n    if (!this.audioBlobUrl) {\n      this.pauseAudio()\n      return\n    }\n\n    if (this.audioNode) {\n      if (!this.audioNode.src || this.audioNode.src !== this.audioBlobUrl) {\n        this.audioNode.src = this.audioBlobUrl\n      }\n\n      this.syncAudioTargetNode()\n\n      if (this.speed > 0) {\n        this.audioNode.play()\n      }\n    }\n  }\n\n  private syncAudio() {\n    if (!this.audioNode) {\n      return\n    }\n    const targetCurrentTime = this.audioNode.currentTime\n    const targetExpectTime = this.elapsedTime - this.preViewsDurationTime / 1000\n    const diffTime = Math.abs(targetExpectTime - targetCurrentTime)\n    const allowDiff = (100 + this.audioOffset) / 1000\n    if (diffTime > allowDiff) {\n      this.syncAudioTargetNode()\n    }\n  }\n\n  private syncAudioTargetNode() {\n    const elapsedTime = this.elapsedTime - this.preViewsDurationTime / 1000\n    const offset = this.audioOffset / 1000\n    this.audioNode.currentTime = elapsedTime + offset\n  }\n\n  private syncVideos() {\n    const initTime = this.curViewStartTime\n    const currentTime = initTime + (this.elapsedTime * 1000 - this.preViewsDurationTime)\n    const allowDiff = 100\n\n    this.videos.forEach(video => {\n      const { startTime, endTime, id } = video\n      const target = nodeStore.getNode(id) as HTMLVideoElement\n\n      if (!target) {\n        return\n      }\n\n      if (currentTime >= startTime && currentTime < endTime) {\n        if (target.paused && this.speed > 0) {\n          target.play()\n        }\n\n        const targetCurrentTime = target.currentTime\n        const targetExpectTime =\n          this.elapsedTime - this.preViewsDurationTime / 1000 - (startTime - initTime) / 1000\n\n        const diffTime = Math.abs(targetExpectTime - targetCurrentTime)\n        if (diffTime > allowDiff / 1000) {\n          target.currentTime = targetExpectTime\n        }\n      } else {\n        if (!target.paused) {\n          target.pause()\n        }\n      }\n    })\n  }\n\n  private pauseAudio() {\n    if (this.audioNode) {\n      this.audioNode.pause()\n    }\n  }\n\n  private pauseVideos() {\n    if (this.videos && this.videos.length) {\n      this.videos.forEach(video => {\n        const target = nodeStore.getNode(video.id) as HTMLVideoElement | undefined\n        if (target) {\n          target.pause()\n        }\n      })\n    }\n  }\n\n  private renderEachFrame() {\n    this.progress.updateTimer(this.frameIndex, this.frameInterval, this.curViewDiffTime)\n\n    let data: RecordData\n    while (\n      this.recordIndex < this.records.length &&\n      (data = this.records[this.recordIndex]).time - this.curViewDiffTime <= this.frames[this.frameIndex]\n    ) {\n      this.execFrame(data)\n      this.recordIndex++\n    }\n\n    this.syncSubtitles()\n  }\n\n  private async syncSubtitles() {\n    if (this.shouldWaitForSync) {\n      return\n    }\n\n    if (this.audioData && this.audioData.subtitles.length) {\n      const subtitles = this.audioData.subtitles\n      let { text } = subtitles[this.subtitlesIndex]\n      const { end } = subtitles[this.subtitlesIndex]\n      const audioEndTime = toTimeStamp(end)\n\n      if (this.elapsedTime > audioEndTime / 1000) {\n        this.broadcaster.cleanText()\n        if (this.subtitlesIndex < subtitles.length - 1) {\n          while (true) {\n            const nextEndTime = toTimeStamp(subtitles[this.subtitlesIndex].end)\n            if (nextEndTime / 1000 > this.elapsedTime) {\n              break\n            }\n            this.subtitlesIndex++\n          }\n          text = subtitles[this.subtitlesIndex].text\n        }\n      }\n      this.broadcaster.updateText(text)\n    }\n  }\n\n  private pause(emit = true) {\n    if (this.RAF) {\n      this.RAF.stop()\n    }\n    Store.dispatch({\n      type: PlayerReducerTypes.SPEED,\n      data: {\n        speed: 0\n      }\n    })\n    this.pauseAudio()\n    this.pauseVideos()\n    if (emit) {\n      observer.emit(PlayerEventTypes.PAUSE)\n    }\n  }\n\n  private stop() {\n    this.speed = 0\n    this.recordIndex = 0\n    this.frameIndex = 0\n    this.elapsedTime = 0 // unit: sec\n    this.pause()\n    this.audioNode.currentTime = 0\n    observer.emit(PlayerEventTypes.STOP)\n  }\n\n  private execFrame(record: RecordData) {\n    const { isJumping, speed } = this\n    renderAll.call(this, record, { isJumping, speed })\n  }\n\n  private calcFrames(maxInterval = this.maxFrameInterval) {\n    if (this.options.mode === 'live') {\n      return []\n    }\n    const preTime = this.frames && this.frames[this.frameIndex]\n    const { duration, startTime, endTime } = Store.getState().progress\n    this.frameInterval = Math.max(20, Math.min(maxInterval, (duration / 60 / 1000) * 60 - 40))\n    const interval = this.frameInterval\n    const frames: number[] = []\n    let nextFrameIndex: number | undefined\n    for (let i = startTime; i < endTime + interval; i += interval) {\n      frames.push(i)\n      if (!nextFrameIndex && preTime && i >= preTime) {\n        nextFrameIndex = frames.length - 1\n      }\n    }\n    frames.push(endTime)\n    if (nextFrameIndex) {\n      this.frameIndex = nextFrameIndex!\n    }\n    this.frames = frames\n  }\n\n  private calcHeatPointsData() {\n    const frames = this.frames\n    if (!frames.length || !this.options.heatPoints) {\n      return []\n    }\n    const state = Store.getState()\n    const { packs } = state.replayData\n    const { duration } = state.progress\n    const sliderWidth = this.progress.slider.offsetWidth\n    const column = Math.floor(sliderWidth / 7)\n    const gap = duration / column\n\n    const heatPoints = packs.reduce((acc, records) => {\n      let index = 0\n      let step = 0\n      let snapshot = false\n\n      const endTime = records.slice(-1)[0].time\n      let currentTime = records[0].time\n\n      while (currentTime < endTime && index < records.length) {\n        const nextTime = currentTime + gap\n        const record = records[index]\n        if (record.time < nextTime) {\n          index++\n          step++\n          if (isSnapshot(record)) {\n            snapshot = true\n          }\n          continue\n        }\n        acc.push({ step, snapshot })\n        step = 0\n        snapshot = false\n        currentTime += gap\n      }\n\n      return acc\n    }, [] as { step: number; snapshot: boolean }[])\n\n    return heatPoints\n  }\n\n  private orderRecords(records: RecordData[]) {\n    if (!records.length) {\n      return []\n    }\n\n    records.sort((a: RecordData, b: RecordData) => {\n      return a.time - b.time\n    })\n\n    return records\n  }\n\n  private recalculateProgress() {\n    this.calcFrames()\n    this.progress.drawHeatPoints(this.calcHeatPointsData())\n  }\n\n  private processing(records: RecordData[]) {\n    return this.orderRecords(records)\n  }\n}\n","\nimport { setAttribute } from '../../virtual-dom'\nimport { delay } from '../../utils'\nimport { ContainerComponent } from './container'\nimport { Component, html, IComponent } from '../utils'\n\n@Component(\n    'player-pointer',\n    html`<div class=\"player-pointer\">\n        <img\n            src=\"data:image/png;base64,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\"\n            alt=\"pointer\"\n        />\n        <div class=\"spinner\"></div>\n    </div>`\n)\nexport class PointerComponent implements IComponent {\n    public parent: HTMLElement\n    public target: HTMLElement\n\n    private x = 0\n    private y = 0\n\n    private show: boolean\n    private pointer: HTMLElement\n    private c: ContainerComponent\n    constructor(c: ContainerComponent) {\n        this.c = c\n        this.initPointer()\n        this.togglePointer(true)\n    }\n\n    private initPointer() {\n        this.pointer = this.c.container.querySelector('.player-pointer') as HTMLElement\n    }\n\n    private togglePointer(show = !this.show) {\n        this.show = show\n        ;(this.pointer.firstElementChild as HTMLElement).style.display = this.show ? 'inherit' : 'none'\n    }\n\n    public hidePointer() {\n        this.togglePointer((this.show = false))\n    }\n\n    public move(x: number, y: number) {\n        this.x = x\n        this.y = y\n        this.pointer.style.left = this.x + 'px'\n        this.pointer.style.top = this.y + 'px'\n    }\n\n    public async click(x: number, y: number) {\n        this.move(x, y)\n        if (this.pointer.hasAttribute('active')) {\n            return\n        }\n        await delay(200)\n        setAttribute(this.pointer, 'active', '')\n        await delay(400)\n        setAttribute(this.pointer, 'active', null)\n    }\n}\n","\nimport { secondToTime, getDateTime, stateDebounce } from '../../utils'\nimport { ContainerComponent } from './container'\nimport { PlayerEventTypes } from '../types'\nimport { Pillar, NormalLine, observer, Store, Component, IComponent, html } from '../utils'\nimport { ReplayInternalOptions } from '../../types'\n\n@Component(\n  'player-progress',\n  html`<div class=\"player-progress\">\n        <div class=\"player-timer\">00:00</div>\n        <div class=\"player-slider-bar\">\n            <div class=\"player-heat-bar-container\">\n                <canvas class=\"player-heat-bar\"></canvas>\n            </div>\n            <div class=\"player-current-progress\">\n                <div class=\"player-thumb\"></div>\n            </div>\n        </div>\n    </div>`\n)\nexport class ProgressComponent implements IComponent {\n  target: HTMLElement\n  parent: HTMLElement\n  c: ContainerComponent\n  progress: HTMLElement\n  thumb: HTMLElement\n  currentProgress: HTMLElement\n  timer: HTMLElement\n  slider: HTMLElement\n  heatBar: HTMLCanvasElement\n  heatPoints: { step: number; snapshot: boolean }[] = []\n  options: ReplayInternalOptions\n\n  constructor(options: ReplayInternalOptions, c: ContainerComponent) {\n    this.options = options\n    this.c = c\n    this.progress = c.container.querySelector('.player-progress')! as HTMLElement\n    this.progress = c.container.querySelector('.player-progress')! as HTMLElement\n    this.timer = c.container.querySelector('.player-timer') as HTMLElement\n    this.currentProgress = this.progress.querySelector('.player-current-progress') as HTMLElement\n    this.slider = this.progress.querySelector('.player-slider-bar') as HTMLElement\n    this.heatBar = this.progress.querySelector('.player-heat-bar') as HTMLCanvasElement\n    this.thumb = this.progress.querySelector('.player-thumb') as HTMLElement\n    this.listenElementOnHover(this.parent)(state => {\n      if (state === 'in') {\n        this.thumb.setAttribute('active', '')\n        return\n      }\n      this.thumb.removeAttribute('active')\n    })\n\n    const handle = (e: MouseEvent) => {\n      const { left, width: sliderWidth } = this.slider.getBoundingClientRect()\n      const width = Math.max(0, Math.min(e.x - left, sliderWidth))\n      const percent = +(width / sliderWidth).toFixed(3)\n      const progress = this.findProgressByPosition(percent)\n      observer.emit(PlayerEventTypes.JUMP, progress)\n    }\n    this.progress.addEventListener('click', handle, false)\n    this.options.destroyStore.add(() => {\n      this.progress.removeEventListener('click', handle, false)\n    })\n  }\n\n  private findProgressByPosition = (() => {\n    const cacheMap = new Map() as Map<number, { index: number; percent: number; time: number }>\n    return function (percent: number) {\n      const result = cacheMap.get(percent)\n      if (result) {\n        return result\n      }\n      const { startTime, duration, packsInfo } = Store.getState().progress\n      const { packs } = Store.getState().replayData\n      const time = startTime + duration * percent\n\n      const index = packsInfo.findIndex(pack => {\n        const { startTime, endTime, diffTime } = pack\n        if (startTime - diffTime <= time && endTime - diffTime >= time) {\n          return true\n        }\n      })\n\n      if (index !== undefined) {\n        const records = packs[index]\n        const packInfo = packsInfo[index]\n        const { startTime, diffTime } = packInfo\n        const totalDurationTime = packsInfo.reduce((acc, info) => acc + info.duration, 0)\n        const beforeDurationTime = packsInfo.slice(0, index).reduce((acc, info) => acc + info.duration, 0)\n        for (let i = 0; i < records.length; i++) {\n          const cur = records[i]\n          const next = records[i + 1]\n          if (next) {\n            if (time >= cur.time - diffTime && time <= next.time - diffTime) {\n              // revise position between two records\n              const reviseTime = totalDurationTime * percent - (cur.time - startTime) - beforeDurationTime\n              const time = cur.time - diffTime + reviseTime\n              const data = { index, percent, time }\n              cacheMap.set(percent, data)\n              return data\n            }\n          }\n        }\n      }\n      return null\n    }\n  })()\n\n  private listenElementOnHover = (target: HTMLElement) =>\n    stateDebounce<'in' | 'out'>(\n      setState => {\n        const stateIn = () => setState('in')\n        const stateOut = () => setState('out')\n        target.addEventListener('mouseover', stateIn, false)\n        target.addEventListener('mouseout', stateOut, false)\n        this.options.destroyStore.add(() => {\n          target.removeEventListener('mouseover', stateIn, false)\n          target.removeEventListener('mouseout', stateOut, false)\n        })\n      },\n      state => (state === 'in' ? 200 : 1000),\n      'out'\n    )\n\n  public updateTimer(frameIndex: number, frameInterval: number, curViewDiffTime: number) {\n    const c = this.c.options\n    const { timeMode } = c\n    const seconds = (frameIndex + 1) * frameInterval\n\n    let time\n    if (timeMode === 'durationTime') {\n      time = secondToTime(seconds / 1000)\n    } else {\n      const { startTime } = Store.getState().progress\n      const timestamp = startTime + seconds + curViewDiffTime\n      time = getDateTime(timestamp)\n    }\n    if (time !== this.timer.innerText) {\n      this.timer.innerText = time\n    }\n  }\n\n  public moveThumb(percent = 0) {\n    const left = percent * this.slider.offsetWidth\n    this.currentProgress.style.width = left + 'px'\n  }\n\n  public drawHeatPoints(points?: { step: number; snapshot: boolean }[]) {\n    if (points) {\n      if (isPointsEqual(this.heatPoints, points)) {\n        return\n      }\n      this.heatPoints = points\n    } else if (this.heatPoints.length) {\n      return\n    }\n\n    if (this.heatPoints.length) {\n      new Pillar(this.heatBar, this.heatPoints)\n    } else {\n      new NormalLine(this.heatBar)\n    }\n\n    function isPointsEqual(a: { step: number; snapshot: boolean }[], b: { step: number; snapshot: boolean }[]) {\n      if (a.length !== b.length) {\n        return false\n      }\n\n      for (let i = 0; i < a.length; i++) {\n        const itemA = a[i]\n        const itemB = b[i]\n        if (itemA.step !== itemB.step || itemA.snapshot !== itemB.snapshot) {\n          return false\n        }\n      }\n      return true\n    }\n  }\n\n  public setProgressPosition(percent: number) {\n    this.currentProgress.style.width = this.slider.offsetWidth * percent + 'px'\n  }\n}\n","\nimport { ContainerComponent } from './container'\nimport { Component, html, IComponent } from '../utils'\n\n@Component(\n    'player-broadcaster',\n    html`<div class=\"player-broadcaster\">\n        <div class=\"float-layer\" hidden>\n            <span class=\"subtitle\"></span>\n        </div>\n    </div>`\n)\nexport class BroadcasterComponent implements IComponent {\n    parent: HTMLElement\n    target: HTMLElement\n    broadcaster: HTMLElement\n    floatLayer: HTMLElement\n    subtitle: HTMLElement\n    c: ContainerComponent\n    constructor(container: ContainerComponent) {\n        this.c = container\n        this.init()\n    }\n\n    private init() {\n        this.broadcaster = this.c.container.querySelector('.player-broadcaster') as HTMLElement\n        this.floatLayer = this.broadcaster.firstElementChild as HTMLElement\n        this.subtitle = this.floatLayer.firstElementChild as HTMLElement\n    }\n\n    public updateText(text: string) {\n        text = text.trim()\n        if (this.subtitle.innerText.trim() === text) {\n            return\n        }\n\n        this.subtitle.innerText = text\n        this.floatLayer.toggleAttribute('hidden', !text)\n    }\n\n    public cleanText() {\n        this.updateText('')\n    }\n}\n","\nimport { Component, html, Store, IComponent } from '../utils'\nimport { ContainerComponent } from './container'\nimport { getRawScriptContent, logAdvice, logError } from '../../utils'\nimport { ReplayInternalOptions } from '../../types'\n\n@Component(\n    'player-toolbox',\n    html`<div class=\"player-toolbox\">\n        <div class=\"player-export\">\n            <button type=\"button\">\n                <svg\n                    version=\"1.1\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                    x=\"0px\"\n                    y=\"0px\"\n                    width=\"16px\"\n                    height=\"16px\"\n                    viewBox=\"0 0 511.994 511.994\"\n                    style=\"enable-background:new 0 0 511.994 511.994;\"\n                    xml:space=\"preserve\"\n                >\n                    <path\n                        style=\"fill:#fff;\"\n                        d=\"M403.079,310.458c-3.627-7.232-11.008-11.797-19.093-11.797h-64v-85.333c0-11.776-9.536-21.333-21.333-21.333H213.32\n            c-11.776,0-21.333,9.557-21.333,21.333v85.333h-64c-8.064,0-15.445,4.565-19.072,11.797c-3.605,7.232-2.837,15.872,2.027,22.336\n            l128,170.667c4.011,5.376,10.347,8.533,17.045,8.533c6.72,0,13.056-3.157,17.067-8.533l128-170.667\n            C405.917,326.33,406.685,317.69,403.079,310.458z\"\n                    />\n                    <path\n                        style=\"fill:#fff;\"\n                        d=\"M298.663,128.001H213.33c-11.797,0-21.333,9.536-21.333,21.333c0,11.797,9.536,21.333,21.333,21.333h85.333\n                        c11.797,0,21.333-9.536,21.333-21.333C319.996,137.537,310.46,128.001,298.663,128.001z\"\n                    />\n                    <path\n                        style=\"fill:#fff;\"\n                        d=\"M298.663,64.001H213.33c-11.797,0-21.333,9.536-21.333,21.333s9.536,21.333,21.333,21.333h85.333\n                        c11.797,0,21.333-9.536,21.333-21.333S310.46,64.001,298.663,64.001z\"\n                    />\n                </svg>\n            </button>\n        </div>\n        <div class=\"player-fullscreen\">\n            <svg\n                version=\"1.1\"\n                id=\"Capa_1\"\n                width=\"16px\"\n                height=\"16px\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                x=\"0px\"\n                y=\"0px\"\n                viewBox=\"0 0 469.333 469.333\"\n                style=\"enable-background:new 0 0 469.333 469.333;\"\n                xml:space=\"preserve\"\n            >\n                <path\n                    style=\"fill:#fff;\"\n                    d=\"M160,0H10.667C4.771,0,0,4.771,0,10.667V160c0,5.896,4.771,10.667,10.667,10.667H32c5.896,0,10.667-4.771,10.667-10.667\n                V42.667H160c5.896,0,10.667-4.771,10.667-10.667V10.667C170.667,4.771,165.896,0,160,0z\"\n                />\n                <path\n                    style=\"fill:#fff;\"\n                    d=\"M458.667,0H309.333c-5.896,0-10.667,4.771-10.667,10.667V32c0,5.896,4.771,10.667,10.667,10.667h117.333V160\n                c0,5.896,4.771,10.667,10.667,10.667h21.333c5.896,0,10.667-4.771,10.667-10.667V10.667C469.333,4.771,464.563,0,458.667,0z\"\n                />\n                <path\n                    style=\"fill:#fff;\"\n                    d=\"M458.667,298.667h-21.333c-5.896,0-10.667,4.771-10.667,10.667v117.333H309.333c-5.896,0-10.667,4.771-10.667,10.667\n                v21.333c0,5.896,4.771,10.667,10.667,10.667h149.333c5.896,0,10.667-4.771,10.667-10.667V309.333\n                C469.333,303.437,464.563,298.667,458.667,298.667z\"\n                />\n                <path\n                    style=\"fill:#fff;\"\n                    d=\"M160,426.667H42.667V309.333c0-5.896-4.771-10.667-10.667-10.667H10.667C4.771,298.667,0,303.437,0,309.333v149.333\n                c0,5.896,4.771,10.667,10.667,10.667H160c5.896,0,10.667-4.771,10.667-10.667v-21.333\n                C170.667,431.438,165.896,426.667,160,426.667z\"\n                />\n            </svg>\n        </div>\n    </div>`\n)\nexport class ToolboxComponent implements IComponent {\n    parent: HTMLElement\n    target: HTMLElement\n    c: ContainerComponent\n    exportBtn: HTMLElement\n    fullscreenBtn: HTMLElement\n    fullscreenTarget: HTMLElement\n    options: ReplayInternalOptions\n    constructor(options: ReplayInternalOptions, c: ContainerComponent) {\n        this.options = options\n        this.c = c\n        this.exportBtn = this.target.querySelector('.player-export') as HTMLButtonElement\n        this.exportBtn.addEventListener('click', this.export)\n\n        this.fullscreenBtn = this.target.querySelector('.player-fullscreen') as HTMLButtonElement\n        this.fullscreenTarget = (this.c.container.parentNode as ShadowRoot).host.parentElement!\n\n        this.fullscreenTarget.addEventListener('fullscreenchange', () => this.cancelFullScreen())\n        this.fullscreenBtn.addEventListener('click', () => this.setFullScreen())\n\n        this.options.destroyStore.add(() => {\n            this.exportBtn.removeEventListener('click', this.export)\n            this.fullscreenTarget.removeEventListener('fullscreenchange', () => this.cancelFullScreen())\n            this.fullscreenBtn.removeEventListener('click', () => this.setFullScreen())\n        })\n    }\n\n    public async export() {\n        \n    }\n\n    private setFullScreen() {\n        this.c.resize({ maxScale: 100 })\n        this.fullscreenTarget.requestFullscreen().catch(msg => {\n            logError(msg)\n            logAdvice('If the Player within the iframe, you should be set the attribute: allowfullscreen')\n        })\n    }\n\n    private cancelFullScreen() {\n        if (document.fullscreen) {\n            return\n        }\n        this.c.resize({ maxScale: 0 })\n    }\n}\n","\nimport { KeyboardComponent } from './keyboard'\nimport { PlayerComponent } from './player'\nimport { PointerComponent } from './pointer'\nimport { ProgressComponent } from './progress'\nimport { ContainerComponent } from './container'\nimport { BroadcasterComponent } from './broadcaster'\nimport { ReplayInternalOptions } from '../../types'\nimport { Component, IComponent, html } from '../utils'\nimport { ToolboxComponent } from './toolbox'\n\n@Component(\n    'player-panel',\n    html`<div class=\"player-panel\">\n        <slot></slot>\n    </div>`\n)\nexport class PanelComponent implements IComponent {\n    target: HTMLElement\n    parent: HTMLElement\n    keyboard: KeyboardComponent\n    progress: ProgressComponent\n    pointer: PointerComponent\n    player: PlayerComponent\n    broadcaster: BroadcasterComponent\n    c: ContainerComponent\n    options: ReplayInternalOptions\n\n    constructor(c: ContainerComponent) {\n        this.c = c\n        this.options = c.options\n        this.initComponent()\n    }\n\n    private initComponent() {\n        new ToolboxComponent(this.options, this.c)\n        this.keyboard = new KeyboardComponent(this.options, this.c)\n        this.progress = new ProgressComponent(this.options, this.c)\n        this.pointer = new PointerComponent(this.c)\n        this.broadcaster = new BroadcasterComponent(this.c)\n        this.player = new PlayerComponent(this.options, this.c, this.pointer, this.progress, this.broadcaster)\n    }\n}\n","\nimport { html, Component } from '../utils'\n\n@Component(\n    'player-start-page',\n    html`<div class=\"player-start-page\" style=\"display: none;\">\n        <div class=\"play-btn\">\n            <svg\n                version=\"1.1\"\n                id=\"Capa_1\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                x=\"0px\"\n                y=\"0px\"\n                viewBox=\"0 0 142.448 142.448\"\n                style=\"enable-background:new 0 0 142.448 142.448;\"\n                xml:space=\"preserve\"\n            >\n                <g>\n                    <path\n                        style=\"fill:#bbb;\"\n                        d=\"M142.411,68.9C141.216,31.48,110.968,1.233,73.549,0.038c-20.361-0.646-39.41,7.104-53.488,21.639\n        C6.527,35.65-0.584,54.071,0.038,73.549c1.194,37.419,31.442,67.667,68.861,68.861c0.779,0.025,1.551,0.037,2.325,0.037\n        c19.454,0,37.624-7.698,51.163-21.676C135.921,106.799,143.033,88.377,142.411,68.9z M111.613,110.336\n        c-10.688,11.035-25.032,17.112-40.389,17.112c-0.614,0-1.228-0.01-1.847-0.029c-29.532-0.943-53.404-24.815-54.348-54.348\n        c-0.491-15.382,5.122-29.928,15.806-40.958c10.688-11.035,25.032-17.112,40.389-17.112c0.614,0,1.228,0.01,1.847,0.029\n        c29.532,0.943,53.404,24.815,54.348,54.348C127.91,84.76,122.296,99.306,111.613,110.336z\"\n                    />\n                    <path\n                        style=\"fill:#bbb;\"\n                        d=\"M94.585,67.086L63.001,44.44c-3.369-2.416-8.059-0.008-8.059,4.138v45.293\n        c0,4.146,4.69,6.554,8.059,4.138l31.583-22.647C97.418,73.331,97.418,69.118,94.585,67.086z\"\n                    />\n                </g>\n            </svg>\n        </div>\n    </div>`\n)\nexport class PageStartComponent {\n    constructor() {\n        setTimeout(() => {}) // do any thing prevent tree-shake\n    }\n}\n","\nimport { nodeStore, debounce, createURL } from '../../utils'\nimport smoothScroll from 'smoothscroll-polyfill'\nimport { ReplayInternalOptions, VNode, InfoData } from '../../types'\nimport { observer, Store, disableScrolling, parseHtmlStr, html, createIframeDOM, injectIframeContent } from '../utils'\nimport { PlayerEventTypes } from '../types'\nimport { PanelComponent } from './panel'\nimport { PageStartComponent } from './page-start'\n\nimport HTML from '../ui.html' // @ts-nocheck @ts-ignore\nimport CSS from '../ui.scss' // @ts-nocheck @ts-ignore\n\nexport class ContainerComponent {\n    panel: PanelComponent\n    container: HTMLElement\n    sandBox: HTMLIFrameElement\n    sandBoxDoc: Document\n    resize: (options?: Partial<{ setWidth: number; setHeight: number; maxScale: number }>) => void\n    options: ReplayInternalOptions\n    target: Element | Window\n    shadowHost: HTMLElement\n\n    constructor(options: ReplayInternalOptions) {\n        this.options = options\n        this.init()\n    }\n\n    private init() {\n        const target = this.options.target\n        const targetElement = typeof target === 'string' ? document.querySelector(target) : target\n        this.target = targetElement as HTMLElement\n        this.initTemplate()\n        this.initSandbox()\n        const { resize } = this.makeItResponsive()\n        this.resize = resize\n        this.initPanel()\n    }\n\n    private initPanel() {\n        this.panel = new PanelComponent(this)\n        new PageStartComponent()\n    }\n\n    private initSandbox() {\n        this.sandBox = this.container.querySelector('.player-sandbox') as HTMLIFrameElement\n        this.sandBoxDoc = this.sandBox.contentDocument!\n        this.setSmoothScroll(this.sandBox.contentWindow!)\n        createIframeDOM(this.sandBoxDoc, this.getSnapshotRecord())\n        if (this.options.disableScrolling) {\n            disableScrolling(this.sandBox.contentWindow!.document)\n        }\n        this.setViewState()\n    }\n\n    private getSnapshotRecord() {\n        return Store.getState().replayData.currentData.snapshot.data as {\n            vNode: VNode\n        } & InfoData\n    }\n\n    // use scroll polyfill if browser (e.g. ios safari) not support\n    private setSmoothScroll(context: Window) {\n        smoothScroll.polyfill()\n        context.HTMLElement.prototype.scroll = window.scroll\n        context.HTMLElement.prototype.scrollTo = window.scrollTo\n    }\n\n    public setViewState() {\n        nodeStore.reset()\n        const recordData = this.getSnapshotRecord()\n        const { pathname, hash, href } = createURL(recordData.href) as URL\n        const doc = this.sandBoxDoc\n        const context = doc.defaultView as Window\n        context.G_REPLAY_LOCATION = { ...(context.G_REPLAY_LOCATION || {}), ...{ path: pathname, hash, href } }\n        injectIframeContent(this.sandBoxDoc, recordData)\n    }\n\n    private initTemplate() {\n        const targetElement: HTMLElement =\n            this.target instanceof Window ? (this.target as Window).document.body : (this.target as HTMLElement)\n\n        const shadowHost = parseHtmlStr(html`<div class=\"player-shadowhost\"></div>`)[0]\n        targetElement.appendChild(shadowHost)\n\n        const shadow = shadowHost.attachShadow({ mode: 'open' })\n        shadow.appendChild(this.createStyle('player-css', CSS))\n        shadow.appendChild(this.createContainer('player-main', HTML))\n        this.shadowHost = shadowHost\n    }\n\n    private createContainer(className: string, html: string) {\n        const parser = new DOMParser()\n        const el = parser.parseFromString(html, 'text/html').body.firstChild as HTMLElement\n        el.className = className\n        el.style.width = this.getSnapshotRecord().width + 'px'\n        el.style.height = this.getSnapshotRecord().height + 'px'\n        el.style.display = 'none'\n        return (this.container = el)\n    }\n\n    private makeItResponsive() {\n        const self = this\n        const debounceResizeFn = debounce(resizeHandle, 500)\n\n        const callbackFn = () => debounceResizeFn({ target: self.target as EventTarget } as Event)\n        window.addEventListener('resize', callbackFn, true)\n\n        this.options.destroyStore.add(() => window.removeEventListener('resize', callbackFn, true))\n\n        setTimeout(() => (this.container.style.opacity = '1'))\n        this.container.style.display = 'block'\n\n        let lockScale = 0\n\n        triggerResize()\n\n        function triggerResize(options?: Partial<{ setWidth: number; setHeight: number; maxScale: number }>) {\n            const { setHeight, setWidth, maxScale } = options || {}\n            resizeHandle(({ target: self.target } as unknown) as Event, setWidth, setHeight, maxScale)\n        }\n\n        async function resizeHandle(e?: Event, setWidth?: number, setHeight?: number, maxScale = 1) {\n            if (!e) {\n                return\n            }\n            const { width: targetWidth, height: targetHeight } = getPageSize(self.container)\n\n            setWidth = setWidth || targetWidth\n            setHeight = setHeight || targetHeight\n\n            switch (maxScale) {\n                case 0:\n                    lockScale = 0\n                    break\n                case 100:\n                    lockScale = 100\n                    break\n            }\n\n            const setMaxScale = lockScale || maxScale\n\n            if (e.target instanceof Window) {\n                const { innerWidth: w, innerHeight: h } = e.target\n                scalePages(self.container, w, h, setWidth, setHeight, setMaxScale)\n            } else {\n                const { offsetWidth: w, offsetHeight: h } = e.target as HTMLElement\n                scalePages(self.container, w, h, setWidth, setHeight, setMaxScale)\n            }\n        }\n\n        function scalePages(\n            target: HTMLElement,\n            maxWidth: number,\n            maxHeight: number,\n            setWidth: number,\n            setHeight: number,\n            setMaxScale: number\n        ) {\n            const { mode: replayMode } = Store.getState().player.options || {}\n\n            const panelHeight = replayMode === 'live' ? 0 : 40 - 2 // subtract the gap\n\n            const scaleX = maxWidth / setWidth\n            const scaleY = maxHeight / (setHeight + panelHeight)\n\n            // limit scale\n            const scale = Math.min(scaleX > scaleY ? scaleY : scaleX, setMaxScale || 1)\n\n            const left = (setWidth * scale - setWidth) / 2 + (maxWidth - setWidth * scale) / 2\n\n            const top = (maxHeight - setHeight - panelHeight * scale) / 2\n\n            target.style.transform = `scale(${scale})`\n            target.style.left = left + 'px'\n            target.style.top = top + 'px'\n\n            const currentWidth = parseInt(target.style.width)\n            const currentHeight = parseInt(target.style.height)\n\n            if (setWidth !== currentWidth || setHeight !== currentHeight) {\n                target.style.width = setWidth + 'px'\n                target.style.height = setHeight + 'px'\n                observer.emit(PlayerEventTypes.RESIZE)\n            }\n        }\n\n        function getPageSize(target: HTMLElement) {\n            return {\n                width: parseInt(target.style.width, 10),\n                height: parseInt(target.style.height, 10)\n            }\n        }\n\n        return {\n            resize: triggerResize\n        }\n    }\n\n    private createStyle(id: string, s: string) {\n        const style = document.createElement('style')\n        style.id = id\n        style.innerHTML = s\n        return style\n    }\n}\n","\nimport {\n  logError,\n  nodeStore,\n  debounce,\n  logInfo,\n  isDev,\n  removeGlobalVariables,\n  delay,\n  tempEmptyFn\n} from '../utils'\nimport { ContainerComponent } from './components/container'\nimport {\n  SnapshotRecord,\n  ReplayOptions,\n  RecordData,\n  RecordType,\n  ReplayInternalOptions,\n  HeadRecord\n} from '../types'\nimport { waitStart, removeStartPage, showStartMask } from './utils'\nimport { PlayerEventTypes } from './types'\nimport {\n  FMP,\n  observer,\n  Store,\n  PlayerReducerTypes,\n  ProgressReducerTypes,\n  ReplayDataReducerTypes,\n  transToReplayData,\n} from './utils'\nimport { getPacks } from './utils/transform'\n\nconst defaultReplayOptions = {\n  autoplay: true,\n  mode: 'default',\n  target: window,\n  heatPoints: true,\n  timeMode: 'durationTime',\n  fastForward: [2, 8],\n  disableScrolling: true\n}\n\nexport class Player {\n  on: (key: PlayerEventTypes, fn: Function) => void = tempEmptyFn\n  destroy: () => void = tempEmptyFn\n  append: (records: RecordData[]) => void = tempEmptyFn\n  constructor(options?: ReplayOptions) {\n    const player = new PlayerModule(options)\n    Object.keys(this).forEach((key: keyof Player) => (this[key] = player[key].bind(player)))\n  }\n}\n\nexport class PlayerModule {\n  c: ContainerComponent\n  fmp: FMP\n  destroyStore = new Set<Function>()\n  options: ReplayInternalOptions\n  constructor(options?: ReplayOptions) {\n    nodeStore.reset()\n    this.init(options)\n  }\n\n  private async init(options?: ReplayOptions) {\n    if (!isDev) {\n      logInfo()\n    }\n    const opts = {\n      destroyStore: this.destroyStore,\n      ...defaultReplayOptions,\n      ...options\n    } as ReplayInternalOptions\n\n    this.options = opts\n    Store.dispatch({ type: PlayerReducerTypes.OPTIONS, data: { options: opts } })\n    this.destroyStore.add(() => Store.unsubscribe())\n\n    const records = await this.getRecords(opts)\n    const packs = getPacks(records)\n    const firstData = transToReplayData(packs[0])\n    // console.log(firstData);\n    const { audio } = firstData\n    Store.dispatch({\n      type: ReplayDataReducerTypes.UPDATE_DATA,\n      data: { records, packs, currentData: firstData }\n    })\n\n    const hasAudio = audio && (audio.src || audio.wavStrList.length || audio.pcmStrList.length);\n\n    this.c = new ContainerComponent(opts)\n    const container = this.c.container\n    showStartMask(this.c);\n    (this.fmp = new FMP()).ready(async () => {\n      if (hasAudio) {\n        await waitStart(container)\n      }\n      removeStartPage(container)\n      if (records.length && opts.autoplay) {\n        Store.dispatch({\n          type: PlayerReducerTypes.SPEED,\n          data: { speed: 1 }\n        })\n      }\n    });\n    // console.log('packs', packs);\n    if (packs.length) {\n      this.calcProgress()\n    }\n\n    if (records.length <= 2) {\n      // live mode\n      Store.dispatch({ type: PlayerReducerTypes.OPTIONS, data: { options: { mode: 'live' } } })\n      const panel = this.c.panel.target\n      if (panel) {\n        panel.setAttribute('style', 'display: none')\n      }\n    }\n  }\n\n  private async getRecords(options: ReplayInternalOptions) {\n    const { receiver, records: recordsData } = options\n    const records = recordsData || (receiver && (await this.dataReceiver(receiver)))\n\n    if (!records) {\n      throw logError('Replay data not found')\n    }\n\n    return records\n  }\n\n  private calcProgress() {\n    const { packs } = Store.getState().replayData\n    const startTime = packs[0][0].time\n\n    let duration = 0\n    const packsInfo: {\n      startTime: number\n      endTime: number\n      duration: number\n      diffTime: number\n    }[] = []\n    let diffTime = 0\n    packs.forEach((pack, index) => {\n      const startTime = pack[0].time\n      const endTime = pack.slice(-1)[0].time\n      if (index) {\n        diffTime += startTime - packs[index - 1].slice(-1)[0].time\n      }\n      const info = {\n        startTime,\n        endTime,\n        duration: endTime - startTime,\n        diffTime\n      }\n      packsInfo.push(info)\n      duration += info.duration\n    })\n    const endTime = startTime + duration\n\n    Store.dispatch({\n      type: ProgressReducerTypes.PROGRESS,\n      data: {\n        duration,\n        packsInfo,\n        startTime,\n        endTime\n      }\n    })\n  }\n\n  private dispatchEvent(type: string, data: RecordData) {\n    const event = new CustomEvent(type, { detail: data })\n    window.dispatchEvent(event)\n  }\n\n  private async dataReceiver(receiver: (sender: (data: RecordData) => void) => void): Promise<RecordData[]> {\n    let isResolved: boolean\n    let head: HeadRecord\n    let snapshot: SnapshotRecord\n    return await new Promise(resolve => {\n      receiver(data => {\n        if (isResolved) {\n          this.dispatchEvent('record-data', data as RecordData)\n        } else {\n          if (data.type === RecordType.HEAD) {\n            head = data\n          } else if (data.type === RecordType.SNAPSHOT) {\n            snapshot = data\n          }\n\n          if (head && snapshot) {\n            isResolved = true\n            resolve([head, snapshot])\n            this.dispatchEvent('record-data', data as RecordData)\n          }\n        }\n      })\n    })\n  }\n\n  private triggerCalcProgress = debounce(() => this.calcProgress(), 500)\n\n  async destroy(opts: { removeDOM: boolean } = { removeDOM: true }) {\n    this.destroyStore.forEach(un => un())\n    observer.destroy()\n    Store.unsubscribe()\n    await delay(0)\n    removeGlobalVariables()\n    if (opts.removeDOM) {\n      const shadowHost = this.c.shadowHost\n      this.c.shadowHost.parentElement?.removeChild(shadowHost)\n    }\n  }\n\n  public on(key: PlayerEventTypes, fn: Function) {\n    observer.on(key, fn)\n  }\n\n  public async append(records: RecordData[]) {\n    await delay(0)\n    Store.dispatch({\n      type: ReplayDataReducerTypes.APPEND_RECORDS,\n      data: { records }\n    })\n\n    this.triggerCalcProgress()\n  }\n}\n"],"names":["initState","isMobileModule","isMobile"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAM,SAAS;IAKX;QAaO,iBAAY,GAAG,MAAM,SAAS,CAAC,MAAM,EAAE,CAAA;QAZ1C,IAAI,CAAC,IAAI,EAAE,CAAA;KACd;IAEO,IAAI;QACR,IAAI,CAAC,OAAO,GAAG,IAAI,GAAG,EAAE,CAAA;QACxB,IAAI,CAAC,KAAK,GAAG,IAAI,OAAO,EAAE,CAAA;KAC7B;IAEM,KAAK;QACR,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAA;KACvB;IAIM,OAAO,CAAC,EAAU;QACrB,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,CAAC,IAAI,IAAI,CAAA;KACtC;IAEM,OAAO,CAAC,IAAU,EAAE,KAAa,IAAI,CAAC,YAAY,EAAE;QACvD,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;QACxB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,CAAA;QAC1B,OAAO,EAAE,CAAA;KACZ;IAEM,UAAU,CAAC,EAAU;QACxB,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAA;QACvB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAS,CAAC,CAAA;KAC9C;IAEM,SAAS,CAAC,IAAU;QACvB,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;KAC9B;IAEM,UAAU,CAAC,EAAU,EAAE,IAAU;QACpC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;QACxB,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,CAAA;KAC7B;;AAzCc,gBAAM,GAAG,CAAC,CAAA;AA4CtB,MAAM,SAAS,GAAG,IAAI,SAAS,EAAE;;ACKxC,IAAY,UAkBX;AAlBD,WAAY,UAAU;IAClB,2CAAM,CAAA;IACN,mDAAU,CAAA;IACV,+CAAQ,CAAA;IACR,+CAAQ,CAAA;IACR,6CAAO,CAAA;IACP,yCAAK,CAAA;IACL,iDAAS,CAAA;IACT,mDAAU,CAAA;IACV,6CAAO,CAAA;IACP,+CAAQ,CAAA;IACR,sDAAW,CAAA;IACX,4CAAM,CAAA;IACN,8CAAO,CAAA;IACP,gDAAQ,CAAA;IACR,8CAAO,CAAA;IACP,kEAAiB,CAAA;IACjB,8CAAO,CAAA;AACX,CAAC,EAlBW,UAAU,KAAV,UAAU,QAkBrB;AAED,IAAY,gBAMX;AAND,WAAY,gBAAgB;IACxB,uDAAM,CAAA;IACN,yDAAO,CAAA;IACP,2DAAQ,CAAA;IACR,yDAAO,CAAA;IACP,uDAAM,CAAA;AACV,CAAC,EANW,gBAAgB,KAAhB,gBAAgB,QAM3B;AACD,IAAY,cAGX;AAHD,WAAY,cAAc;IACtB,mDAAM,CAAA;IACN,qDAAO,CAAA;AACX,CAAC,EAHW,cAAc,KAAd,cAAc,QAGzB;AAoLD,IAAY,eAIX;AAJD,WAAY,eAAe;IACvB,wCAAuB,CAAA;IACvB,0CAAyB,CAAA;IACzB,kDAAiC,CAAA;AACrC,CAAC,EAJW,eAAe,KAAf,eAAe;;;;;;SC5PX,QAAQ,CAAC,CAAuB;IAC5C,MAAM,GAAG,GAAI,CAAW,CAAC,OAAO,IAAK,CAAY,CAAA;IACjD,OAAO,CAAC,KAAK,CAAC,kBAAkB,GAAG,EAAE,CAAC,CAAA;IACtC,OAAO,GAAG,CAAA;AACd,CAAC;SAQe,SAAS,CAAC,GAAW;IACjC,OAAO,CAAC,GAAG,CAAC,sBAAsB,GAAG,EAAE,EAAE,aAAa,CAAC,CAAA;IACvD,OAAO,GAAG,CAAA;AACd,CAAC;SAEe,OAAO;IACnB,OAAO,IAAI,CAAC,GAAG,EAAE,CAAA;AACrB,CAAC;SAWe,YAAY,CAAC,MAAc;IACvC,IAAI,MAAM,IAAI,CAAC,EAAE;QACb,MAAM,GAAG,CAAC,CAAA;KACb;IACD,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,EAAE,IAAI,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAA;IACtG,MAAM,OAAO,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;IACpE,OAAO,OAAO,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE,CAAC,CAAA;AACvC,CAAC;SAEe,WAAW,CAAC,SAAiB;IACzC,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,SAAS,CAAC,CAAA;IAChC,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAA;IAC7B,MAAM,OAAO,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,CAAA;IACvC,MAAM,OAAO,GAAG,GAAG,GAAG,IAAI,CAAC,UAAU,EAAE,CAAA;IACvC,MAAM,aAAa,GAAG,CAAC,KAAK,GAAG,EAAE,GAAG,GAAG,GAAG,KAAK,GAAG,KAAK,IAAI,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;IAC9G,OAAO,aAAa,CAAA;AACxB,CAAC;SAEe,WAAW,CAAC,OAAe;IACvC,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;IAChC,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;QACpB,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,GAAG,KAAK,CAAA;QACxB,OAAO,CAAC,CAAC,GAAG,GAAG,EAAE,GAAG,CAAC,GAAG,IAAI,IAAI,CAAA;KACnC;IAED,MAAM,CAAC,IAAI,EAAE,GAAG,EAAE,GAAG,CAAC,GAAG,KAAK,CAAA;IAC9B,OAAO,CAAC,CAAC,IAAI,GAAG,IAAI,GAAG,CAAC,GAAG,GAAG,EAAE,GAAG,CAAC,GAAG,IAAI,IAAI,CAAA;AACnD,CAAC;SAEe,UAAU,CAAC,KAAiB;IACxC,OAAQ,KAAwB,CAAC,IAAI,KAAK,UAAU,CAAC,QAAQ,IAAI,CAAE,KAAwB,CAAC,IAAI,CAAC,OAAO,CAAA;AAC5G,CAAC;SAEqB,KAAK,CAAC,CAAC,GAAG,GAAG;;QAC/B,OAAO,IAAI,OAAO,CAAC,CAAC;YAChB,UAAU,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,CAAC,CAAA;SAC3B,CAAC,CAAA;KACL;CAAA;SACe,OAAO,CAAC,CAAiB;IACrC,OAAO,CAAC,CAAE,CAAW,CAAC,GAAG,CAAA;AAC7B,CAAC;SAMe,kBAAkB,CAAC,GAAW,EAAE,OAA6C;IACzF,OAAO,CAAC,OAAO,CAAC,CAAC,MAAW;QACxB,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,MAAM,CAAA;QACnC,QAAQ,IAAI;YACR,KAAK,KAAK;gBACN,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,GAAG,KAAK,GAAG,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;gBAC1E,MAAK;YACT,KAAK,IAAI;gBACL,GAAG,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,GAAG,GAAG,CAAC,CAAA;gBACxE,MAAK;SACZ;KACJ,CAAC,CAAA;IACF,OAAO,GAAG,CAAA;AACd,CAAC;SAmFe,QAAQ,CACpB,IAAO,EACP,gBAAwB,EACxB,UAAmB;IACf,WAAW,EAAE,KAAK;IAClB,UAAU,EAAE,KAAK;CACpB;IAED,IAAI,SAAoD,CAAA;IAExD,OAAO,UAAsC,GAAG,IAAmB;QAC/D,MAAM,OAAO,GAAG,IAAI,CAAA;QAEpB,MAAM,OAAO,GAAG;YACZ,SAAS,GAAG,SAAS,CAAA;YACrB,IAAI,CAAC,OAAO,CAAC,WAAW,IAAI,OAAO,CAAC,UAAU,EAAE;gBAC5C,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAA;aAC5B;SACJ,CAAA;QAED,MAAM,aAAa,GAAG,OAAO,CAAC,WAAW,IAAI,SAAS,KAAK,SAAS,CAAA;QAEpE,IAAI,SAAS,KAAK,SAAS,EAAE;YACzB,YAAY,CAAC,SAAS,CAAC,CAAA;SAC1B;QAED,SAAS,GAAG,UAAU,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAAA;QAEjD,IAAI,aAAa,EAAE;YACf,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,CAAA;SAC5B;KACJ,CAAA;AACL,CAAC;SAEe,SAAS,CAAC,GAAW,EAAE,IAAa;IAChD,IAAI;QACA,OAAO,IAAI,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAA;KAC5B;IAAC,OAAO,CAAC,EAAE;QACR,QAAQ,CAAC,CAAC,CAAC,CAAA;KACd;IACD,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAA;AACvC,CAAC;SAEe,aAAa,CACzB,WAAmD,EACnD,KAAsC,EACtC,SAAa;IAEb,IAAI,QAAQ,GAAG,SAAS,CAAA;IACxB,IAAI,KAAK,GAAG,CAAC,CAAA;IACb,OAAO,CAAC,EAAsB;QAC1B,WAAW,CAAC,SAAS,CAAC,CAAA;QAEtB,SAAS,SAAS,CAAC,KAAQ;YACvB,IAAI,KAAK,EAAE;gBACP,YAAY,CAAC,KAAK,CAAC,CAAA;aACtB;YAED,KAAK,GAAG,MAAM,CAAC,UAAU,CACrB;gBACI,IAAI,QAAQ,KAAK,KAAK,EAAE;oBACpB,OAAM;iBACT;gBACD,EAAE,CAAC,KAAK,CAAC,CAAA;gBACT,QAAQ,GAAG,KAAK,CAAA;gBAChB,YAAY,CAAC,KAAK,CAAC,CAAA;gBACnB,KAAK,GAAG,CAAC,CAAA;aACZ,EACD,OAAO,KAAK,KAAK,QAAQ,GAAG,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,CACnD,CAAA;SACJ;KACJ,CAAA;AACL,CAAC;SAEe,QAAQ,CAAC,IAAuF;IAC5G,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,eAAe,EAAE,GAAG,IAAI,CAAA;IAC5D,MAAM,MAAM,GAAG,UAAU,IAAI,SAAS,CAAA;IACtC,MAAM,MAAM,GAAG,eAAe,IAAI,SAAS,CAAA;IAC3C,MAAM,IAAI,GAAG;QACT,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,OAAO,EAAE,GAAG,CAAC;QAChD,qEAAqE,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC;QACzF,qEAAqE,CAAC,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC;KAC5F,CAAA;IACD,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,CAAA;AACnC,CAAC;SAEe,OAAO;IACnB,QAAQ,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;IAC5C,QAAQ,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,OAAO,EAAE,QAAQ,EAAE,CAAC,CAAA;AACtD,CAAC;SAEe,qBAAqB;IACjC,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;IAChC,MAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG;QAC9B,IAAI,GAAG,EAAE;YACL,IAAI,GAAG,CAAC,UAAU,CAAC,UAAU,CAAC,IAAI,GAAG,CAAC,UAAU,CAAC,UAAU,CAAC,EAAE;gBAC1D,OAAO,IAAI,CAAA;aACd;SACJ;KACJ,CAAqB,CAAA;IAEtB,UAAU,CAAC,OAAO,CAAC,GAAG;QAClB,OAAO,MAAM,CAAC,GAAG,CAAC,CAAA;KACrB,CAAC,CAAA;AACN,CAAC;AASM,MAAM,WAAW,GAAG,SAAS;;ACnSpC,MAAM,QAAQ,GAAG,MAAM,MAAM,CAAC,aAAa,IAAI,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAA;AAEjF,MAAM,IAAI,GAAG,gBAAM,OAAA,CAAA,MAAA,QAAQ,EAAE,0CAAE,IAAI,KAAI,QAAQ,CAAC,IAAI,CAAA,EAAA,CAAA;SAMpC,aAAa,CAAC,IAAU;IACpC,OAAO,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,YAAY,CAAA;AAC9C,CAAC;SAWe,eAAe,CAAC,GAAW,EAAE,OAAgB,EAAE,OAAiC;IAC5F,OAAO,GAAG,CAAC,OAAO,CAAC,0DAA0D,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,GAAG;QAC1F,MAAM,MAAM,GAAG,SAAS,CAAC,GAAG,EAAE,OAAO,IAAI,IAAI,EAAE,CAAC,CAAA;QAChD,IAAI,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE;YACzB,OAAO,MAAM,CAAA;SAChB;QACD,OAAO,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,IAAI,CAAC,CAAA;KAC3E,CAAC,CAAA;AACN,CAAC;SAEe,gBAAgB,CAAC,GAAW,EAAE,IAAc;IACxD,IAAI,GAAG,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE;QACxB,OAAO,GAAG,CAAA;KACb;IAED,IAAI,IAAI,EAAE;QACN,UAAU,CAAC;YACP,MAAM,GAAG,GAAG,IAAI,CAAC,WAAW,EAAc,CAAA;YAC1C,MAAM,OAAO,GAAG,GAAG,CAAC,WAAqB,CAAA;YAEzC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,iBAAiB,KAAI,EAAE,CAAA;YAEvD,IAAI,IAAI,IAAI,IAAI,EAAE;gBACd,MAAM,YAAY,GAAG,SAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,IAAI,CAAA;gBAC/C,MAAM,KAAK,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAA;gBACtC,KAAK;qBACA,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;qBAC5C,OAAO,CAAC,GAAG;oBACR,MAAM,OAAO,GAAG,SAAS,CAAC,GAAG,EAAE,YAAY,CAAC,CAAC,IAAI,CAAA;oBACjD,IAAI,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,OAAO,EAAE;wBACpC,IAAI,CAAC,YAAY,CAAC,GAAG,EAAE,OAAO,CAAC,CAAA;qBAClC;iBACJ,CAAC,CAAA;aACT;SACJ,CAAC,CAAA;KACL;IACD,OAAO,SAAS,CAAC,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,CAAA;AACtC,CAAC;SAEe,aAAa,CAAC,IAAiB;IAC3C,IAAI,CAAC,IAAI,EAAE;QACP,OAAO,KAAK,CAAA;KACf;IACD,OAAO,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,WAAW,KAAK,QAAQ,CAAA;AAC/E,CAAC;SAEe,cAAc,CAAC,IAAU;IACrC,OAAO,IAAI,CAAC,aAAa,IAAI,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAA;AACpE;;ACrEA,SAAS,SAAS,CAAC,UAAwB,EAAE,IAAsB;IAC/D,MAAM,EAAE,UAAU,EAAE,GAAG,IAAI,CAAA;IAC3B,MAAM,cAAc,GAAG,IAAI,CAAA;IAC3B,MAAM,MAAM,GAAG,UAAU,CAAC,MAAM,IAAI,UAAU,GAAG,CAAC,CAAC,CAAA;IACnD,MAAM,IAAI,GAAG,IAAI,QAAQ,CAAC,IAAI,WAAW,CAAC,MAAM,CAAC,CAAC,CAAA;IAClD,IAAI,MAAM,GAAG,CAAC,CAAA;IAEd,IAAI,UAAU,KAAK,CAAC,EAAE;QAClB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,MAAM,EAAE,EAAE;YAClD,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;YAClD,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,CAAA;YACnC,GAAG,GAAG,CAAC,GAAG,GAAG,GAAG,CAAA;YAChB,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;SAC5B;KACJ;SAAM;QACH,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,MAAM,IAAI,CAAC,EAAE;YACrD,MAAM,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAA;YAClD,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,CAAC,GAAG,MAAM,EAAE,cAAc,CAAC,CAAA;SACzE;KACJ;IAED,OAAO,IAAI,CAAA;AACf,CAAC;SAEe,SAAS,CAAC,IAAoB,EAAE,IAAsB;IAClE,MAAM,QAAQ,GAAG,eAAe,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;IAC5C,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,QAAQ,CAAC,EAAE;QAC9B,IAAI,EAAE,WAAW;KACpB,CAAC,CAAA;IAEF,OAAO,IAAI,CAAA;AACf,CAAC;SAEe,eAAe,CAAC,IAAoB,EAAE,IAAsB;IACxE,MAAM,GAAG,GAAG,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,CAAA;IAC7C,OAAO,aAAa,CAAC,GAAG,EAAE,IAAI,CAAC,CAAA;AACnC,CAAC;AAED,SAAS,UAAU,CAAC,IAAoB;IACpC,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAA;IAC3C,MAAM,IAAI,GAAG,IAAI,YAAY,CAAC,MAAM,CAAC,CAAA;IACrC,IAAI,MAAM,GAAG,CAAC,CAAA;IACd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QAClC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAA;QACzB,MAAM,IAAI,IAAI,CAAC,CAAC,CAAC,CAAC,MAAM,CAAA;KAC3B;IACD,OAAO,IAAI,CAAA;AACf,CAAC;AAED,SAAS,aAAa,CAAC,SAAmB,EAAE,EAAE,YAAY,EAAE,UAAU,EAAE,UAAU,EAAoB;IAClG,MAAM,aAAa,GAAG,EAAE,CAAA;IACxB,MAAM,MAAM,GAAG,IAAI,WAAW,CAAC,aAAa,GAAG,SAAS,CAAC,UAAU,CAAC,CAAA;IACpE,MAAM,cAAc,GAAG,IAAI,CAAA;IAE3B,MAAM,IAAI,GAAG,IAAI,QAAQ,CAAC,MAAM,CAAC,CAAA;IAGjC,aAAa,CAAC,IAAI,EAAE,CAAC,EAAE,MAAM,CAAC,CAAA;IAE9B,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,GAAG,SAAS,CAAC,UAAU,GAAG,CAAC,EAAE,cAAc,CAAC,CAAA;IAEhE,aAAa,CAAC,IAAI,EAAE,CAAC,EAAE,MAAM,CAAC,CAAA;IAG9B,aAAa,CAAC,IAAI,EAAE,EAAE,EAAE,MAAM,CAAC,CAAA;IAE/B,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,EAAE,cAAc,CAAC,CAAA;IAEtC,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,CAAC,EAAE,cAAc,CAAC,CAAA;IAErC,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,YAAY,EAAE,cAAc,CAAC,CAAA;IAEhD,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,UAAU,EAAE,cAAc,CAAC,CAAA;IAE9C,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,UAAU,GAAG,YAAY,IAAI,UAAU,GAAG,CAAC,CAAC,EAAE,cAAc,CAAC,CAAA;IAEhF,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,YAAY,IAAI,UAAU,GAAG,CAAC,CAAC,EAAE,cAAc,CAAC,CAAA;IAEnE,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,UAAU,EAAE,cAAc,CAAC,CAAA;IAG9C,aAAa,CAAC,IAAI,EAAE,EAAE,EAAE,MAAM,CAAC,CAAA;IAE/B,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,SAAS,CAAC,UAAU,EAAE,cAAc,CAAC,CAAA;IAIxD,MAAM,MAAM,GAAG,SAAS,CAAC,UAAU,CAAA;IACnC,IAAI,MAAM,GAAG,EAAE,CAAA;IACf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;QAC7B,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;QAC5C,MAAM,EAAE,CAAA;KACX;IAED,OAAO,IAAI,CAAA;AACf,CAAC;AAED,SAAS,aAAa,CAAC,IAAc,EAAE,MAAc,EAAE,MAAc;IACjE,MAAM,GAAG,GAAG,MAAM,CAAC,MAAM,CAAA;IACzB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;QAC1B,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAA;KAClD;AACL,CAAC;SAMe,oBAAoB,CAAC,GAAW;IAC5C,OAAO,IAAI,YAAY,CAAC,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAA;AACrD,CAAC;SAYe,mBAAmB,CAAC,GAAW;IAC3C,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAA;IACtB,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAA;IAC3B,MAAM,WAAW,GAAG,IAAI,WAAW,CAAC,OAAO,CAAC,CAAA;IAC5C,MAAM,QAAQ,GAAG,IAAI,QAAQ,CAAC,WAAW,CAAC,CAAA;IAC1C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,EAAE,CAAC,EAAE,EAAE;QAC9B,QAAQ,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAA;KAC3C;IAED,OAAO,WAAW,CAAA;AACtB;;MCtIa,cAAc;IAKvB,YAAY,OAAiB,EAAE,GAAG,GAAG,EAAE;QADvC,UAAK,GAAG,CAAC,CAAA;QAEL,IAAI,CAAC,GAAG,GAAG,GAAG,CAAA;QACd,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;KACzB;IAEM,KAAK;QACR,IAAI,IAAI,GAAG,WAAW,CAAC,GAAG,EAAE,CAAA;QAC5B,MAAM,QAAQ,GAAG,IAAI,GAAG,IAAI,CAAC,GAAG,CAAA;QAChC,MAAM,SAAS,GAAG,GAAG,CAAA;QAErB,MAAM,WAAW,GAAG,CAAC,GAAW;YAC5B,IAAI,CAAC,SAAS,GAAG,qBAAqB,CAAC,WAAW,CAAC,CAAA;YACnD,MAAM,KAAK,GAAG,GAAG,GAAG,IAAI,CAAA;YAExB,IAAI,KAAK,IAAI,QAAQ,GAAG,SAAS,EAAE;gBAC/B,IAAI,GAAG,GAAG,IAAI,KAAK,GAAG,QAAQ,CAAC,CAAA;gBAC/B,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,CAAA;aACpC;SACJ,CAAA;QACD,IAAI,CAAC,SAAS,GAAG,qBAAqB,CAAC,WAAW,CAAC,CAAA;KACtD;IAEM,IAAI;QACP,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;KACvC;;;;;;;;AC7BL,CAAC,YAAY;AAEb;AACA;AACA,EAAE,SAAS,QAAQ,GAAG;AACtB;AACA,IAAI,IAAI,CAAC,GAAG,MAAM,CAAC;AACnB,IAAI,IAAI,CAAC,GAAG,QAAQ,CAAC;AACrB;AACA;AACA,IAAI;AACJ,MAAM,gBAAgB,IAAI,CAAC,CAAC,eAAe,CAAC,KAAK;AACjD,MAAM,CAAC,CAAC,6BAA6B,KAAK,IAAI;AAC9C,MAAM;AACN,MAAM,OAAO;AACb,KAAK;AACL;AACA;AACA,IAAI,IAAI,OAAO,GAAG,CAAC,CAAC,WAAW,IAAI,CAAC,CAAC,OAAO,CAAC;AAC7C,IAAI,IAAI,WAAW,GAAG,GAAG,CAAC;AAC1B;AACA;AACA,IAAI,IAAI,QAAQ,GAAG;AACnB,MAAM,MAAM,EAAE,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,QAAQ;AACpC,MAAM,QAAQ,EAAE,CAAC,CAAC,QAAQ;AAC1B,MAAM,aAAa,EAAE,OAAO,CAAC,SAAS,CAAC,MAAM,IAAI,aAAa;AAC9D,MAAM,cAAc,EAAE,OAAO,CAAC,SAAS,CAAC,cAAc;AACtD,KAAK,CAAC;AACN;AACA;AACA,IAAI,IAAI,GAAG;AACX,MAAM,CAAC,CAAC,WAAW,IAAI,CAAC,CAAC,WAAW,CAAC,GAAG;AACxC,UAAU,CAAC,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,WAAW,CAAC;AAC/C,UAAU,IAAI,CAAC,GAAG,CAAC;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,SAAS,kBAAkB,CAAC,SAAS,EAAE;AAC3C,MAAM,IAAI,iBAAiB,GAAG,CAAC,OAAO,EAAE,UAAU,EAAE,OAAO,CAAC,CAAC;AAC7D;AACA,MAAM,OAAO,IAAI,MAAM,CAAC,iBAAiB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACrE,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,IAAI,kBAAkB,GAAG,kBAAkB,CAAC,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,SAAS,aAAa,CAAC,CAAC,EAAE,CAAC,EAAE;AACjC,MAAM,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC;AAC1B,MAAM,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;AACzB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,SAAS,IAAI,CAAC,CAAC,EAAE;AACrB,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;AAC/C,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,SAAS,aAAa,CAAC,QAAQ,EAAE;AACrC,MAAM;AACN,QAAQ,QAAQ,KAAK,IAAI;AACzB,QAAQ,OAAO,QAAQ,KAAK,QAAQ;AACpC,QAAQ,QAAQ,CAAC,QAAQ,KAAK,SAAS;AACvC,QAAQ,QAAQ,CAAC,QAAQ,KAAK,MAAM;AACpC,QAAQ,QAAQ,CAAC,QAAQ,KAAK,SAAS;AACvC,QAAQ;AACR;AACA;AACA,QAAQ,OAAO,IAAI,CAAC;AACpB,OAAO;AACP;AACA,MAAM,IAAI,OAAO,QAAQ,KAAK,QAAQ,IAAI,QAAQ,CAAC,QAAQ,KAAK,QAAQ,EAAE;AAC1E;AACA,QAAQ,OAAO,KAAK,CAAC;AACrB,OAAO;AACP;AACA;AACA,MAAM,MAAM,IAAI,SAAS;AACzB,QAAQ,mCAAmC;AAC3C,UAAU,QAAQ,CAAC,QAAQ;AAC3B,UAAU,uDAAuD;AACjE,OAAO,CAAC;AACR,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,SAAS,kBAAkB,CAAC,EAAE,EAAE,IAAI,EAAE;AAC1C,MAAM,IAAI,IAAI,KAAK,GAAG,EAAE;AACxB,QAAQ,OAAO,EAAE,CAAC,YAAY,GAAG,kBAAkB,GAAG,EAAE,CAAC,YAAY,CAAC;AACtE,OAAO;AACP;AACA,MAAM,IAAI,IAAI,KAAK,GAAG,EAAE;AACxB,QAAQ,OAAO,EAAE,CAAC,WAAW,GAAG,kBAAkB,GAAG,EAAE,CAAC,WAAW,CAAC;AACpE,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,SAAS,WAAW,CAAC,EAAE,EAAE,IAAI,EAAE;AACnC,MAAM,IAAI,aAAa,GAAG,CAAC,CAAC,gBAAgB,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC;AAC1E;AACA,MAAM,OAAO,aAAa,KAAK,MAAM,IAAI,aAAa,KAAK,QAAQ,CAAC;AACpE,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,SAAS,YAAY,CAAC,EAAE,EAAE;AAC9B,MAAM,IAAI,aAAa,GAAG,kBAAkB,CAAC,EAAE,EAAE,GAAG,CAAC,IAAI,WAAW,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;AAC9E,MAAM,IAAI,aAAa,GAAG,kBAAkB,CAAC,EAAE,EAAE,GAAG,CAAC,IAAI,WAAW,CAAC,EAAE,EAAE,GAAG,CAAC,CAAC;AAC9E;AACA,MAAM,OAAO,aAAa,IAAI,aAAa,CAAC;AAC5C,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,SAAS,oBAAoB,CAAC,EAAE,EAAE;AACtC,MAAM,OAAO,EAAE,KAAK,CAAC,CAAC,IAAI,IAAI,YAAY,CAAC,EAAE,CAAC,KAAK,KAAK,EAAE;AAC1D,QAAQ,EAAE,GAAG,EAAE,CAAC,UAAU,IAAI,EAAE,CAAC,IAAI,CAAC;AACtC,OAAO;AACP;AACA,MAAM,OAAO,EAAE,CAAC;AAChB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,SAAS,IAAI,CAAC,OAAO,EAAE;AAC3B,MAAM,IAAI,IAAI,GAAG,GAAG,EAAE,CAAC;AACvB,MAAM,IAAI,KAAK,CAAC;AAChB,MAAM,IAAI,QAAQ,CAAC;AACnB,MAAM,IAAI,QAAQ,CAAC;AACnB,MAAM,IAAI,OAAO,GAAG,CAAC,IAAI,GAAG,OAAO,CAAC,SAAS,IAAI,WAAW,CAAC;AAC7D;AACA;AACA,MAAM,OAAO,GAAG,OAAO,GAAG,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC;AAC1C;AACA;AACA,MAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC;AAC5B;AACA,MAAM,QAAQ,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,MAAM,IAAI,KAAK,CAAC;AACvE,MAAM,QAAQ,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,MAAM,IAAI,KAAK,CAAC;AACvE;AACA,MAAM,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;AAClE;AACA;AACA,MAAM,IAAI,QAAQ,KAAK,OAAO,CAAC,CAAC,IAAI,QAAQ,KAAK,OAAO,CAAC,CAAC,EAAE;AAC5D,QAAQ,CAAC,CAAC,qBAAqB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC;AACvD,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,SAAS,YAAY,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE;AACpC,MAAM,IAAI,UAAU,CAAC;AACrB,MAAM,IAAI,MAAM,CAAC;AACjB,MAAM,IAAI,MAAM,CAAC;AACjB,MAAM,IAAI,MAAM,CAAC;AACjB,MAAM,IAAI,SAAS,GAAG,GAAG,EAAE,CAAC;AAC5B;AACA;AACA,MAAM,IAAI,EAAE,KAAK,CAAC,CAAC,IAAI,EAAE;AACzB,QAAQ,UAAU,GAAG,CAAC,CAAC;AACvB,QAAQ,MAAM,GAAG,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW,CAAC;AAC5C,QAAQ,MAAM,GAAG,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW,CAAC;AAC5C,QAAQ,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;AACjC,OAAO,MAAM;AACb,QAAQ,UAAU,GAAG,EAAE,CAAC;AACxB,QAAQ,MAAM,GAAG,EAAE,CAAC,UAAU,CAAC;AAC/B,QAAQ,MAAM,GAAG,EAAE,CAAC,SAAS,CAAC;AAC9B,QAAQ,MAAM,GAAG,aAAa,CAAC;AAC/B,OAAO;AACP;AACA;AACA,MAAM,IAAI,CAAC;AACX,QAAQ,UAAU,EAAE,UAAU;AAC9B,QAAQ,MAAM,EAAE,MAAM;AACtB,QAAQ,SAAS,EAAE,SAAS;AAC5B,QAAQ,MAAM,EAAE,MAAM;AACtB,QAAQ,MAAM,EAAE,MAAM;AACtB,QAAQ,CAAC,EAAE,CAAC;AACZ,QAAQ,CAAC,EAAE,CAAC;AACZ,OAAO,CAAC,CAAC;AACT,KAAK;AACL;AACA;AACA;AACA,IAAI,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,QAAQ,GAAG,WAAW;AACvC;AACA,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;AACtC,QAAQ,OAAO;AACf,OAAO;AACP;AACA;AACA,MAAM,IAAI,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;AAChD,QAAQ,QAAQ,CAAC,MAAM,CAAC,IAAI;AAC5B,UAAU,CAAC;AACX,UAAU,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,SAAS;AACzC,cAAc,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI;AAC/B,cAAc,OAAO,SAAS,CAAC,CAAC,CAAC,KAAK,QAAQ;AAC9C,gBAAgB,SAAS,CAAC,CAAC,CAAC;AAC5B,gBAAgB,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW;AAC1C;AACA,UAAU,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,SAAS;AACxC,cAAc,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG;AAC9B,cAAc,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS;AACxC,gBAAgB,SAAS,CAAC,CAAC,CAAC;AAC5B,gBAAgB,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW;AAC1C,SAAS,CAAC;AACV;AACA,QAAQ,OAAO;AACf,OAAO;AACP;AACA;AACA,MAAM,YAAY,CAAC,IAAI;AACvB,QAAQ,CAAC;AACT,QAAQ,CAAC,CAAC,IAAI;AACd,QAAQ,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,SAAS;AACvC,YAAY,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI;AAC/B,YAAY,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW;AACtC,QAAQ,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,SAAS;AACtC,YAAY,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG;AAC9B,YAAY,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW;AACtC,OAAO,CAAC;AACR,KAAK,CAAC;AACN;AACA;AACA,IAAI,CAAC,CAAC,QAAQ,GAAG,WAAW;AAC5B;AACA,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;AACtC,QAAQ,OAAO;AACf,OAAO;AACP;AACA;AACA,MAAM,IAAI,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,EAAE;AACvC,QAAQ,QAAQ,CAAC,QAAQ,CAAC,IAAI;AAC9B,UAAU,CAAC;AACX,UAAU,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,SAAS;AACzC,cAAc,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI;AAC/B,cAAc,OAAO,SAAS,CAAC,CAAC,CAAC,KAAK,QAAQ,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC;AACjE,UAAU,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,SAAS;AACxC,cAAc,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG;AAC9B,cAAc,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC;AAC3D,SAAS,CAAC;AACV;AACA,QAAQ,OAAO;AACf,OAAO;AACP;AACA;AACA,MAAM,YAAY,CAAC,IAAI;AACvB,QAAQ,CAAC;AACT,QAAQ,CAAC,CAAC,IAAI;AACd,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW,CAAC;AAC1D,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,OAAO,IAAI,CAAC,CAAC,WAAW,CAAC;AACzD,OAAO,CAAC;AACR,KAAK,CAAC;AACN;AACA;AACA,IAAI,OAAO,CAAC,SAAS,CAAC,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC,QAAQ,GAAG,WAAW;AACvE;AACA,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;AACtC,QAAQ,OAAO;AACf,OAAO;AACP;AACA;AACA,MAAM,IAAI,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;AAChD;AACA,QAAQ,IAAI,OAAO,SAAS,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAI,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;AAC5E,UAAU,MAAM,IAAI,WAAW,CAAC,8BAA8B,CAAC,CAAC;AAChE,SAAS;AACT;AACA,QAAQ,QAAQ,CAAC,aAAa,CAAC,IAAI;AACnC,UAAU,IAAI;AACd;AACA,UAAU,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,SAAS;AACzC,cAAc,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI;AACjC,cAAc,OAAO,SAAS,CAAC,CAAC,CAAC,KAAK,QAAQ,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU;AACjF;AACA,UAAU,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,SAAS;AACxC,cAAc,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG;AAChC,cAAc,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS;AAC1E,SAAS,CAAC;AACV;AACA,QAAQ,OAAO;AACf,OAAO;AACP;AACA,MAAM,IAAI,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AACnC,MAAM,IAAI,GAAG,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;AACjC;AACA;AACA,MAAM,YAAY,CAAC,IAAI;AACvB,QAAQ,IAAI;AACZ,QAAQ,IAAI;AACZ,QAAQ,OAAO,IAAI,KAAK,WAAW,GAAG,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,IAAI;AAC9D,QAAQ,OAAO,GAAG,KAAK,WAAW,GAAG,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,GAAG;AAC3D,OAAO,CAAC;AACR,KAAK,CAAC;AACN;AACA;AACA,IAAI,OAAO,CAAC,SAAS,CAAC,QAAQ,GAAG,WAAW;AAC5C;AACA,MAAM,IAAI,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,EAAE;AACtC,QAAQ,OAAO;AACf,OAAO;AACP;AACA;AACA,MAAM,IAAI,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;AAChD,QAAQ,QAAQ,CAAC,aAAa,CAAC,IAAI;AACnC,UAAU,IAAI;AACd,UAAU,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,KAAK,SAAS;AACzC,cAAc,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU;AACnD,cAAc,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU;AAC9C,UAAU,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,SAAS;AACxC,cAAc,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS;AACjD,cAAc,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS;AAC7C,SAAS,CAAC;AACV;AACA,QAAQ,OAAO;AACf,OAAO;AACP;AACA,MAAM,IAAI,CAAC,MAAM,CAAC;AAClB,QAAQ,IAAI,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,CAAC,UAAU;AACnD,QAAQ,GAAG,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,SAAS;AAChD,QAAQ,QAAQ,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,QAAQ;AACvC,OAAO,CAAC,CAAC;AACT,KAAK,CAAC;AACN;AACA;AACA,IAAI,OAAO,CAAC,SAAS,CAAC,cAAc,GAAG,WAAW;AAClD;AACA,MAAM,IAAI,aAAa,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;AAChD,QAAQ,QAAQ,CAAC,cAAc,CAAC,IAAI;AACpC,UAAU,IAAI;AACd,UAAU,SAAS,CAAC,CAAC,CAAC,KAAK,SAAS,GAAG,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC;AAC1D,SAAS,CAAC;AACV;AACA,QAAQ,OAAO;AACf,OAAO;AACP;AACA;AACA,MAAM,IAAI,gBAAgB,GAAG,oBAAoB,CAAC,IAAI,CAAC,CAAC;AACxD,MAAM,IAAI,WAAW,GAAG,gBAAgB,CAAC,qBAAqB,EAAE,CAAC;AACjE,MAAM,IAAI,WAAW,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;AACrD;AACA,MAAM,IAAI,gBAAgB,KAAK,CAAC,CAAC,IAAI,EAAE;AACvC;AACA,QAAQ,YAAY,CAAC,IAAI;AACzB,UAAU,IAAI;AACd,UAAU,gBAAgB;AAC1B,UAAU,gBAAgB,CAAC,UAAU,GAAG,WAAW,CAAC,IAAI,GAAG,WAAW,CAAC,IAAI;AAC3E,UAAU,gBAAgB,CAAC,SAAS,GAAG,WAAW,CAAC,GAAG,GAAG,WAAW,CAAC,GAAG;AACxE,SAAS,CAAC;AACV;AACA;AACA,QAAQ,IAAI,CAAC,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,CAAC,QAAQ,KAAK,OAAO,EAAE;AACvE,UAAU,CAAC,CAAC,QAAQ,CAAC;AACrB,YAAY,IAAI,EAAE,WAAW,CAAC,IAAI;AAClC,YAAY,GAAG,EAAE,WAAW,CAAC,GAAG;AAChC,YAAY,QAAQ,EAAE,QAAQ;AAC9B,WAAW,CAAC,CAAC;AACb,SAAS;AACT,OAAO,MAAM;AACb;AACA,QAAQ,CAAC,CAAC,QAAQ,CAAC;AACnB,UAAU,IAAI,EAAE,WAAW,CAAC,IAAI;AAChC,UAAU,GAAG,EAAE,WAAW,CAAC,GAAG;AAC9B,UAAU,QAAQ,EAAE,QAAQ;AAC5B,SAAS,CAAC,CAAC;AACX,OAAO;AACP,KAAK,CAAC;AACN,GAAG;AACH;AACA,EAAoE;AACpE;AACA,IAAI,iBAAiB,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC;AAC5C,GAGG;AACH;AACA,CAAC,EAAE;;;;;MC3aU,GAAG;IAMd;QALA,aAAQ,GAAG,IAAI,CAAA;QACf,QAAG,GAAG,CAAC,CAAA;QACP,aAAQ,GAAG,KAAK,CAAA;QAChB,aAAQ,GAAsB,EAAE,CAAA;QAChC,UAAK,GAAkB,IAAI,CAAA;QAEzB,IAAI,CAAC,OAAO,EAAE,CAAA;KACf;IAEO,UAAU;QAChB,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;YACxB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAA;SAClB;KACF;IAED,OAAO;QACL,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAA;KACzB;IAED,OAAO;QACL,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,UAAU,CAAC;YAC7B,MAAM,OAAO,GAAG,WAAW;iBACxB,gBAAgB,CAAC,UAAU,CAAC;iBAC5B,MAAM,CAAC,CAAC,IAA+B,KAAK,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,CAAA;YACtE,MAAM,GAAG,GAAG,OAAO,CAAC,MAAM,CAAA;YAC1B,IAAI,GAAG,IAAI,IAAI,CAAC,GAAG,EAAE;gBACnB,WAAW,CAAC,oBAAoB,EAAE,CAAA;gBAClC,IAAI,CAAC,UAAU,EAAE,CAAA;gBACjB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAA;gBACpB,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;oBACxB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,IAAI,GAAG,EAAE,CAAC,CAAA;iBACpC;gBACD,OAAM;aACP;YACD,IAAI,CAAC,GAAG,GAAG,GAAG,CAAA;YACd,IAAI,CAAC,OAAO,EAAE,CAAA;SACf,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAA;KAClB;IAED,WAAW,CAAC,KAAgC;QAC1C,QAAQ,KAAK,CAAC,aAAa;YACzB,KAAK,MAAM,CAAC;YACZ,KAAK,KAAK,CAAC;YACX,KAAK,KAAK,CAAC;YACX,KAAK,QAAQ;gBACX,OAAO,IAAI,CAAA;SAGd;KACF;IAED,KAAK,CAAC,EAAc;QAClB,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,OAAO,EAAE,EAAE,CAAA;SACZ;QACD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;KACvB;;;AC5DH,MAAM,QAAQ;IAAd;QACI,OAAE,GAAG,CAAC,CAAA;QACN,iBAAY,GAAG,IAAI,GAAG,EAA4B,CAAA;KAyCrD;IAvCU,EAAE,CAAC,GAAM,EAAE,EAAY;QAC1B,MAAM,GAAG,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAA;QACvC,GAAG,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;QACtB,OAAO,IAAI,CAAC,EAAE,CAAA;KACjB;IAEM,IAAI,CAAC,GAAM,EAAE,GAAG,IAAS;QAC5B,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,EAAE;YAClC,EAAE,CAAC,GAAG,IAAI,CAAC,CAAA;SACd,CAAC,CAAA;KACL;IAEM,IAAI,CAAC,GAAM,EAAE,EAAY;QAC5B,MAAM,QAAQ,GAAG,CAAC,GAAG,IAAS;YAC1B,EAAE,CAAC,GAAG,IAAI,CAAC,CAAA;YACX,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE,CAAC,CAAA;SACpB,CAAA;QACD,MAAM,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAA;QACjC,OAAO,EAAE,CAAA;KACZ;IAEM,KAAK,CAAC,GAAM;QACf,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAA;KACtC;IAEM,OAAO;QACV,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAA;KAC5B;IAEO,GAAG,CAAC,GAAM,EAAE,EAAU;QAC1B,MAAM,GAAG,GAAG,IAAI,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAA;QACvC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,CAAA;KACjB;IAEO,iBAAiB,CAAC,GAAM;QAC5B,MAAM,GAAG,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,IAAI,GAAG,EAAoB,CAAA;QACrE,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;QAC/B,OAAO,GAAG,CAAA;KACb;CACJ;AAEM,MAAM,QAAQ,GAAG,IAAI,QAAQ,EAAoB;;SC7CxC,WAAW,CAAC,OAAoB;IAC5C,IAAI,KAAK,GAAG,OAAO,CAAC,EAAW,CAAC,CAAA;IAChC,MAAM,SAAS,GAAkC,EAAE,CAAA;IAEnD,SAAS,WAAW;QAChB,SAAS,CAAC,MAAM,GAAG,CAAC,CAAA;QACpB,QAAQ,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAA;KACxC;IAED,SAAS,SAAS,CAAC,QAAgC;QAC/C,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;KAC3B;IAED,SAAS,QAAQ,CAAC,MAAc;QAC5B,KAAK,GAAG,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAA;QAE9B,SAAS,CAAC,OAAO,CAAC,QAAQ;YACtB,QAAQ,CAAC,KAAK,CAAC,CAAA;SAClB,CAAC,CAAA;KACL;IAED,SAAS,QAAQ;QACb,OAAO,KAAK,CAAA;KACf;IAED,OAAO;QACH,WAAW;QACX,SAAS;QACT,QAAQ;QACR,QAAQ;KACX,CAAA;AACL;;SC/BgB,eAAe,CAAC,QAAuC;IACnE,MAAM,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;IACzC,OAAO,SAAS,WAAW,CAAC,KAAY,EAAE,MAAc;QACpD,MAAM,SAAS,GAAG,EAAW,CAAA;QAE7B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,WAAW,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACzC,MAAM,GAAG,GAAG,WAAW,CAAC,CAAC,CAAgB,CAAA;YAEzC,MAAM,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;YAE7B,MAAM,mBAAmB,GAAG,KAAK,CAAC,GAAG,CAAC,CAAA;YAEtC,MAAM,eAAe,GAAG,OAAO,CAAC,mBAAmB,EAAE,MAAM,CAAC,CAAA;YAE5D,SAAS,CAAC,GAAG,CAAC,GAAG,eAAsB,CAAA;SAC1C;QACD,OAAO,SAAS,CAAA;KACnB,CAAA;AACL;;ACpBA,MAAMA,WAAS,GAAG;IACd,SAAS,EAAE,CAAC;IACZ,OAAO,EAAE,CAAC;IACV,QAAQ,EAAE,CAAC;IACX,SAAS,EAAE,EAKR;CACN,CAAA;AAID,IAAY,oBAGX;AAHD,WAAY,oBAAoB;IAC5B,uCAAe,CAAA;IACf,6CAAqB,CAAA;AACzB,CAAC,EAHW,oBAAoB,KAApB,oBAAoB,QAG/B;SAEe,eAAe,CAAC,KAAoB,EAAE,MAAsD;IACxG,IAAI,CAAC,KAAK,EAAE;QACR,KAAK,GAAGA,WAAS,CAAA;KACpB;IAED,IAAI,CAAC,MAAM,EAAE;QACT,OAAO,KAAK,CAAA;KACf;IAED,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,MAAM,CAAA;IAE7B,QAAQ,IAAI;QACR,KAAK,oBAAoB,CAAC,QAAQ;YAC9B,uCACO,KAAK,GACL,IAAI,EACV;QACL,KAAK,oBAAoB,CAAC,KAAK;YAC3B,yBAAYA,WAAS,EAAE;QAC3B;YACI,OAAO,KAAK,CAAA;KACnB;AACL;;ACvCA,MAAMA,WAAS,GAAG;IACd,KAAK,EAAE,CAAC;IACR,OAAO,EAAE,EAAmB;CAC/B,CAAA;AAID,IAAY,kBAIX;AAJD,WAAY,kBAAkB;IAC1B,qCAAe,CAAA;IACf,qCAAe,CAAA;IACf,yCAAmB,CAAA;AACvB,CAAC,EAJW,kBAAkB,KAAlB,kBAAkB,QAI7B;SAEe,aAAa,CACzB,KAAuB,EACvB,MAAqE;IAErE,IAAI,CAAC,KAAK,EAAE;QACR,KAAK,GAAGA,WAAS,CAAA;KACpB;IAED,IAAI,CAAC,MAAM,EAAE;QACT,OAAO,KAAK,CAAA;KACf;IAED,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,MAAM,CAAA;IAE7B,QAAQ,IAAI;QACR,KAAK,kBAAkB,CAAC,OAAO;YAC3B,uCACO,KAAK,KACR,OAAO,EAAE,IAAI,CAAC,OAAQ,IACzB;QACL,KAAK,kBAAkB,CAAC,KAAK;YACzB,uCACO,KAAK,KACR,KAAK,EAAE,IAAI,CAAC,KAAM,IACrB;QACL,KAAK,kBAAkB,CAAC,KAAK;YACzB,yBAAYA,WAAS,EAAE;QAC3B;YACI,OAAO,KAAK,CAAA;KACnB;AACL;;SC3CgB,QAAQ,CAAC,OAAqB;IAC1C,MAAM,KAAK,GAAmB,EAAE,CAAA;IAChC,MAAM,IAAI,GAAiB,EAAE,CAAA;IAE7B,OAAO,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC;QACtB,IAAI,CAAC,IAAI,MAAM,CAAC,IAAI,KAAK,UAAU,CAAC,IAAI,EAAE;YACtC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAA;YACxB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAA;SAClB;QACD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;QAEjB,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,KAAK,CAAC,EAAE;YAC1B,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;SACnB;KACJ,CAAC,CAAA;IAEF,OAAO,KAAK,CAAA;AAChB;;AChBA,MAAM,SAAS,GAAG;IACd,OAAO,EAAE,EAAkB;IAC3B,KAAK,EAAE,EAAoB;IAC3B,WAAW,EAAE,EAAgB;CAChC,CAAA;AAID,IAAY,sBAIX;AAJD,WAAY,sBAAsB;IAC9B,yCAAe,CAAA;IACf,qDAA2B,CAAA;IAC3B,2DAAiC,CAAA;AACrC,CAAC,EAJW,sBAAsB,KAAtB,sBAAsB,QAIjC;SAEe,iBAAiB,CAC7B,KAAuB,EACvB,MAAyE;IAEzE,IAAI,CAAC,KAAK,EAAE;QACR,KAAK,GAAG,SAAS,CAAA;KACpB;IAED,IAAI,CAAC,MAAM,EAAE;QACT,OAAO,KAAK,CAAA;KACf;IAED,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,MAAM,CAAA;IAE7B,QAAQ,IAAI;QACR,KAAK,sBAAsB,CAAC,cAAc;YACtC,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAA;YAC7B,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,OAAQ,CAAC,CAAA;YAC9B,MAAM,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAA;YAC/B,KAAK,CAAC,KAAK,GAAG,KAAK,CAAA;YACnB,OAAO,KAAK,CAAA;QAChB,KAAK,sBAAsB,CAAC,WAAW;YACnC,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,WAAW,EAAE;gBACtC,MAAM,CAAC,aAAa,GAAG,IAAI,CAAC,WAAW,CAAA;aAC1C;YACD,uCACO,KAAK,GACL,IAAI,EACV;QACL,KAAK,sBAAsB,CAAC,KAAK;YAC7B,yBAAY,SAAS,EAAE;QAC3B;YACI,OAAO,KAAK,CAAA;KACnB;AACL;;AC7CA,MAAM,OAAO,GAAG,eAAe,CAAC;IAC5B,MAAM,EAAE,aAAa;IACrB,QAAQ,EAAE,eAAe;IACzB,UAAU,EAAE,iBAAiB;CAChC,CAAC,CAAA;AAEK,MAAM,KAAK,GAAG,WAAW,CAAC,OAAO,CAAC;;;;ACXzCC,kBAAc,GAAGC,WAAQ;2BACF,GAAGA,WAAQ;0BACZ,GAAGA,WAAQ;AACjC;AACA,MAAM,QAAQ,GAAG,yUAAwU;AACzV;AACA,MAAM,QAAQ,GAAG,8BAA6B;AAC9C;AACA,SAASA,UAAQ,EAAE,IAAI,EAAE;AACzB,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,GAAG,GAAE;AACtB,EAAE,IAAI,EAAE,GAAG,IAAI,CAAC,GAAE;AAClB,EAAE,IAAI,CAAC,EAAE,IAAI,OAAO,SAAS,KAAK,WAAW,EAAE,EAAE,GAAG,SAAS,CAAC,UAAS;AACvE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,OAAO,IAAI,OAAO,EAAE,CAAC,OAAO,CAAC,YAAY,CAAC,KAAK,QAAQ,EAAE;AACxE,IAAI,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,YAAY,EAAC;AACjC,GAAG;AACH,EAAE,IAAI,OAAO,EAAE,KAAK,QAAQ,EAAE,OAAO,KAAK;AAC1C;AACA,EAAE,IAAI,MAAM,GAAG,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,EAAC;AACxE;AACA,EAAE;AACF,IAAI,CAAC,MAAM;AACX,IAAI,IAAI,CAAC,MAAM;AACf,IAAI,IAAI,CAAC,aAAa;AACtB,IAAI,SAAS;AACb,IAAI,SAAS,CAAC,cAAc,GAAG,CAAC;AAChC,IAAI,EAAE,CAAC,OAAO,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAClC,IAAI,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;AAC/B,IAAI;AACJ,IAAI,MAAM,GAAG,KAAI;AACjB,GAAG;AACH;AACA,EAAE,OAAO,MAAM;AACf;;;;AC/BA,MAAM,eAAe,GAAG,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAA;SAE3B,YAAY,CAAC,IAAiB,EAAE,IAAY,EAAE,KAAuC;IACjG,IAAI,IAAI,CAAC,QAAQ,KAAK,IAAI,CAAC,YAAY,EAAE;QACrC,OAAM;KACT;IACD,IAAI,IAAI,KAAK,OAAO,EAAE;QAClB,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;YAC3B,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,eAAe,CAAC,KAAK,CAAC,CAAA;SAC9C;aAAM,IAAI,KAAK,KAAK,IAAI,IAAI,OAAO,KAAK,KAAK,QAAQ,EAAE;YACpD,KAAK,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;gBACxC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;oBACd,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,EAAE,CAAQ,CAAC,CAAA;iBACtC;qBAAM;oBACH,IAAI,CAAC,KAAK,CAAC,CAAQ,CAAC,GAAG,CAAQ,CAAA;iBAClC;aACJ;SACJ;QACD,OAAM;KACT;IAED,IAAI,IAAI,KAAK,KAAK,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;QAC1D,OAAM;KACT;IAGD,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;QAC3D,OAAM;KACT;IAED,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;QACnB,OAAM;KACT;IAED,IAAI,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;QACtB,OAAM;KACT;IAED,IAAI,KAAK,KAAK,IAAI,EAAE;QAChB,OAAO,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,CAAA;KACpC;IAED,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAA;IAErB,IAAI,IAAI,KAAK,MAAM,EAAE;QACjB,KAAK,GAAG,gBAAgB,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,CAAA;KAChD;IAED,IAAI,IAAI,KAAK,YAAY,IAAI,IAAI,KAAK,KAAK,EAAE;QACzC,IAAI,KAAK,CAAC,UAAU,CAAC,OAAO,CAAC,EAAE,CAE9B;aAAM;YACH,KAAK,GAAG,gBAAgB,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,CAAA;SAChD;KACJ;IAGD,IAAI,IAAI,KAAK,QAAQ,EAAE;QACnB,MAAM,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;QACjC,KAAK,GAAG,QAAQ;aACX,GAAG,CAAC,GAAG;YACJ,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,GAAG,GAAG,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;YACzC,IAAI,GAAG,IAAI,IAAI,EAAE;gBACb,OAAO,GAAG,gBAAgB,CAAC,GAAG,EAAE,IAAI,CAAC,IAAI,IAAI,EAAE,CAAA;aAClD;YACD,IAAI,GAAG,EAAE;gBACL,OAAO,gBAAgB,CAAC,GAAG,EAAE,IAAI,CAAC,CAAA;aACrC;YACD,OAAO,EAAE,CAAA;SACZ,CAAC;aACD,IAAI,CAAC,IAAI,CAAC,CAAA;QAEf,KAAK,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAA;KACpC;IAED,IAAI,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE;QACvB,KAAK,GAAG,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,CAAA;KACxC;IAED,IAAI;QACA,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;KACjC;IAAC,OAAO,GAAG,EAAE;QACV,QAAQ,CAAC,GAAG,CAAC,CAAA;KAChB;AACL;;SClFgB,YAAY,CAAC,KAA4B,EAAE,MAAc;IACrE,IAAI,KAAK,KAAK,IAAI,IAAI,KAAK,KAAK,SAAS,EAAE;QACvC,OAAO,IAAI,CAAA;KACd;IACD,MAAM,EAAE,GAAG,KAAe,CAAA;IAC1B,IAAI,KAAK,CAAC,IAAI,KAAK,IAAI,CAAC,YAAY,EAAE;QAClC,OAAO,iBAAiB,CAAC,EAAE,CAAY,CAAA;KAC1C;IACD,IAAI,KAAK,CAAC,IAAI,KAAK,IAAI,CAAC,SAAS,EAAE;QAC/B,IAAI,MAAM,IAAI,MAAM,CAAC,GAAG,KAAK,OAAO,EAAE;YAClC,MAAM,OAAO,GAAG,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,KAAK,CAAC,SAAS,CAAC,CAAA;YACxC,EAAE,CAAC,KAAK,GAAG,eAAe,CAAC,EAAE,CAAC,KAAK,EAAE,OAAO,CAAC,CAAA;SAChD;QACD,OAAO,UAAU,CAAC,EAAE,CAAY,CAAA;KACnC;IACD,MAAM,EAAE,GAAG,KAAc,CAAA;IACzB,MAAM,MAAM,GAAG,UAAU,CAAC,EAAE,CAAC,CAAA;IAE7B,IAAI,CAAC,EAAE,CAAC,QAAQ,IAAI,EAAE,CAAC,QAAQ,CAAC,MAAM,MAAM,MAAM,CAAC,UAAU,IAAI,MAAM,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE;QACxF,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,CAAA;KACrB;IAED,OAAO,MAAM,CAAA;AACjB,CAAC;AAED,SAAS,MAAM,CAAC,KAAY,EAAE,IAAa;IACvC,MAAM,YAAY,GAAc,EAAE,CAAA;IAClC,MAAM,aAAa,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAA;IAC5C,aAAa,CAAC,OAAO,CAAC,MAAM;QACxB,IAAI,KAAK,GAAG,YAAY,CAAC,GAAG,EAAoB,CAAA;QAChD,KAAK,GAAG,YAAY,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;QACnC,IAAI,KAAK,EAAE;YACP,IAAI,aAAa,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;gBAC/B,YAAY,CAAC,KAAoB,EAAE,OAAO,EAAE,oBAAoB,CAAC,CAAA;aACpE;YACD,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA;SAC1B;KACJ,CAAC,CAAA;AACN,CAAC;AAED,SAAS,WAAW,CAAC,KAAY,EAAE,IAAa;IAC5C,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC,KAAK,CAAA;IAC7B,IAAI,KAAK,EAAE;QACP,KAAK,MAAM,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YAC5C,IAAI,GAAG,KAAK,QAAQ,EAAE;gBAClB,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,GAAG,GAAoC,CAAA;gBAG1D,UAAU,CAAC;oBACP,IAAI,CAAC,SAAS,GAAG,GAAG,CAAA;oBACpB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAA;iBACzB,EAAE,IAAI,CAAC,CAAA;aACX;iBAAM;gBACD,IAAY,CAAC,GAAG,CAAC,GAAG,GAAG,CAAA;aAC5B;SACJ;KACJ;AACL,CAAC;AAED,SAAS,gBAAgB,CAAC,KAAY,EAAE,IAAa;IACjD,MAAM,KAAK,GAAG,aAAa,CAAC,KAAK,CAAC,CAAA;IAElC,KAAK,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;QAC7C,YAAY,CAAC,IAAmB,EAAE,IAAI,EAAE,GAAG,CAAC,CAAA;KAC/C;IACD,IAAI,KAAK,CAAC,GAAG,KAAK,GAAG,EAAE;QACnB,IAAI,CAAC,YAAY,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAA;KACxC;AACL,CAAC;AAED,SAAS,aAAa,CAAC,KAAY;IAC/B,MAAM,KAAK,qBAAQ,KAAK,CAAC,KAAK,CAAE,CAAA;IAChC,OAAO,KAAK,CAAA;AAChB,CAAC;SAEe,iBAAiB,CAAC,MAAc;IAC5C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,GAAG,MAAM,CAAA;IAElC,IAAI,MAAY,CAAA;IAEhB,QAAQ,IAAI;QACR,KAAK,IAAI,CAAC,SAAS;YACf,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,CAAA;YACvC,MAAK;QACT,KAAK,IAAI,CAAC,YAAY;YAClB,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAA;YACtC,MAAK;KACZ;IACD,SAAS,CAAC,UAAU,CAAC,EAAE,EAAE,MAAO,CAAC,CAAA;IACjC,OAAO,MAAO,CAAA;AAClB,CAAC;SAEe,UAAU,CAAC,KAAY;IACnC,MAAM,EAAE,EAAE,EAAE,KAAK,EAAE,GAAG,KAAK,CAAA;IAC3B,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAA;IACvB,IAAI,MAAe,CAAA;IACnB,MAAM,OAAO,GAAG,gBAAgB,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;IAC3C,IAAI,KAAK,EAAE;QACP,MAAM,GAAG,QAAQ,CAAC,eAAe,CAAC,4BAA4B,EAAE,OAAO,CAAC,CAAA;KAC3E;SAAM;QACH,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAA;KAC3C;IAKD,gBAAgB,CAAC,KAAK,EAAE,MAAM,CAAC,CAAA;IAC/B,WAAW,CAAC,KAAK,EAAE,MAAM,CAAC,CAAA;IAC1B,SAAS,CAAC,UAAU,CAAC,EAAE,EAAE,MAAM,CAAC,CAAA;IAChC,OAAO,MAAM,CAAA;AACjB,CAAC;AAED,SAAS,gBAAgB,CAAC,GAAW;IACjC,MAAM,MAAM,GAA8B;QAEtC,MAAM,EAAE,UAAU;QAGlB,QAAQ,EAAE,UAAU;QACpB,WAAW,EAAE,aAAa;QAC1B,YAAY,EAAE,cAAc;QAC5B,YAAY,EAAE,cAAc;QAC5B,aAAa,EAAE,eAAe;QAC9B,gBAAgB,EAAE,kBAAkB;QACpC,QAAQ,EAAE,UAAU;QACpB,OAAO,EAAE,SAAS;QAClB,aAAa,EAAE,eAAe;QAC9B,mBAAmB,EAAE,qBAAqB;QAC1C,WAAW,EAAE,aAAa;QAC1B,gBAAgB,EAAE,kBAAkB;QACpC,iBAAiB,EAAE,mBAAmB;QACtC,iBAAiB,EAAE,mBAAmB;QACtC,cAAc,EAAE,gBAAgB;QAChC,OAAO,EAAE,SAAS;QAClB,OAAO,EAAE,SAAS;QAClB,OAAO,EAAE,SAAS;QAClB,OAAO,EAAE,SAAS;QAClB,OAAO,EAAE,SAAS;QAClB,cAAc,EAAE,gBAAgB;QAChC,OAAO,EAAE,SAAS;QAClB,OAAO,EAAE,SAAS;QAClB,WAAW,EAAE,aAAa;QAC1B,YAAY,EAAE,cAAc;QAC5B,QAAQ,EAAE,UAAU;QACpB,YAAY,EAAE,cAAc;QAC5B,kBAAkB,EAAE,oBAAoB;QACxC,WAAW,EAAE,aAAa;QAC1B,MAAM,EAAE,QAAQ;QAChB,YAAY,EAAE,cAAc;QAC5B,aAAa,EAAE,eAAe;QAC9B,cAAc,EAAE,gBAAgB;QAChC,cAAc,EAAE,gBAAgB;QAChC,QAAQ,EAAE,UAAU;KACvB,CAAA;IACD,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,IAAI,GAAG,CAAA;IAClC,OAAO,OAAO,CAAA;AAClB,CAAC;AAED,SAAS,UAAU,CAAC,EAAU;IAC1B,MAAM,EAAE,KAAK,EAAE,EAAE,EAAE,GAAG,EAAE,CAAA;IACxB,MAAM,MAAM,GAAS,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,CAAA;IACnD,SAAS,CAAC,UAAU,CAAC,EAAE,EAAE,MAAM,CAAC,CAAA;IAChC,OAAO,MAAM,CAAA;AACjB,CAAC;AAED,SAAS,iBAAiB,CAAC,EAAU;IACjC,MAAM,EAAE,KAAK,EAAE,EAAE,EAAE,GAAG,EAAE,CAAA;IACxB,MAAM,MAAM,GAAS,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAA;IAClD,SAAS,CAAC,UAAU,CAAC,EAAE,EAAE,MAAM,CAAC,CAAA;IAChC,OAAO,MAAM,CAAA;AACjB;;;;SCzIgB,iBAAiB,CAAC,OAAqB;IACrD,SAAS,aAAa,CAAC,MAAoB;QACzC,OAAO,MAAM,CAAC,IAAI,KAAK,KAAK,IAAI,MAAM,CAAC,MAAM,KAAK,QAAQ,CAAA;KAC3D;IACD,SAAS,aAAa,CAAC,MAAoB;QACzC,OAAO,MAAM,CAAC,IAAI,KAAK,KAAK,IAAI,MAAM,CAAC,MAAM,KAAK,QAAQ,CAAA;KAC3D;IAED,MAAM,KAAK,GAAG;QACZ,GAAG,EAAE,EAAE;QACP,UAAU,EAAE,EAAE;QACd,UAAU,EAAE,EAAE;QACd,SAAS,EAAE,EAAE;QACb,IAAI,EAAE,EAAsB;KAC7B,CAAA;IAED,MAAM,UAAU,GAAe;QAC7B,IAAI,EAAE,EAAgB;QACtB,QAAQ,EAAE,EAAoB;QAC9B,OAAO,EAAE,EAAE;QACX,KAAK;QACL,MAAM,EAAE,EAAiB;KAC1B,CAAA;IAED,MAAM,SAAS,GAAG,IAAI,GAAG,EAAmD,CAAA;IAE5E,OAAO,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,KAAK;QAC5B,MAAM,IAAI,GAAG,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC,CAAA;QAE/B,IAAI,MAAM,CAAC,IAAI,KAAK,UAAU,CAAC,IAAI,EAAE;YACnC,IAAI,IAAI,IAAI,CAAE,IAAI,CAAC,IAA+B,CAAC,OAAO,EAAE;gBAC1D,UAAU,CAAC,IAAI,GAAG,MAAM,CAAA;aACzB;SACF;aAAM,IAAI,MAAM,CAAC,IAAI,KAAK,UAAU,CAAC,QAAQ,EAAE;YAC9C,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE;gBACxB,IAAI,UAAU,EAAE;oBACd,UAAU,CAAC,QAAQ,GAAG,MAAM,CAAA;iBAC7B;aACF;iBAAM;gBACL,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;aAChC;SACF;aAAM;YACL,QAAQ,MAAM,CAAC,IAAI;gBACjB,KAAK,UAAU,CAAC,KAAK;oBACnB,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,MAAqB,CAAA;oBACjD,IAAK,SAAuB,CAAC,GAAG,EAAE;wBAChC,MAAM,IAAI,GAAG,SAAsB,CAAA;wBACnC,UAAU,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAA;wBAC/B,UAAU,CAAC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAA;qBAC5C;yBAAM,IAAI,aAAa,CAAC,SAAyB,CAAC,EAAE;wBACnD,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,GAAI,SAA0B,CAAC,IAAI,CAAC,CAAA;qBACtE;yBAAM,IAAI,aAAa,CAAC,SAAyB,CAAC,EAAE;wBACnD,UAAU,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,GAAI,SAA0B,CAAC,IAAI,CAAC,CAAA;qBACtE;yBAAM;wBACL,UAAU,CAAC,KAAK,CAAC,IAAI,GAAI,SAA0B,CAAC,IAAI,CAAA;qBACzD;oBACD,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,MAAoB,CAAC,CAAA;oBAC7C,MAAK;gBACP,KAAK,UAAU,CAAC,KAAK;oBACnB,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,MAAqB,CAAA;oBAC5C,MAAM,EAAE,EAAE,EAAE,OAAO,EAAE,GAAG,IAAI,CAAA;oBAE5B,IAAI,CAAC,OAAO,EAAE;wBACZ,MAAK;qBACN;oBAED,MAAM,SAAS,GAAG,SAAS,CAAC,GAAG,CAAC,EAAE,CAAC,CAAA;oBACnC,IAAI,SAAS,EAAE;wBACb,SAAS,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;wBACrC,SAAS,CAAC,OAAO,GAAG,IAAI,CAAA;qBACzB;yBAAM;wBACL,MAAM,YAAY,GAAG;4BACnB,EAAE;4BACF,SAAS,EAAE,IAAI;4BACf,OAAO,EAAE,IAAI;4BACb,aAAa,EAAE,CAAC,OAAO,CAAC;yBACkB,CAAA;wBAC5C,SAAS,CAAC,GAAG,CAAC,EAAE,EAAE,YAAY,CAAC,CAAA;qBAChC;oBACD,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,MAAoB,CAAC,CAAA;oBAC7C,MAAK;aACR;YACD,IAAI,UAAU,EAAE;gBACd,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,MAAoB,CAAC,CAAA;aAC9C;SACF;KACF,CAAC,CAAA;IAEF,IAAI,SAAS,CAAC,IAAI,EAAE;QAClB,MAAM,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC;YAC3D,MAAM,EAAE,aAAa,EAAE,SAAS,EAAE,OAAO,EAAE,EAAE,EAAE,GAAG,KAAK,CAAA;YAEvD,MAAM,MAAM,GAAG,aAAa,CAAC,GAAG,CAAC,GAAG;gBAClC,MAAM,MAAM,GAAG,mBAAmB,CAAC,GAAG,CAAC,CAAA;gBACvC,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,EAAE,uBAAuB,EAAE,CAAC,CAAA;gBAClE,OAAO,IAAI,CAAA;aACZ,CAAC,CAAA;YAEF,MAAM,KAAK,GAAG,IAAI,IAAI,CAAC,MAAM,EAAE,EAAE,IAAI,EAAE,YAAY,EAAE,CAAC,CAAA;YACtD,MAAM,OAAO,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,KAAK,CAAC,CAAA;YAEjD,OAAO;gBACL,EAAE;gBACF,GAAG,EAAE,OAAO;gBACZ,SAAS;gBACT,OAAO;aACK,CAAA;SACf,CAAC,CAAA;QACF,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAA;KAClC;IAED,OAAO,UAAU,CAAA;AACnB,CAAC;SAkBe,YAAY,CAAC,OAAe;IAC1C,MAAM,MAAM,GAAG,IAAI,SAAS,EAAE,CAAA;IAC9B,MAAM,QAAQ,GAAG,MAAM,CAAC,eAAe,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAA;IAC3E,OAAO,CAAC,GAAG,QAAQ,CAAkB,CAAA;AACvC,CAAC;SAEe,QAAQ,CAAC,EAAW;IAClC,IAAI,CAAC,EAAE,EAAE;QACP,OAAO,KAAK,CAAA;KACb;IAED,OAAO,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;AACvB,CAAC;SAEe,aAAa,CAAC,CAAqB;IACjD,MAAM,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,oBAAoB,CAAiB,CAAA;IACjF,SAAS,CAAC,YAAY,CAAC,OAAO,EAAE,EAAE,CAAC,CAAA;AACrC,CAAC;AAED,SAAS,YAAY,CAAC,EAAe;IACnC,MAAM,SAAS,GAAG,EAAE,CAAC,aAAa,CAAC,oBAAoB,CAAiB,CAAA;IACxE,MAAM,GAAG,GAAG,SAAS,CAAC,aAAa,CAAC,WAAW,CAAgB,CAAA;IAC/D,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;IACzB,OAAO,GAAG,CAAA;AACZ,CAAC;SAEe,eAAe,CAAC,EAAe;;IAC7C,MAAM,SAAS,GAAG,EAAE,CAAC,aAAa,CAAC,oBAAoB,CAAgB,CAAA;IACvE,MAAA,SAAS,aAAT,SAAS,uBAAT,SAAS,CAAE,aAAa,0CAAE,WAAW,CAAC,SAAS,CAAC,CAAA;AAClD,CAAC;SAEqB,SAAS,CAAC,EAAe;;QAC7C,MAAM,GAAG,GAAG,YAAY,CAAC,EAAE,CAAC,CAAA;QAC5B,OAAO,IAAI,OAAO,CAAC,CAAC;YAClB,GAAG,CAAC,gBAAgB,CAAC,OAAO,EAAE;gBAC5B,GAAG,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;gBAC5B,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA;gBAChB,CAAC,EAAE,CAAA;aACJ,CAAA,CAAC,CAAA;SACH,CAAC,CAAA;KACH;CAAA;SAEe,eAAe,CAAC,eAAyB,EAAE,YAAoC;IAC7F,eAAe,CAAC,IAAI,EAAE,CAAA;IACtB,MAAM,OAAO,GAAG,YAAY,CAAC,OAAO,CAAA;IACpC,MAAM,GAAG,GAAG,aAAa,OAAO,CAAC,IAAI,IAAI,OAAO,CAAC,QAAQ,GAAG,SAAS,GAAG,GAAG,GAAG,OAAO,CAAC,QAAQ,GAAG,GAAG,GAAG,EAAE,IAAI,OAAO,CAAC,QAAQ,GAAG,GAAG,GAAG,OAAO,CAAC,QAAQ,GAAG,GAAG,GAAG,EAC7J,0CAA0C,CAAA;IAC5C,eAAe,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;AAC5B,CAAC;SAEe,mBAAmB,CAAC,eAAyB,EAAE,YAAoC;IACjG,MAAM,OAAO,GAAG,YAAY,CAAC,YAAY,CAAC,KAAK,CAAC,CAAA;IAChD,IAAI,OAAO,EAAE;QACX,MAAM,IAAI,GAAG,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,CAAA;QAC1C,IAAI,IAAI,EAAE;YACR,MAAM,KAAK,GAAG,YAAY,CACxB;;kBAEU,SAAS;;eAEZ,CACR,CAAC,CAAC,CAAC,CAAC,iBAAkB,CAAA;YACvB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA;SACxB;QACD,MAAM,eAAe,GAAG,eAAe,CAAC,eAAe,CAAA;QACvD,OAAO,CAAC,UAAU,GAAG,YAAY,CAAC,UAAU,CAAA;QAC5C,OAAO,CAAC,SAAS,GAAG,YAAY,CAAC,SAAS,CAAA;QAC1C,eAAe,CAAC,YAAY,CAAC,OAAO,EAAE,eAAe,CAAC,CAAA;KACvD;AACH;;ACtOA,MAAM,YAAY,GAAG,CAAC,SAAgB,EAAE,SAAgB;IACpD,IAAI,SAAS,KAAK,SAAS,EAAE;QACzB,OAAO,IAAI,CAAA;KACd;IACD,IACI,EAAE,OAAO,SAAS,KAAK,QAAQ,IAAI,SAAS,IAAI,IAAI,CAAC;QACrD,EAAE,OAAO,SAAS,KAAK,QAAQ,IAAI,SAAS,IAAI,IAAI,CAAC,EACvD;QACE,OAAO,KAAK,CAAA;KACf;IACD,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAkB,CAAA;IACrD,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAkB,CAAA;IACrD,IAAI,KAAK,CAAC,MAAM,KAAK,KAAK,CAAC,MAAM,EAAE;QAC/B,OAAO,KAAK,CAAA;KACf;IACD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACnC,IAAI,SAAS,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;YACpC,IAAI,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;gBAC7C,OAAO,KAAK,CAAA;aACf;SACJ;aAAM;YACH,OAAO,KAAK,CAAA;SACf;KACJ;IACD,OAAO,IAAI,CAAA;AACf,CAAC,CAAA;AAED,MAAM,QAAQ,GAAG,CAAC,KAAmB;IACjC,OAAO,CAAC,eAAwC;QAC5C,IAAI,KAAY,CAAA;QAChB,OAAO,CAAC,MAA8B;YAClC,MAAM,QAAQ,GAAG,MAAM,eAAe,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAA;YACxD,KAAK,CAAC,SAAS,CAAC;gBACZ,MAAM,QAAQ,GAAG,QAAQ,EAAE,CAAA;gBAC3B,IAAI,YAAY,CAAC,QAAQ,EAAE,KAAK,CAAC,EAAE;oBAC/B,OAAM;iBACT;gBACD,MAAM,EAAE,KAAK,GAAG,QAAQ,EAAE,CAAA;aAC7B,CAAC,CAAA;SACL,CAAA;KACJ,CAAA;AACL,CAAC,CAAA;AAEM,MAAM,OAAO,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAA;AAE/B,MAAM,YAAY,GAAG,CAAC,eAAyD;IAClF,OAAO,UAAU,MAAW,EAAE,WAAmB,EAAE,UAA8B;QAC7E,MAAM,cAAc,GAAG,UAAU,CAAC,KAAK,CAAA;QAEvC,UAAU,CAAC,KAAK,GAAG,UAAU,EAAa;YACtC,OAAO,CAAC,eAAe,CAAC,CAAC,KAAK;gBAC1B,cAAc,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;gBAChC,EAAE,IAAI,EAAE,CAAC,KAAK,CAAC,CAAA;aAClB,CAAC,CAAA;SACL,CAAA;KACJ,CAAA;AACL,CAAC;;MC9DqB,WAAW;IAO7B,YAAY,MAAyB,EAAE,SAAgD,EAAE;QADzF,UAAK,GAAG,CAAC,CAAA;QAEL,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;QACpB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;QAEpB,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAA;QACxD,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,GAAG,IAAI,CAAC,KAAK,CAAA;QAE1D,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,KAAK,GAAG,WAAW,CAAA;QAC7C,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,MAAM,GAAG,YAAY,CAAA;QAEhD,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAE,CAAA;KAC1C;IAID,UAAU,CAAC,CAAS,EAAE,CAAS,EAAE,CAAS,EAAE,CAAS,EAAE,CAAS,EAAE,KAAK,GAAG,MAAM;QAC5E,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;QAC/B,IAAI,CAAC,GAAG,QAAQ,GAAG,CAAC,EAAE;YAClB,CAAC,GAAG,QAAQ,GAAG,CAAC,CAAA;SACnB;QAED,IAAI,CAAC,OAAO,CAAC,SAAS,GAAG,KAAK,CAAA;QAC9B,IAAI,CAAC,OAAO,CAAC,WAAW,GAAG,KAAK,CAAA;QAEhC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAA;QACxB,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAA;QAC7B,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAA;QAC7C,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAA;QAC7C,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;QACrC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;QACrC,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAA;QAExB,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAA;QACrB,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAA;KACtB;;;MCvCQ,MAAO,SAAQ,WAAW;IACnC,YAAY,MAAyB,EAAE,MAA6C;QAChF,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAA;QACrB,IAAI,CAAC,IAAI,EAAE,CAAA;KACd;IAED,IAAI;QACA,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;QAC1B,MAAM,GAAG,GAAG,MAAM,CAAC,MAAM,CAAA;QAEzB,MAAM,UAAU,GAAG,IAAI,CAAC,WAAW,IAAI,GAAG,GAAG,CAAC,CAAC,CAAA;QAC/C,MAAM,WAAW,GAAG,IAAI,CAAC,YAAY,CAAA;QAErC,MAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CACtB,IAAI,EACJ,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAC1B,CAAA;QAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC1B,MAAM,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,CAAA;YACvB,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;gBACb,SAAQ;aACX;YACD,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,UAAU,CAAA;YAC5B,MAAM,CAAC,GAAG,CAAC,CAAA;YACX,MAAM,CAAC,GAAG,UAAU,CAAA;YACpB,MAAM,SAAS,GAAG,WAAW,GAAG,GAAG,CAAA;YACnC,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,GAAG,KAAK,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAA;YAC7D,MAAM,CAAC,GAAG,IAAI,CAAA;YACd,MAAM,KAAK,GAAG,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAA;YACpC,MAAM,CAAC,GAAG,KAAK,CAAC,QAAQ,GAAG,SAAS,GAAG,KAAK,GAAG,SAAS,CAAA;YACxD,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,GAAG,SAAS,GAAG,MAAM,CAAA;YAEjD,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAA;SACxC;KACJ;;;MCnCQ,UAAW,SAAQ,WAAW;IACvC,YAAY,MAAyB;QACjC,KAAK,CAAC,MAAM,CAAC,CAAA;QACb,IAAI,CAAC,IAAI,EAAE,CAAA;KACd;IAED,IAAI;QACA,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE;YACnB,OAAM;SACT;QACD,MAAM,MAAM,GAAG,CAAC,CAAA;QAChB,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,MAAM,EAAE,IAAI,CAAC,WAAW,GAAG,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,MAAM,CAAC,CAAA;KAChF;;;SCPW,SAAS,CAAC,IAAY,EAAE,IAAY,EAAE,IAAqC;IACzF,OAAO,UAAU,WAAqB;QACpC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC;YAC3B,cAAc,CAAC,MAAM,CACnB,IAAI,EACJ,cAAc,WAAW;gBACvB;;oBACE,KAAK,EAAE,CAAA;oBACP,MAAM,KAAK,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;oBACnC,WAAW,CAAC,SAAS,CAAC,MAAM,GAAG,KAAK,CAAA;oBAEpC,MAAM,IAAI,GAAG,KAAK,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;oBAElD,IAAI,IAAI,IAAI,CAAA,MAAA,IAAI,CAAC,QAAQ,0CAAE,MAAM,IAAG,CAAC,EAAE;wBACrC,MAAM,MAAM,GAAG,IAAI,CAAC,aAAa,CAC9B;wBAAA,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,EAAE,IAAI,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,YAAY,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,CAAA;wBACnE,MAAM,aAAN,MAAM,uBAAN,MAAM,CAAE,WAAW,CAAC,IAAI,CAAC,CAAA;qBAC1B;oBAED,IAAI,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,QAAQ,EAAE;wBAClB,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;qBAClD;yBAAM;wBACL,MAAA,IAAI,CAAC,aAAa,0CAAE,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,CAAA;qBAC9C;oBAED,WAAW,CAAC,SAAS,CAAC,MAAM,GAAG,KAAK,CAAC,aAAa,CAAA;iBACnD;aACF,CACF,CAAA;KACJ,CAAA;AACH,CAAC;AAOM,MAAM,IAAI,GAAG,UAAU,OAA6B,EAAE,GAAG,MAAW;IACzE,IAAI,GAAG,GAAG,EAAE,CAAA;IACZ,OAAO,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC;QACxB,GAAG,IAAI,MAAM,IAAI,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAA;KAClC,CAAC,CAAA;IACF,OAAO,GAAG,CAAA;AACZ,CAAC;;SC/Ce,gBAAgB,CAAC,MAAgB;IAC7C,MAAM,IAAI,GAAG,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAA+B,CAAA;IAExE,SAAS,cAAc,CAAC,CAAQ;QAC5B,CAAC,CAAC,cAAc,EAAE,CAAA;KACrB;IAED,SAAS,2BAA2B,CAAC,CAA8B;QAC/D,IAAI,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,EAAE;YACjB,cAAc,CAAC,CAAC,CAAC,CAAA;YACjB,OAAO,KAAK,CAAA;SACf;KACJ;IAGD,IAAI,eAAe,GAAG,KAAK,CAAA;IAC3B,IAAI;QACA,MAAM,CAAC,gBAAgB,CACnB,MAAa,EACb,SAAQ,EACR,MAAM,CAAC,cAAc,CAAC,EAAE,EAAE,SAAS,EAAE;YACjC,GAAG,EAAE;gBACD,eAAe,GAAG,IAAI,CAAA;aACzB;SACJ,CAAC,CACL,CAAA;KACJ;IAAC,OAAO,CAAC,EAAE,GAAE;IAEd,MAAM,QAAQ,GAAG,eAAe,GAAI,EAAE,OAAO,EAAE,KAAK,EAA2B,GAAG,KAAK,CAAA;IACvF,MAAM,UAAU,GAAG,SAAS,IAAI,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,GAAG,OAAO,GAAG,YAAY,CAAA;IAGtF,SAAS,aAAa;QAClB,MAAM,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,cAAc,EAAE,KAAK,CAAC,CAAA;QAChE,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,cAAc,EAAE,QAAQ,CAAC,CAAA;QAC7D,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,cAAc,EAAE,QAAQ,CAAC,CAAA;QAC9D,MAAM,CAAC,gBAAgB,CAAC,SAAS,EAAE,2BAA2B,EAAE,KAAK,CAAC,CAAA;KACzE;IAUD,aAAa,EAAE,CAAA;AACnB;;AC/BA,MAAM,OAAO,GAAG,0kBAA0kB,CAAA;AACnlB,MAAM,aAAa,GAAG,gCAAgC,OAAO,6DAA6D;;ACrBjI,IAAY,gBAQX;AARD,WAAY,gBAAgB;IACxB,iCAAa,CAAA;IACb,mCAAe,CAAA;IACf,iCAAa,CAAA;IACb,mCAAe,CAAA;IACf,qCAAiB,CAAA;IACjB,yCAAqB,CAAA;IACrB,iCAAa,CAAA;AACjB,CAAC,EARW,gBAAgB,KAAhB,gBAAgB;;ACU5B,IAAa,iBAAiB,GAA9B,MAAa,iBAAiB;IAQ1B,YAAY,OAA8B,EAAE,SAA6B;QACrE,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;QACtB,IAAI,CAAC,CAAC,GAAG,SAAS,CAAA;QAClB,IAAI,CAAC,IAAI,EAAE,CAAA;KACd;IAKO,gBAAgB,CAAC,KAAyB;QAC9C,IAAI,KAAK,EAAE;YACP,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;YACtB,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;SAC7B;KACJ;IAEO,IAAI;QACR,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,kBAAkB,CAAgB,CAAA;QACnF,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,gBAAgB,CAAsB,CAAA;QAE3F,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAA;QAEjD,MAAM,iBAAiB,GAAG,CAAC,CAA0D;YACjF,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,MAAM,CAAC,IAAI,KAAK,QAAQ,EAAE;gBACxC,MAAM,KAAK,GAAG,MAAM,CAAE,CAAC,CAAC,MAAsB,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAA;gBACrE,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAA;aAC3B;SACJ,CAAA;QAED,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,OAAO,EAAE,iBAAiB,EAAE,KAAK,CAAC,CAAA;QACnE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;YAC1B,IAAI,CAAC,UAAU,CAAC,mBAAmB,CAAC,OAAO,EAAE,iBAAiB,EAAE,KAAK,CAAC,CAAA;SACzE,CAAC,CAAA;QAEF,IAAI,CAAC,gBAAgB,EAAE,CAAA;QACvB,IAAI,CAAC,oBAAoB,EAAE,CAAA;KAC9B;IAED,kBAAkB,CAAC,MAAgB;QAC/B,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;QAChD,IAAI,MAAM,EAAE;YACR,MAAM,OAAO,GAAG,MAAM,CAAC,MAAM,CACzB,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,GAAG,IAAI,CAAA,8CAA8C,KAAK,KAAK,KAAK,YAAY,EAC/F,EAAE,CACL,CAAA;YAED,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,GAAG,YAAY,CAAC,OAAO,CAAC,CAAC,CAAA;SACnD;KACJ;IAEO,YAAY,CAAC,KAAK,GAAG,CAAC;QAC1B,KAAK,CAAC,QAAQ,CAAC;YACX,IAAI,EAAE,kBAAkB,CAAC,KAAK;YAC9B,IAAI,EAAE;gBACF,KAAK;aACR;SACJ,CAAC,CAAA;KACL;IAEO,oBAAoB;QACxB,MAAM,OAAO,GAAG;YACZ,IAAI,QAAQ,CAAC,eAAe,KAAK,QAAQ,EAAE;gBACvC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAA;aACvB;SACJ,CAAA;QACD,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,OAAO,EAAE,KAAK,CAAC,CAAA;QAC7D,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;YAC1B,QAAQ,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,OAAO,EAAE,KAAK,CAAC,CAAA;SACnE,CAAC,CAAA;KACL;IAEO,IAAI,CAAC,KAAa;QACtB,IAAI,KAAK,KAAK,CAAC,EAAE;YACb,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,GAAG,CAAA;YACnC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,OAAO,EAAE,wCAAwC,CAAC,CAAA;YACnF,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,OAAO,CAAC,CAAA;SAC/C;aAAM;YACH,IAAI,CAAC,cAAc,CAAC,SAAS,GAAG,GAAG,CAAA;YACnC,IAAI,CAAC,cAAc,CAAC,eAAe,CAAC,OAAO,CAAC,CAAA;YAC5C,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,OAAO,EAAE,GAAG,CAAC,CAAA;SACjD;KACJ;IAEO,QAAQ,CAAC,KAAa;QAC1B,MAAM,UAAU,GAAG,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,gBAAgB,CAAC,QAAQ,CAAkC,CAC9F;QAAA,CAAC,GAAG,UAAU,CAAC,CAAC,OAAO,CAAC,IAAI;YACzB,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,CAAA;SACnC,CAAC,CAAA;QAEF,MAAM,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC,CAAA;QAEhC,SAAS,WAAW,CAAC,KAAa;YAC9B,OAAO,CAAC,GAAG,UAAU,CAAC,CAAC,SAAS,CAAC,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,KAAK,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAA;SAC5F;QACD,IAAI,KAAK,GAAG,CAAC,CAAC,EAAE;YACZ,UAAU,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC,CAAA;SACjD;KACJ;CACJ,CAAA;AAzFG;IAHC,YAAY,CAAC,KAAK,KAAK;QACpB,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,KAAK;KAC5B,CAAC,CAAC;yDAMF;AAtBQ,iBAAiB;IAN7B,SAAS,CACN,iBAAiB,EACjB,IAAI,CAAA;;WAEG,CACV;GACY,iBAAiB,CA0G7B;;SClHe,UAAU,CAAwB,IAAoB;IAClE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAA;IAC/B,MAAM,MAAM,GAAG,IAAI,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;IAC5C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACpC,MAAM,IAAI,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAA;QACjC,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAA;KACnB;IACD,MAAM,IAAI,GAAG,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,MAAM,CAAC,CAAA;IAChD,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;IACjC,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;AAC5B;;SCVsB,WAAW,CAAC,IAAwB;;QACtD,MAAM,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,IAAI,CAAA;QACxC,MAAM,IAAI,GAAG,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,CAAA;QAClC,IAAI,CAAC,IAAI,EAAE;YACP,MAAM,KAAK,CAAC,IAAI,CAAC,CAAA;SACpB;QACD,MAAM,CAAC,GAAG,IAAmB,CAAA;QAC7B,IAAI,CAAC,IAAI,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,OAAO,KAAK,GAAG,CAAC,WAAW,EAAE,EAAE;YACrE,IAAI,GAAG,KAAK,MAAM,EAAE;gBAChB,MAAM,WAAW,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAA;gBACnD,WAAW,CAAC,YAAY,CAAC,MAAM,EAAE,UAAU,CAAC,CAAA;gBAC5C,WAAW,CAAC,YAAY,CAAC,SAAS,EAAE,GAAG,CAAC,CAAA;gBACxC,WAAW,CAAC,SAAS,GAAG,IAAI,CAAA;gBAC5B,CAAC,CAAC,WAAW,CAAC,WAAW,CAAC,CAAA;aAC7B;SACJ;KACJ;;;SChBqB,cAAc,CAAC,IAAwB;;QACzD,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,aAAa,EAAE,GAAG,IAA0B,CAAA;QACtE,MAAM,WAAW,GAAG,SAAS,CAAC,OAAO,CAAC,aAAa,CAAC,CAAA;QAEpD,IAAI,WAAW,EAAE;YACb,MAAM,OAAO,GAAG,WAAW,CAAC,aAAc,CAAC,WAAY,CAAA;YACvD,OAAO,CAAC,iBAAiB,mCAAQ,OAAO,CAAC,iBAAiB,GAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,CAAE,CAAA;SACxF;KACJ;;;SCNqB,cAAc,CAAC,IAA4B;;QAC7D,MAAM,YAAY,GAAG,IAAI,CAAA;QACzB,MAAM,EAAE,OAAO,EAAE,GAAG,YAAY,CAAA;QAEhC,IAAI,OAAO,EAAE;YACT,MAAM,UAAU,GAAG,SAAS,CAAC,OAAO,CAAC,OAAO,CAAsB,CAAA;YAClE,IAAI,UAAU,EAAE;gBACZ,MAAM,GAAG,GAAG,UAAU,CAAC,YAAY,CAAC,KAAK,CAAC,CAAA;gBAC1C,IAAI,GAAG,EAAE;oBACL,YAAY,CAAC,UAAU,EAAE,cAAc,EAAE,GAAG,CAAC,CAAA;oBAC7C,YAAY,CAAC,UAAU,EAAE,KAAK,EAAE,IAAI,CAAC,CAAA;iBACxC;gBACD,MAAM,eAAe,GAAG,UAAU,CAAC,eAAgB,CAAA;gBACnD,eAAe,CAAC,eAAe,EAAE,YAAY,CAAC,CAAA;gBAC9C,mBAAmB,CAAC,eAAe,EAAE,YAAY,CAAC,CAAA;aACrD;SACJ;KACJ;;;SClBe,YAAY,CAAwB,IAAsB;;IACtE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,GAAG,IAAI,CAAA;IAC3C,MAAM,MAAM,GAAG,EAAE,GAAI,SAAS,CAAC,OAAO,CAAC,EAAE,CAAiB,GAAG,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,eAAe,CAAA;IAE9F,IAAI,CAAC,MAAM,EAAE;QACT,OAAM;KACT;IAED,MAAM,MAAM,GAAG,MAAM,CAAC,SAAS,CAAA;IAG/B,MAAM,MAAM,GAAG,MAAM,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAA;IACxD,MAAM,QAAQ,GAAG,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,MAAM,CAAC,GAAG,MAAM,GAAG,CAAC,GAAG,MAAM,GAAG,QAAQ,CAAA;IAE7E,MAAM,IAAI,GAAG;QACT,GAAG;QACH,IAAI;QACJ,QAAQ;KACQ,CAAA;IAEpB,IAAI;QACA,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;KACtB;IAAC,OAAO,KAAK,EAAE;QAEZ,IAAI,MAAM,CAAC,QAAQ,KAAK,MAAM,EAAE;YAC5B,MAAA,MAAM,CAAC,aAAa,CAAC,WAAW,0CAAE,MAAM,CAAC,IAAI,CAAC,CAAA;SACjD;aAAM;YACH,MAAM,CAAC,UAAU,GAAG,IAAI,CAAA;YACxB,MAAM,CAAC,SAAS,GAAG,GAAG,CAAA;SACzB;KACJ;AACL;;SC/BgB,YAAY,CAAwB,IAAsB;IACtE,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,EAAE,GAAG,IAAI,CAAA;IAClC,IAAI,MAAmB,CAAA;IACvB,IAAI,EAAE,EAAE;QACJ,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,EAAE,CAAgB,CAC5C;QAAC,MAAsB,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,GAAG,IAAI,CAClD;QAAC,MAAsB,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,GAAG,IAAI,CAAA;KACxD;SAAM;QACH,MAAM,GAAG,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,IAAI,CAAA;QAC/B,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,SAAS,EAAE,MAAM,EAAE,CAAC,CAAA;KACxD;AACL;;SCXgB,WAAW,CAAwB,IAAqB;IACpE,MAAM,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,IAAI,EAAE,GAAG,IAAI,CAAA;IAE/B,IAAI,IAAI,GAAG,CAAC,EACR,GAAG,GAAG,CAAC,CAAA;IAEX,IAAI,EAAE,EAAE;QACJ,MAAM,IAAI,GAAG,SAAS,CAAC,OAAO,CAAC,EAAE,CAAgB,CAAA;QACjD,IAAI,IAAI,GAAG,EAAE,CAAA;QACb,IAAI,IAAI,IAAI,IAAI,CAAC,qBAAqB,EAAE;YACpC,IAAI,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAA;SACtC;QACD,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,OAAO,EAAE,GAAG,IAAW,CAAA;QACpD,IAAI,GAAG,QAAQ,CAAA;QACf,GAAG,GAAG,OAAO,CAAA;KAChB;IAED,IAAI,IAAI,KAAK,cAAc,CAAC,IAAI,EAAE;QAC9B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC,GAAG,GAAG,CAAC,CAAA;KACvC;SAAM,IAAI,IAAI,KAAK,cAAc,CAAC,KAAK,EAAE;QACtC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC,GAAG,GAAG,CAAC,CAAA;KACxC;AACL;;SCtBgB,YAAY,CAAC,IAA2B,EAAE,IAA6B;IACnF,MAAM,EAAE,SAAS,EAAE,GAAG,IAAI,IAAI,EAAE,CAAA;IAChC,MAAM,EAAE,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,IAA6B,CAAA;IACjF,MAAM,IAAI,GAAG,SAAS,CAAC,OAAO,CAAC,EAAE,CAAiC,CAAA;IAClE,MAAM,EAAE,IAAI,EAAE,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,OAAO,CAAA;IAEhD,IAAI,IAAI,EAAE;QACN,IAAI,QAAQ,KAAK,gBAAgB,CAAC,KAAK,IAAI,QAAQ,KAAK,gBAAgB,CAAC,MAAM,EAAE;YAC7E,IAAI,OAAO,IAAI,OAAO,CAAC,MAAM,EAAE;gBAC3B,MAAM,QAAQ,GAAG,kBAAkB,CAAC,IAAI,CAAC,KAAK,EAAE,OAAO,CAAC,CAAA;gBACxD,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAA;aACxB;iBAAM,IAAI,GAAG,EAAE;gBACV,IAAY,CAAC,GAAG,CAAC,GAAG,KAAK,CAAA;aAC9B;SACJ;aAAM,IAAI,QAAQ,KAAK,gBAAgB,CAAC,KAAK,EAAE;YAC5C,IAAI,KAAK,MAAM,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,EAAE,aAAa,EAAE,IAAI,EAAE,CAAC,CAAA;SACrF;aAAM,IAAI,QAAQ,KAAK,gBAAgB,CAAC,IAAI,EAAE;YAC3C,IAAI,KAAK,MAAM,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE,CAAA;SAC5D;aAAM,IAAI,QAAQ,KAAK,gBAAgB,CAAC,IAAI,EAAE;YAC3C,IAAI,GAAG,EAAE;gBACH,IAAY,CAAC,GAAG,CAAC,GAAG,KAAK,CAAA;aAC9B;SACJ;KACJ;AACL;;AChBA,SAAS,gBAAgB,CAAC,IAAoB,EAAE,QAAqB;IACnE,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,IAAI,CAAA;IACvC,MAAM,UAAU,GAAG,SAAS,CAAC,OAAO,CAAC,QAAS,CAAC,CAAA;IAE/C,MAAM,YAAY,GAAG,CAAC,MAAqB;QACzC,OAAO,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,CAAA;KACjD,CAAA;IAED,IAAI,UAAU,IAAI,aAAa,CAAC,UAAU,CAAC,EAAE;QAC3C,IAAI,QAAQ,GAAgB,IAAI,CAAA;QAEhC,IAAI,MAAM,EAAE;YAEV,IAAI,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;gBACxB,OAAO,IAAI,CAAA;aACZ;YAED,QAAQ,GAAG,YAAY,CAAC,MAAM,CAAC,CAAA;YAC/B,IAAI,CAAC,QAAQ,EAAE;gBACb,OAAO,IAAI,CAAA;aACZ;YAED,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE;gBAClC,OAAO,IAAI,CAAA;aACZ;SACF;QACD,MAAM,CAAC,GAAG,IAAsB,CAAA;QAEhC,IAAI,UAAuB,CAAA;QAE3B,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;YAC5B,UAAU,GAAG,SAAS,CAAC,OAAO,CAAC,IAAI,CAAE,CAAA;YAErC,IAAI,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;gBACtB,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;aACtB;SACF;aAAM,IAAI,OAAO,CAAC,CAAC,CAAC,EAAE;YACrB,UAAU,GAAG,YAAY,CAAC,CAAC,CAAC,CAAA;SAC7B;aAAM;YACL,UAAU,GAAG,iBAAiB,CAAS,CAAC,CAAC,CAAA;SAC1C;QAED,IAAI,UAAU,EAAE;YACd,UAAU,CAAC,YAAY,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAA;SAC9C;KACF;SAAM;QACL,OAAO,IAAI,CAAA;KACZ;AACH,CAAC;SAEe,SAAS,CAAC,IAAmB;IAC3C,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,YAAY,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,IAAI,CAAA;IACnE,YAAY;QACV,YAAY,CAAC,OAAO,CAAC,CAAC,IAAsB;YAC1C,MAAM,EAAE,QAAQ,EAAE,EAAE,EAAE,GAAG,IAAI,CAAA;YAC7B,MAAM,UAAU,GAAG,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAA;YAC9C,MAAM,IAAI,GAAG,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,CAAA;YAClC,IAAI,IAAI,IAAI,UAAU,IAAI,UAAU,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;gBACnD,UAAU,CAAC,WAAW,CAAC,IAAY,CAAC,CAAA;aACrC;SACF,CAAC,CAAA;IAEJ,MAAM,QAAQ,GAAgB,IAAI,GAAG,EAAE,CAAA;IACvC,MAAM,SAAS,GAAG,CAAC,UAAU,IAAI,UAAU,CAAC,KAAK,EAAE,KAAK,EAAE,CAAA;IAO1D,SAAS,CAAC,OAAO,CAAC,IAAI;QAEpB,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,MAAM,CAAC,EAAE;gBAC7C,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;aAC1B;SACF;KACF,CAAC,CAAA;IAEF,MAAM,SAAS,GAAG,SAAS;SACxB,GAAG,CAAC,IAAI;QACP,MAAM,EAAE,EAAE,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,IAAI,CAAA;QACrC,OAAO;YACL,IAAI,EAAE,EAAE;YACR,QAAQ;YACR,MAAM;SACW,CAAA;KACpB,CAAC;SACD,MAAM,CAAC,CAAC,UAAU,IAAI,UAAU,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,CAAA;IAGnD,IAAI,SAAS,EAAE;QACb,MAAM,CAAC,GAAG,SAAS,CAAC,MAAM,CAAA;QAC1B,MAAM,cAAc,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;QAClD,IAAI,WAAW,GAAG,CAAC,CAAA;QAEnB,OAAO,SAAS,CAAC,MAAM,EAAE;YACvB,MAAM,OAAO,GAAG,SAAS,CAAC,KAAK,EAAE,CAAA;YACjC,IAAI,OAAO,EAAE;gBACX,IAAI,gBAAgB,CAAC,OAAO,EAAE,QAAQ,CAAC,EAAE;oBAEvC,IAAI,WAAW,EAAE,GAAG,cAAc,EAAE;wBAClC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;qBACxB;iBACF;aACF;SACF;KACF;IAED,KAAK;QACH,KAAK,CAAC,OAAO,CAAC,CAAC,IAA0B;YACvC,MAAM,EAAE,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,IAAI,CAAA;YAC/B,MAAM,IAAI,GAAG,SAAS,CAAC,OAAO,CAAC,EAAE,CAAgB,CAAA;YAEjD,IAAI,IAAI,EAAE;gBACR,YAAY,CAAC,IAAmB,EAAE,GAAG,EAAE,KAAK,CAAC,CAAA;aAC9C;SACF,CAAC,CAAA;IAEJ,KAAK;QACH,KAAK,CAAC,OAAO,CAAC,CAAC,IAA6B;YAC1C,MAAM,EAAE,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAA;YACpC,MAAM,UAAU,GAAG,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAgB,CAAA;YAC7D,MAAM,IAAI,GAAG,SAAS,CAAC,OAAO,CAAC,EAAE,CAAgB,CAAA;YAEjD,IAAI,UAAU,IAAI,IAAI,EAAE;gBACtB,IAAI,cAAc,CAAC,IAAI,CAAC,EAAE;oBACxB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAA;oBACxB,OAAM;iBACP;gBACD,UAAU,CAAC,SAAS,GAAG,KAAK,CAAA;aAC7B;SACF,CAAC,CAAA;AACN;;SCxHsB,SAAS,CAE3B,UAAsB,EACtB,IAA4C;;QAE5C,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,IAAI,IAAI,EAAE,CAAA;QACvC,MAAM,SAAS,GAAG,SAAS,GAAG,CAAC,GAAG,GAAG,CAAA;QACrC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,UAAU,CAAA;QAGjC,MAAM,WAAW,GAAG,OAAO,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC,CAAA;QAE5E,QAAQ,IAAI;YACR,KAAK,UAAU,CAAC,QAAQ,EAAE;gBACtB,cAAc,CAAC,IAA8B,CAAC,CAAA;gBAC9C,MAAK;aACR;YAED,KAAK,UAAU,CAAC,MAAM,EAAE;gBACpB,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;gBAC7B,MAAK;aACR;YACD,KAAK,UAAU,CAAC,MAAM,EAAE;gBACpB,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;gBAC7B,MAAK;aACR;YACD,KAAK,UAAU,CAAC,KAAK,EAAE;gBACnB,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;gBAC5B,MAAK;aACR;YACD,KAAK,UAAU,CAAC,GAAG,EAAE;gBACjB,IAAI,CAAC,SAAS,IAAI,KAAK,KAAK,CAAC,EAAE;oBAC3B,MAAM,WAAW,EAAE,CAAA;iBACtB;gBACD,SAAS,CAAC,IAAqB,CAAC,CAAA;gBAChC,MAAK;aACR;YACD,KAAK,UAAU,CAAC,OAAO,EAAE;gBACrB,IAAI,CAAC,SAAS,IAAI,KAAK,KAAK,CAAC,EAAE;oBAC3B,MAAM,WAAW,EAAE,CAAA;iBACtB;gBACD,YAAY,CAAC,IAA6B,EAAE,EAAE,SAAS,EAAE,CAAC,CAAA;gBAC1D,MAAK;aACR;YACD,KAAK,UAAU,CAAC,QAAQ,EAAE;gBACtB,cAAc,CAAC,IAA0B,CAAC,CAAA;gBAC1C,MAAK;aACR;YACD,KAAK,UAAU,CAAC,IAAI,EAAE;gBAClB,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,IAAwB,CAAC,CAAA;gBAC/C,MAAK;aACR;YACD,KAAK,UAAU,CAAC,KAAK,EAAE;gBACnB,WAAW,CAAC,IAA0B,CAAC,CAAA;gBACvC,MAAK;aACR;SAIJ;KACJ;;;AC3CD,IAAa,eAAe,GAA5B,MAAa,eAAe;IA6C1B,YACE,OAA8B,EAC9B,CAAqB,EACrB,OAAyB,EACzB,QAA2B,EAC3B,WAAiC;QAvCnC,UAAK,GAAG,CAAC,CAAA;QACT,gBAAW,GAAG,CAAC,CAAA;QACf,eAAU,GAAG,CAAC,CAAA;QACd,oBAAe,GAAG,IAAI,CAAA;QAEtB,qBAAgB,GAAG,GAAG,CAAA;QAEtB,WAAM,GAAG,EAAE,CAAA;QAIX,uBAAkB,GAAG,GAAG,CAAA;QACxB,gBAAW,GAAG,CAAC,CAAA;QACf,gBAAW,GAAG,GAAG,CAAA;QAIjB,oBAAe,GAAG,CAAC,CAAA;QACnB,yBAAoB,GAAG,CAAC,CAAA;QACxB,cAAS,GAAG,CAAC,CAAA;QAGb,mBAAc,GAAG,CAAC,CAAA;QAUlB,qBAAgB,GAAG,CAAC,CAAA;QASlB,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;QACtB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAA;QACV,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;QACtB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;QACxB,IAAI,CAAC,WAAW,GAAG,WAAW,CAAA;QAC9B,IAAI,CAAC,IAAI,EAAE,CAAA;KACZ;IAKO,gBAAgB,CAAC,KAAyB;QAChD,IAAI,KAAK,EAAE;YACT,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAA;YACzB,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAA;YAC3B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAA;YAElB,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;YAE5C,IAAI,KAAK,GAAG,CAAC,EAAE;gBACb,IAAI,CAAC,IAAI,EAAE,CAAA;gBACX,IAAI,QAAQ,KAAK,CAAC,EAAE;oBAClB,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAA;iBACrC;aACF;iBAAM;gBACL,IAAI,CAAC,KAAK,EAAE,CAAA;aACb;SACF;KACF;IAKO,aAAa;QACnB,IAAI,CAAC,mBAAmB,EAAE,CAAA;QAC1B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAA;KAC5D;IAEO,mBAAmB;QACzB,QAAQ,CAAC,EAAE,CAAC,gBAAgB,CAAC,IAAI,EAAE,CAAO,KAAwD,oDAChG,OAAA,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAA,GAAA,CACvB,CAAA;KACF;IAEa,IAAI;;YAChB,IAAI,CAAC,SAAS,GAAG,IAAI,KAAK,EAAE,CAAA;YAC5B,IAAI,CAAC,UAAU,EAAE,CAAA;YACjB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAC,KAAK,CAAC,MAAM,CAAA;YAC3D,IAAI,CAAC,aAAa,EAAE,CAAA;YACpB,IAAI,CAAC,YAAY,EAAE,CAAA;YAEnB,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE;gBAE5B,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;gBACpE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,MAAM,CAAC,mBAAmB,CAAC,aAAa,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;aAC7G;iBAAM;gBACL,IAAI,CAAC,aAAa,EAAE,CAAA;gBACpB,IAAI,CAAC,gBAAgB,EAAE,CAAA;gBACvB,IAAI,CAAC,mBAAmB,EAAE,CAAA;aAC3B;YAED,QAAQ,CAAC,EAAE,CAAC,gBAAgB,CAAC,MAAM,EAAE;gBAEnC,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA;gBAChB,IAAI,CAAC,mBAAmB,EAAE,CAAA;aAC3B,CAAA,CAAC,CAAA;YAEF,QAAQ,CAAC,EAAE,CAAC,gBAAgB,CAAC,QAAQ,EAAE,CAAC,KAAa;gBACnD,MAAM,OAAO,GAAG,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;gBAChD,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAA;aAC3C,CAAC,CAAA;SACH;KAAA;IAEO,SAAS;QACf,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,OAAM;SACP;QAED,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE;YACtB,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAA;SAC/F;aAAM;YACL,MAAM,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC,SAAS,CAAA;YAEjD,IAAI,IAAI,GAA8B,SAAS,CAAA;YAC/C,MAAM,IAAI,GAAa,EAAE,CAAA;YACzB,IAAI,UAAU,CAAC,MAAM,EAAE;gBACrB,IAAI,GAAG,KAAK,CAAA;gBACZ,IAAI,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC,CAAA;aACzB;iBAAM,IAAI,UAAU,CAAC,MAAM,EAAE;gBAC5B,IAAI,GAAG,KAAK,CAAA;gBACZ,IAAI,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC,CAAA;aACzB;YAED,IAAI,CAAC,IAAI,EAAE;gBACT,OAAM;aACP;YAED,MAAM,SAAS,GAAmB,EAAE,CAAA;YACpC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACpC,MAAM,IAAI,GAAG,oBAAoB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;gBAC1C,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;aACrB;YAED,MAAM,SAAS,GACb,IAAI,KAAK,KAAK,GAAG,IAAI,IAAI,CAAC,SAAS,EAAE,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,GAAG,SAAS,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;YACzG,MAAM,YAAY,GAAG,GAAG,CAAC,eAAe,CAAC,SAAS,CAAC,CAAA;YACnD,IAAI,CAAC,YAAY,GAAG,YAAY,CAAA;SACjC;KACF;IAEO,WAAW;QACjB,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YACvC,OAAM;SACP;QAED,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK;YACvB,MAAM,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,KAAK,CAAA;YACzB,MAAM,YAAY,GAAG,SAAS,CAAC,OAAO,CAAC,EAAE,CAAC,CAAA;YAE1C,IAAI,YAAY,EAAE;gBAChB,MAAM,MAAM,GAAG,YAAgC,CAAA;gBAC/C,MAAM,CAAC,KAAK,GAAG,IAAI,CAAA;gBACnB,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,QAAQ,GAAG,KAAK,CAAA;gBACvD,MAAM,CAAC,GAAG,GAAG,GAAG,CAAA;aACjB;SACF,CAAC,CAAA;KACH;IAEO,YAAY,CAAwB,CAAc;QACxD,MAAM,MAAM,GAAG,CAAC,CAAC,MAAoB,CAAA;QACrC,IAAI,UAAU,CAAC,MAAM,CAAC,EAAE;YACtB,KAAK,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,GAAG,MAAwB,CAAA;YAC3E,IAAI,CAAC,YAAY,EAAE,CAAA;YACnB,OAAM;SACP;QACD,IAAI,CAAC,SAAS,CAAC,MAAoB,CAAC,CAAA;KACrC;IAEO,aAAa;QACnB,MAAM,EAAE,WAAW,EAAE,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAA;QACnD,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,WAAW,CAAA;QACpD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAA;QACvC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;QACtB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;QACpB,MAAM,EAAE,SAAS,EAAE,GAAG,CAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,IAAI,KAAI,EAAE,CAAA;QACtC,IAAI,QAAQ,CAAC,SAAmB,CAAC,EAAE;YACjC,IAAI,CAAC,OAAO,CAAC,WAAW,EAAE,CAAA;SAC3B;QAGD,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;YACxB,OAAM;SACP;QAED,IAAI,CAAC,cAAc,GAAG,CAAC,CAAA;QACvB,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAA;QAE5B,IAAI,CAAC,gBAAgB,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;QAC9D,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;QAE/C,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAA;QAC7B,IAAI,CAAC,eAAe,GAAG,CAAC,CAAA;QACxB,IAAI,CAAC,SAAS,GAAG,CAAC,CAAA;KACnB;IAEO,YAAY;QAClB,IAAI,CAAC,CAAC,CAAC,YAAY,EAAE,CAAA;QACrB,IAAI,CAAC,SAAS,EAAE,CAAA;QAChB,IAAI,CAAC,WAAW,EAAE,CAAA;KACnB;IAEa,IAAI,CAAC,KAAwD,EAAE,aAAa,GAAG,KAAK;;YAChG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAA;YACrB,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAA;YAC7B,IAAI,OAAO,GAA4B,SAAS,CAAA;YAChD,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAA;YACzC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,KAAK,CAAA;YAEtC,IAAI,aAAa,EAAE;gBACjB,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;gBACjB,OAAO,GAAG,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAA;gBACxC,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,CAAC,CAAA;gBACrC,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA;aACjB;YAED,MAAM,cAAc,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAA;YACpD,IAAI,CAAC,cAAc,EAAE;gBACnB,OAAM;aACP;YAED,IAAI,CAAC,aAAa,EAAE,CAAA;YAEpB,IAAI,IAAI,CAAC,SAAS,KAAK,KAAK,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,EAAE;gBACtD,MAAM,CAAC,EAAE,SAAS,EAAE,EAAE,EAAE,KAAK,EAAE,CAAC,GAAG,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,QAAQ,EAAE,KAAK,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAC,CAAA;gBAE3F,MAAM,QAAQ,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAA;gBAC1C,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;gBACpD,IAAI,CAAC,eAAe,GAAG,QAAQ,CAAA;gBAC/B,IAAI,CAAC,oBAAoB,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAA;gBACzF,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;gBACtB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC,KAAK,CAAC,CAAA;aAC5B;YAED,MAAM,UAAU,GACd,CAAC;gBACD,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC;oBACzB,MAAM,GAAG,GAAG,CAAC,CAAA;oBACb,MAAM,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,CAAA;oBAC1C,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,EAAE;wBAC/B,OAAO,IAAI,CAAA;qBACZ;iBACF,CAAC,CAAA;YAEJ,IAAI,CAAC,UAAU,GAAG,UAAU,CAAA;YAC5B,IAAI,CAAC,QAAQ,GAAG,OAAO,EAAE,CAAA;YACzB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAA;YACpB,IAAI,CAAC,SAAS,GAAG,cAAc,CAAC,KAAK,CAAA;YACrC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAA;YACrB,IAAI,CAAC,cAAc,GAAG,CAAC,CAAA;YAEvB,IAAI,OAAO,KAAK,SAAS,EAAE;gBACzB,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,OAAO,CAAC,CAAA;gBAChC,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA;aACjB;YAED,IAAI,CAAC,YAAY,EAAE,CAAA;YACnB,IAAI,CAAC,SAAS,EAAE,CAAA;YAChB,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAA;YAEnD,IAAI,OAAO,EAAE;gBACX,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA;gBAChB,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,WAAW,CAAC,OAAO,CAAC,CAAA;gBACrC,KAAK,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,kBAAkB,CAAC,KAAK,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,EAAE,CAAC,CAAA;aACpE;YAED,IAAI,CAAC,SAAS,GAAG,KAAK,CAAA;YACtB,UAAU,CAAC,OAAO,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC,EAAE,GAAG,CAAC,CAAA;SACxD;KAAA;IAEO,iBAAiB,CAAC,KAAa;QACrC,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAA;QAE7C,MAAM,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,CAAA;QAC7B,IAAI,QAAQ,EAAE;YACZ,MAAM,QAAQ,GAAG,iBAAiB,CAAC,QAAQ,CAAC,CAAA;YAC5C,KAAK,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,sBAAsB,CAAC,WAAW,EAAE,IAAI,EAAE,EAAE,WAAW,EAAE,QAAQ,EAAE,EAAE,CAAC,CAAA;YAC7F,OAAO,QAAQ,CAAA;SAChB;QACD,OAAO,IAAI,CAAA;KACZ;IAEO,gBAAgB,CAAC,QAAgB,EAAE,SAAS,GAAG,KAAK;QAC1D,IAAI,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAA;QAE3C,OAAO,QAAQ,IAAI,QAAQ,IAAI,QAAQ,EAAE;YACvC,IAAI,CAAC,SAAS,EAAE;gBACd,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;aAClF;YACD,IAAI,CAAC,UAAU,EAAE,CAAA;YACjB,IAAI,CAAC,eAAe,EAAE,CAAA;YACtB,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAA;SACxC;QACD,OAAO,QAAQ,CAAA;KAChB;IAEO,IAAI;QACV,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,EAAE;YACzB,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAA;YACzB,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE;gBACzB,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAA;gBACzB,IAAI,CAAC,aAAa,EAAE,CAAA;gBACpB,IAAI,CAAC,YAAY,EAAE,CAAA;aACpB;iBAAM;gBACL,IAAI,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAA;aAC/B;SACF;QAED,IAAI,CAAC,SAAS,EAAE,CAAA;QAChB,IAAI,CAAC,eAAe,GAAG,KAAK,CAAA;QAE5B,IAAI,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE;YAClC,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAA;SAChB;QAED,IAAI,CAAC,GAAG,GAAG,IAAI,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;QAC3D,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC,CAAA;QACpD,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAA;QAEhB,IAAI,CAAC,QAAQ,GAAG,OAAO,EAAE,CAAA;QACzB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAA;QAE7C,SAAe,IAAI,CAAwB,CAAS,EAAE,SAAiB;;gBACrE,MAAM,SAAS,GAAG,OAAO,EAAE,GAAG,IAAI,CAAC,QAAQ,CAAA;gBAC3C,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;oBAChE,IAAI,CAAC,IAAI,EAAE,CAAA;oBACX,OAAM;iBACP;gBAED,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,GAAG,SAAS,GAAG,IAAI,CAAC,KAAK,CAAA;gBACxD,MAAM,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAA;gBAEhD,IAAI,QAAQ,GAAG,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,WAAW,GAAG,CAAC,EAAE;oBAClG,MAAM,EAAE,SAAS,EAAE,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAA;oBAC/C,MAAM,KAAK,GAAG,IAAI,CAAC,SAAS,GAAG,CAAC,CAAA;oBAChC,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,SAAS,CAAC,KAAK,CAAC,CAAA;oBAChD,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,GAAG,QAAQ,EAAE,CAAC,CAAA;iBACxD;gBAED,IAAI,CAAC,WAAW,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,IAAI,CAAA;gBAErD,IAAI,CAAC,SAAS,EAAE,CAAA;gBAChB,IAAI,CAAC,UAAU,EAAE,CAAA;aAClB;SAAA;KACF;IAEO,SAAS;QACf,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,OAAM;SACP;QACD,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;YACtB,IAAI,CAAC,UAAU,EAAE,CAAA;YACjB,OAAM;SACP;QAED,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,KAAK,IAAI,CAAC,YAAY,EAAE;gBACnE,IAAI,CAAC,SAAS,CAAC,GAAG,GAAG,IAAI,CAAC,YAAY,CAAA;aACvC;YAED,IAAI,CAAC,mBAAmB,EAAE,CAAA;YAE1B,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE;gBAClB,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAA;aACtB;SACF;KACF;IAEO,SAAS;QACf,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,OAAM;SACP;QACD,MAAM,iBAAiB,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAA;QACpD,MAAM,gBAAgB,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAA;QAC5E,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,gBAAgB,GAAG,iBAAiB,CAAC,CAAA;QAC/D,MAAM,SAAS,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,CAAA;QACjD,IAAI,QAAQ,GAAG,SAAS,EAAE;YACxB,IAAI,CAAC,mBAAmB,EAAE,CAAA;SAC3B;KACF;IAEO,mBAAmB;QACzB,MAAM,WAAW,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAA;QACvE,MAAM,MAAM,GAAG,IAAI,CAAC,WAAW,GAAG,IAAI,CAAA;QACtC,IAAI,CAAC,SAAS,CAAC,WAAW,GAAG,WAAW,GAAG,MAAM,CAAA;KAClD;IAEO,UAAU;QAChB,MAAM,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAA;QACtC,MAAM,WAAW,GAAG,QAAQ,IAAI,IAAI,CAAC,WAAW,GAAG,IAAI,GAAG,IAAI,CAAC,oBAAoB,CAAC,CAAA;QACpF,MAAM,SAAS,GAAG,GAAG,CAAA;QAErB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK;YACvB,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,EAAE,EAAE,GAAG,KAAK,CAAA;YACxC,MAAM,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,EAAE,CAAqB,CAAA;YAExD,IAAI,CAAC,MAAM,EAAE;gBACX,OAAM;aACP;YAED,IAAI,WAAW,IAAI,SAAS,IAAI,WAAW,GAAG,OAAO,EAAE;gBACrD,IAAI,MAAM,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE;oBACnC,MAAM,CAAC,IAAI,EAAE,CAAA;iBACd;gBAED,MAAM,iBAAiB,GAAG,MAAM,CAAC,WAAW,CAAA;gBAC5C,MAAM,gBAAgB,GACpB,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,oBAAoB,GAAG,IAAI,GAAG,CAAC,SAAS,GAAG,QAAQ,IAAI,IAAI,CAAA;gBAErF,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,gBAAgB,GAAG,iBAAiB,CAAC,CAAA;gBAC/D,IAAI,QAAQ,GAAG,SAAS,GAAG,IAAI,EAAE;oBAC/B,MAAM,CAAC,WAAW,GAAG,gBAAgB,CAAA;iBACtC;aACF;iBAAM;gBACL,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;oBAClB,MAAM,CAAC,KAAK,EAAE,CAAA;iBACf;aACF;SACF,CAAC,CAAA;KACH;IAEO,UAAU;QAChB,IAAI,IAAI,CAAC,SAAS,EAAE;YAClB,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE,CAAA;SACvB;KACF;IAEO,WAAW;QACjB,IAAI,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YACrC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK;gBACvB,MAAM,MAAM,GAAG,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAAiC,CAAA;gBAC1E,IAAI,MAAM,EAAE;oBACV,MAAM,CAAC,KAAK,EAAE,CAAA;iBACf;aACF,CAAC,CAAA;SACH;KACF;IAEO,eAAe;QACrB,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,eAAe,CAAC,CAAA;QAEpF,IAAI,IAAgB,CAAA;QACpB,OACE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM;YACtC,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,EACnG;YACA,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;YACpB,IAAI,CAAC,WAAW,EAAE,CAAA;SACnB;QAED,IAAI,CAAC,aAAa,EAAE,CAAA;KACrB;IAEa,aAAa;;YACzB,IAAI,IAAI,CAAC,iBAAiB,EAAE;gBAC1B,OAAM;aACP;YAED,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE;gBACrD,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,SAAS,CAAA;gBAC1C,IAAI,EAAE,IAAI,EAAE,GAAG,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAA;gBAC7C,MAAM,EAAE,GAAG,EAAE,GAAG,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAA;gBAC9C,MAAM,YAAY,GAAG,WAAW,CAAC,GAAG,CAAC,CAAA;gBAErC,IAAI,IAAI,CAAC,WAAW,GAAG,YAAY,GAAG,IAAI,EAAE;oBAC1C,IAAI,CAAC,WAAW,CAAC,SAAS,EAAE,CAAA;oBAC5B,IAAI,IAAI,CAAC,cAAc,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;wBAC9C,OAAO,IAAI,EAAE;4BACX,MAAM,WAAW,GAAG,WAAW,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,GAAG,CAAC,CAAA;4BACnE,IAAI,WAAW,GAAG,IAAI,GAAG,IAAI,CAAC,WAAW,EAAE;gCACzC,MAAK;6BACN;4BACD,IAAI,CAAC,cAAc,EAAE,CAAA;yBACtB;wBACD,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,IAAI,CAAA;qBAC3C;iBACF;gBACD,IAAI,CAAC,WAAW,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;aAClC;SACF;KAAA;IAEO,KAAK,CAAC,IAAI,GAAG,IAAI;QACvB,IAAI,IAAI,CAAC,GAAG,EAAE;YACZ,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAA;SAChB;QACD,KAAK,CAAC,QAAQ,CAAC;YACb,IAAI,EAAE,kBAAkB,CAAC,KAAK;YAC9B,IAAI,EAAE;gBACJ,KAAK,EAAE,CAAC;aACT;SACF,CAAC,CAAA;QACF,IAAI,CAAC,UAAU,EAAE,CAAA;QACjB,IAAI,CAAC,WAAW,EAAE,CAAA;QAClB,IAAI,IAAI,EAAE;YACR,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAA;SACtC;KACF;IAEO,IAAI;QACV,IAAI,CAAC,KAAK,GAAG,CAAC,CAAA;QACd,IAAI,CAAC,WAAW,GAAG,CAAC,CAAA;QACpB,IAAI,CAAC,UAAU,GAAG,CAAC,CAAA;QACnB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAA;QACpB,IAAI,CAAC,KAAK,EAAE,CAAA;QACZ,IAAI,CAAC,SAAS,CAAC,WAAW,GAAG,CAAC,CAAA;QAC9B,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAA;KACrC;IAEO,SAAS,CAAC,MAAkB;QAClC,MAAM,EAAE,SAAS,EAAE,KAAK,EAAE,GAAG,IAAI,CAAA;QACjC,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAA;KACnD;IAEO,UAAU,CAAC,WAAW,GAAG,IAAI,CAAC,gBAAgB;QACpD,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,KAAK,MAAM,EAAE;YAChC,OAAO,EAAE,CAAA;SACV;QACD,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAA;QAC3D,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAA;QAClE,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAC,QAAQ,GAAG,EAAE,GAAG,IAAI,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC,CAAA;QAC1F,MAAM,QAAQ,GAAG,IAAI,CAAC,aAAa,CAAA;QACnC,MAAM,MAAM,GAAa,EAAE,CAAA;QAC3B,IAAI,cAAkC,CAAA;QACtC,KAAK,IAAI,CAAC,GAAG,SAAS,EAAE,CAAC,GAAG,OAAO,GAAG,QAAQ,EAAE,CAAC,IAAI,QAAQ,EAAE;YAC7D,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;YACd,IAAI,CAAC,cAAc,IAAI,OAAO,IAAI,CAAC,IAAI,OAAO,EAAE;gBAC9C,cAAc,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAA;aACnC;SACF;QACD,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;QACpB,IAAI,cAAc,EAAE;YAClB,IAAI,CAAC,UAAU,GAAG,cAAe,CAAA;SAClC;QACD,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;KACrB;IAEO,kBAAkB;QACxB,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;QAC1B,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;YAC9C,OAAO,EAAE,CAAA;SACV;QACD,MAAM,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAA;QAC9B,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC,UAAU,CAAA;QAClC,MAAM,EAAE,QAAQ,EAAE,GAAG,KAAK,CAAC,QAAQ,CAAA;QACnC,MAAM,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,WAAW,CAAA;QACpD,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC,CAAA;QAC1C,MAAM,GAAG,GAAG,QAAQ,GAAG,MAAM,CAAA;QAE7B,MAAM,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,OAAO;YAC3C,IAAI,KAAK,GAAG,CAAC,CAAA;YACb,IAAI,IAAI,GAAG,CAAC,CAAA;YACZ,IAAI,QAAQ,GAAG,KAAK,CAAA;YAEpB,MAAM,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;YACzC,IAAI,WAAW,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;YAEjC,OAAO,WAAW,GAAG,OAAO,IAAI,KAAK,GAAG,OAAO,CAAC,MAAM,EAAE;gBACtD,MAAM,QAAQ,GAAG,WAAW,GAAG,GAAG,CAAA;gBAClC,MAAM,MAAM,GAAG,OAAO,CAAC,KAAK,CAAC,CAAA;gBAC7B,IAAI,MAAM,CAAC,IAAI,GAAG,QAAQ,EAAE;oBAC1B,KAAK,EAAE,CAAA;oBACP,IAAI,EAAE,CAAA;oBACN,IAAI,UAAU,CAAC,MAAM,CAAC,EAAE;wBACtB,QAAQ,GAAG,IAAI,CAAA;qBAChB;oBACD,SAAQ;iBACT;gBACD,GAAG,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,CAAC,CAAA;gBAC5B,IAAI,GAAG,CAAC,CAAA;gBACR,QAAQ,GAAG,KAAK,CAAA;gBAChB,WAAW,IAAI,GAAG,CAAA;aACnB;YAED,OAAO,GAAG,CAAA;SACX,EAAE,EAA2C,CAAC,CAAA;QAE/C,OAAO,UAAU,CAAA;KAClB;IAEO,YAAY,CAAC,OAAqB;QACxC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;YACnB,OAAO,EAAE,CAAA;SACV;QAED,OAAO,CAAC,IAAI,CAAC,CAAC,CAAa,EAAE,CAAa;YACxC,OAAO,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC,IAAI,CAAA;SACvB,CAAC,CAAA;QAEF,OAAO,OAAO,CAAA;KACf;IAEO,mBAAmB;QACzB,IAAI,CAAC,UAAU,EAAE,CAAA;QACjB,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAA;KACxD;IAEO,UAAU,CAAC,OAAqB;QACtC,OAAO,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAA;KAClC;CACF,CAAA;AA7iBC;IAHC,YAAY,CAAC,KAAK,KAAK;QACtB,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,KAAK;KAC1B,CAAC,CAAC;uDAkBF;AAKD;IAHC,YAAY,CAAC,KAAK,KAAK;QACtB,OAAO,EAAE,KAAK,CAAC,QAAQ,CAAC,OAAO;KAChC,CAAC,CAAC;oDAIF;AAxFU,eAAe;IAT3B,SAAS,CACR,gBAAgB,EAChB,IAAI,CAAA;;;;;WAKK,CACV;GACY,eAAe,CA4mB3B;;ACtoBD,IAAa,gBAAgB,GAA7B,MAAa,gBAAgB;IAUzB,YAAY,CAAqB;QANzB,MAAC,GAAG,CAAC,CAAA;QACL,MAAC,GAAG,CAAC,CAAA;QAMT,IAAI,CAAC,CAAC,GAAG,CAAC,CAAA;QACV,IAAI,CAAC,WAAW,EAAE,CAAA;QAClB,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAA;KAC3B;IAEO,WAAW;QACf,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,iBAAiB,CAAgB,CAAA;KAClF;IAEO,aAAa,CAAC,IAAI,GAAG,CAAC,IAAI,CAAC,IAAI;QACnC,IAAI,CAAC,IAAI,GAAG,IAAI,CACf;QAAC,IAAI,CAAC,OAAO,CAAC,iBAAiC,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,GAAG,SAAS,GAAG,MAAM,CAAA;KAClG;IAEM,WAAW;QACd,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,IAAI,GAAG,KAAK,EAAE,CAAA;KAC1C;IAEM,IAAI,CAAC,CAAS,EAAE,CAAS;QAC5B,IAAI,CAAC,CAAC,GAAG,CAAC,CAAA;QACV,IAAI,CAAC,CAAC,GAAG,CAAC,CAAA;QACV,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAA;QACvC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,CAAC,GAAG,IAAI,CAAA;KACzC;IAEY,KAAK,CAAC,CAAS,EAAE,CAAS;;YACnC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;YACf,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,QAAQ,CAAC,EAAE;gBACrC,OAAM;aACT;YACD,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA;YAChB,YAAY,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,EAAE,EAAE,CAAC,CAAA;YACxC,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA;YAChB,YAAY,CAAC,IAAI,CAAC,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAA;SAC7C;KAAA;CACJ,CAAA;AA9CY,gBAAgB;IAV5B,SAAS,CACN,gBAAgB,EAChB,IAAI,CAAA;;;;;;WAMG,CACV;GACY,gBAAgB,CA8C5B;;ACzCD,IAAa,iBAAiB,GAA9B,MAAa,iBAAiB;IAa5B,YAAY,OAA8B,EAAE,CAAqB;QAHjE,eAAU,GAA0C,EAAE,CAAA;QAkC9C,2BAAsB,GAAG,CAAC;YAChC,MAAM,QAAQ,GAAG,IAAI,GAAG,EAAmE,CAAA;YAC3F,OAAO,UAAU,OAAe;gBAC9B,MAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAA;gBACpC,IAAI,MAAM,EAAE;oBACV,OAAO,MAAM,CAAA;iBACd;gBACD,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAA;gBACpE,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAA;gBAC7C,MAAM,IAAI,GAAG,SAAS,GAAG,QAAQ,GAAG,OAAO,CAAA;gBAE3C,MAAM,KAAK,GAAG,SAAS,CAAC,SAAS,CAAC,IAAI;oBACpC,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAA;oBAC7C,IAAI,SAAS,GAAG,QAAQ,IAAI,IAAI,IAAI,OAAO,GAAG,QAAQ,IAAI,IAAI,EAAE;wBAC9D,OAAO,IAAI,CAAA;qBACZ;iBACF,CAAC,CAAA;gBAEF,IAAI,KAAK,KAAK,SAAS,EAAE;oBACvB,MAAM,OAAO,GAAG,KAAK,CAAC,KAAK,CAAC,CAAA;oBAC5B,MAAM,QAAQ,GAAG,SAAS,CAAC,KAAK,CAAC,CAAA;oBACjC,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,QAAQ,CAAA;oBACxC,MAAM,iBAAiB,GAAG,SAAS,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,KAAK,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAA;oBACjF,MAAM,kBAAkB,GAAG,SAAS,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,IAAI,KAAK,GAAG,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAA;oBAClG,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;wBACvC,MAAM,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAA;wBACtB,MAAM,IAAI,GAAG,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;wBAC3B,IAAI,IAAI,EAAE;4BACR,IAAI,IAAI,IAAI,GAAG,CAAC,IAAI,GAAG,QAAQ,IAAI,IAAI,IAAI,IAAI,CAAC,IAAI,GAAG,QAAQ,EAAE;gCAE/D,MAAM,UAAU,GAAG,iBAAiB,GAAG,OAAO,IAAI,GAAG,CAAC,IAAI,GAAG,SAAS,CAAC,GAAG,kBAAkB,CAAA;gCAC5F,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,GAAG,QAAQ,GAAG,UAAU,CAAA;gCAC7C,MAAM,IAAI,GAAG,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,CAAA;gCACrC,QAAQ,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,CAAA;gCAC3B,OAAO,IAAI,CAAA;6BACZ;yBACF;qBACF;iBACF;gBACD,OAAO,IAAI,CAAA;aACZ,CAAA;SACF,GAAG,CAAA;QAEI,yBAAoB,GAAG,CAAC,MAAmB,KACjD,aAAa,CACX,QAAQ;YACN,MAAM,OAAO,GAAG,MAAM,QAAQ,CAAC,IAAI,CAAC,CAAA;YACpC,MAAM,QAAQ,GAAG,MAAM,QAAQ,CAAC,KAAK,CAAC,CAAA;YACtC,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAE,OAAO,EAAE,KAAK,CAAC,CAAA;YACpD,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAA;YACpD,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;gBAC5B,MAAM,CAAC,mBAAmB,CAAC,WAAW,EAAE,OAAO,EAAE,KAAK,CAAC,CAAA;gBACvD,MAAM,CAAC,mBAAmB,CAAC,UAAU,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAA;aACxD,CAAC,CAAA;SACH,EACD,KAAK,KAAK,KAAK,KAAK,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC,EACtC,KAAK,CACN,CAAA;QAvFD,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;QACtB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAA;QACV,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,kBAAkB,CAAiB,CAAA;QAC7E,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,kBAAkB,CAAiB,CAAA;QAC7E,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,eAAe,CAAgB,CAAA;QACtE,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,0BAA0B,CAAgB,CAAA;QAC7F,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,oBAAoB,CAAgB,CAAA;QAC9E,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,kBAAkB,CAAsB,CAAA;QACnF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,eAAe,CAAgB,CAAA;QACxE,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,KAAK;YAC1C,IAAI,KAAK,KAAK,IAAI,EAAE;gBAClB,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAA;gBACrC,OAAM;aACP;YACD,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAA;SACrC,CAAC,CAAA;QAEF,MAAM,MAAM,GAAG,CAAC,CAAa;YAC3B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE,CAAA;YACxE,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,WAAW,CAAC,CAAC,CAAA;YAC5D,MAAM,OAAO,GAAG,CAAC,CAAC,KAAK,GAAG,WAAW,EAAE,OAAO,CAAC,CAAC,CAAC,CAAA;YACjD,MAAM,QAAQ,GAAG,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAA;YACrD,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;SAC/C,CAAA;QACD,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM,EAAE,KAAK,CAAC,CAAA;QACtD,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;YAC5B,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAE,MAAM,EAAE,KAAK,CAAC,CAAA;SAC1D,CAAC,CAAA;KACH;IA6DM,WAAW,CAAC,UAAkB,EAAE,aAAqB,EAAE,eAAuB;QACnF,MAAM,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,OAAO,CAAA;QACxB,MAAM,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAA;QACtB,MAAM,OAAO,GAAG,CAAC,UAAU,GAAG,CAAC,IAAI,aAAa,CAAA;QAEhD,IAAI,IAAI,CAAA;QACR,IAAI,QAAQ,KAAK,cAAc,EAAE;YAC/B,IAAI,GAAG,YAAY,CAAC,OAAO,GAAG,IAAI,CAAC,CAAA;SACpC;aAAM;YACL,MAAM,EAAE,SAAS,EAAE,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAA;YAC/C,MAAM,SAAS,GAAG,SAAS,GAAG,OAAO,GAAG,eAAe,CAAA;YACvD,IAAI,GAAG,WAAW,CAAC,SAAS,CAAC,CAAA;SAC9B;QACD,IAAI,IAAI,KAAK,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE;YACjC,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAA;SAC5B;KACF;IAEM,SAAS,CAAC,OAAO,GAAG,CAAC;QAC1B,MAAM,IAAI,GAAG,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,CAAA;QAC9C,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,GAAG,IAAI,CAAA;KAC/C;IAEM,cAAc,CAAC,MAA8C;QAClE,IAAI,MAAM,EAAE;YACV,IAAI,aAAa,CAAC,IAAI,CAAC,UAAU,EAAE,MAAM,CAAC,EAAE;gBAC1C,OAAM;aACP;YACD,IAAI,CAAC,UAAU,GAAG,MAAM,CAAA;SACzB;aAAM,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;YACjC,OAAM;SACP;QAED,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE;YAC1B,IAAI,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;SAC1C;aAAM;YACL,IAAI,UAAU,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;SAC7B;QAED,SAAS,aAAa,CAAC,CAAwC,EAAE,CAAwC;YACvG,IAAI,CAAC,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM,EAAE;gBACzB,OAAO,KAAK,CAAA;aACb;YAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACjC,MAAM,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;gBAClB,MAAM,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;gBAClB,IAAI,KAAK,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI,IAAI,KAAK,CAAC,QAAQ,KAAK,KAAK,CAAC,QAAQ,EAAE;oBAClE,OAAO,KAAK,CAAA;iBACb;aACF;YACD,OAAO,IAAI,CAAA;SACZ;KACF;IAEM,mBAAmB,CAAC,OAAe;QACxC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,GAAG,OAAO,GAAG,IAAI,CAAA;KAC5E;CACF,CAAA;AAjKY,iBAAiB;IAd7B,SAAS,CACR,iBAAiB,EACjB,IAAI,CAAA;;;;;;;;;;WAUK,CACV;GACY,iBAAiB,CAiK7B;;AC1KD,IAAa,oBAAoB,GAAjC,MAAa,oBAAoB;IAO7B,YAAY,SAA6B;QACrC,IAAI,CAAC,CAAC,GAAG,SAAS,CAAA;QAClB,IAAI,CAAC,IAAI,EAAE,CAAA;KACd;IAEO,IAAI;QACR,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,qBAAqB,CAAgB,CAAA;QACvF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC,iBAAgC,CAAA;QACnE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,iBAAgC,CAAA;KACnE;IAEM,UAAU,CAAC,IAAY;QAC1B,IAAI,GAAG,IAAI,CAAC,IAAI,EAAE,CAAA;QAClB,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,EAAE,KAAK,IAAI,EAAE;YACzC,OAAM;SACT;QAED,IAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAA;QAC9B,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,CAAA;KACnD;IAEM,SAAS;QACZ,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,CAAA;KACtB;CACJ,CAAA;AA/BY,oBAAoB;IARhC,SAAS,CACN,oBAAoB,EACpB,IAAI,CAAA;;;;WAIG,CACV;GACY,oBAAoB,CA+BhC;;ACwCD,IAAa,gBAAgB,GAA7B,MAAa,gBAAgB;IAQzB,YAAY,OAA8B,EAAE,CAAqB;QAC7D,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;QACtB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAA;QACV,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,gBAAgB,CAAsB,CAAA;QACjF,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;QAErD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,CAAC,oBAAoB,CAAsB,CAAA;QACzF,IAAI,CAAC,gBAAgB,GAAI,IAAI,CAAC,CAAC,CAAC,SAAS,CAAC,UAAyB,CAAC,IAAI,CAAC,aAAc,CAAA;QAEvF,IAAI,CAAC,gBAAgB,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,MAAM,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAA;QACzF,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,OAAO,EAAE,MAAM,IAAI,CAAC,aAAa,EAAE,CAAC,CAAA;QAExE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;YAC1B,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;YACxD,IAAI,CAAC,gBAAgB,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,MAAM,IAAI,CAAC,gBAAgB,EAAE,CAAC,CAAA;YAC5F,IAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,OAAO,EAAE,MAAM,IAAI,CAAC,aAAa,EAAE,CAAC,CAAA;SAC9E,CAAC,CAAA;KACL;IAEY,MAAM;;SAElB;KAAA;IAEO,aAAa;QACjB,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,CAAA;QAChC,IAAI,CAAC,gBAAgB,CAAC,iBAAiB,EAAE,CAAC,KAAK,CAAC,GAAG;YAC/C,QAAQ,CAAC,GAAG,CAAC,CAAA;YACb,SAAS,CAAC,mFAAmF,CAAC,CAAA;SACjG,CAAC,CAAA;KACL;IAEO,gBAAgB;QACpB,IAAI,QAAQ,CAAC,UAAU,EAAE;YACrB,OAAM;SACT;QACD,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,CAAC,CAAA;KACjC;CACJ,CAAA;AA7CY,gBAAgB;IA7E5B,SAAS,CACN,gBAAgB,EAChB,IAAI,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WAyEG,CACV;GACY,gBAAgB,CA6C5B;;AC/GD,IAAa,cAAc,GAA3B,MAAa,cAAc;IAWvB,YAAY,CAAqB;QAC7B,IAAI,CAAC,CAAC,GAAG,CAAC,CAAA;QACV,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,CAAA;QACxB,IAAI,CAAC,aAAa,EAAE,CAAA;KACvB;IAEO,aAAa;QACjB,IAAI,gBAAgB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC,CAAA;QAC1C,IAAI,CAAC,QAAQ,GAAG,IAAI,iBAAiB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC,CAAA;QAC3D,IAAI,CAAC,QAAQ,GAAG,IAAI,iBAAiB,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC,CAAA;QAC3D,IAAI,CAAC,OAAO,GAAG,IAAI,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;QAC3C,IAAI,CAAC,WAAW,GAAG,IAAI,oBAAoB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;QACnD,IAAI,CAAC,MAAM,GAAG,IAAI,eAAe,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,WAAW,CAAC,CAAA;KACzG;CACJ,CAAA;AAzBY,cAAc;IAN1B,SAAS,CACN,cAAc,EACd,IAAI,CAAA;;WAEG,CACV;GACY,cAAc,CAyB1B;;ACJD,IAAa,kBAAkB,GAA/B,MAAa,kBAAkB;IAC3B;QACI,UAAU,CAAC,SAAQ,CAAC,CAAA;KACvB;CACJ,CAAA;AAJY,kBAAkB;IAnC9B,SAAS,CACN,mBAAmB,EACnB,IAAI,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WA+BG,CACV;GACY,kBAAkB,CAI9B;;;;;;MC9BY,kBAAkB;IAU3B,YAAY,OAA8B;QACtC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;QACtB,IAAI,CAAC,IAAI,EAAE,CAAA;KACd;IAEO,IAAI;QACR,MAAM,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAA;QAClC,MAAM,aAAa,GAAG,OAAO,MAAM,KAAK,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,MAAM,CAAC,GAAG,MAAM,CAAA;QAC1F,IAAI,CAAC,MAAM,GAAG,aAA4B,CAAA;QAC1C,IAAI,CAAC,YAAY,EAAE,CAAA;QACnB,IAAI,CAAC,WAAW,EAAE,CAAA;QAClB,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,CAAC,gBAAgB,EAAE,CAAA;QAC1C,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;QACpB,IAAI,CAAC,SAAS,EAAE,CAAA;KACnB;IAEO,SAAS;QACb,IAAI,CAAC,KAAK,GAAG,IAAI,cAAc,CAAC,IAAI,CAAC,CAAA;QACrC,IAAI,kBAAkB,EAAE,CAAA;KAC3B;IAEO,WAAW;QACf,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,iBAAiB,CAAsB,CAAA;QACnF,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,eAAgB,CAAA;QAC/C,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,aAAc,CAAC,CAAA;QACjD,eAAe,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,iBAAiB,EAAE,CAAC,CAAA;QAC1D,IAAI,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE;YAC/B,gBAAgB,CAAC,IAAI,CAAC,OAAO,CAAC,aAAc,CAAC,QAAQ,CAAC,CAAA;SACzD;QACD,IAAI,CAAC,YAAY,EAAE,CAAA;KACtB;IAEO,iBAAiB;QACrB,OAAO,KAAK,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAC,WAAW,CAAC,QAAQ,CAAC,IAE5C,CAAA;KACf;IAGO,eAAe,CAAC,OAAe;QACnC,YAAY,CAAC,QAAQ,EAAE,CAAA;QACvB,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAA;QACpD,OAAO,CAAC,WAAW,CAAC,SAAS,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAA;KAC3D;IAEM,YAAY;QACf,SAAS,CAAC,KAAK,EAAE,CAAA;QACjB,MAAM,UAAU,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAA;QAC3C,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,SAAS,CAAC,UAAU,CAAC,IAAI,CAAQ,CAAA;QAClE,MAAM,GAAG,GAAG,IAAI,CAAC,UAAU,CAAA;QAC3B,MAAM,OAAO,GAAG,GAAG,CAAC,WAAqB,CAAA;QACzC,OAAO,CAAC,iBAAiB,oCAAS,OAAO,CAAC,iBAAiB,IAAI,EAAE,IAAM,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,CAAE,CAAA;QACvG,mBAAmB,CAAC,IAAI,CAAC,UAAU,EAAE,UAAU,CAAC,CAAA;KACnD;IAEO,YAAY;QAChB,MAAM,aAAa,GACf,IAAI,CAAC,MAAM,YAAY,MAAM,GAAI,IAAI,CAAC,MAAiB,CAAC,QAAQ,CAAC,IAAI,GAAI,IAAI,CAAC,MAAsB,CAAA;QAExG,MAAM,UAAU,GAAG,YAAY,CAAC,IAAI,CAAA,uCAAuC,CAAC,CAAC,CAAC,CAAC,CAAA;QAC/E,aAAa,CAAC,WAAW,CAAC,UAAU,CAAC,CAAA;QAErC,MAAM,MAAM,GAAG,UAAU,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAA;QACxD,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,YAAY,EAAE,GAAG,CAAC,CAAC,CAAA;QACvD,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,eAAe,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC,CAAA;QAC7D,IAAI,CAAC,UAAU,GAAG,UAAU,CAAA;KAC/B;IAEO,eAAe,CAAC,SAAiB,EAAE,IAAY;QACnD,MAAM,MAAM,GAAG,IAAI,SAAS,EAAE,CAAA;QAC9B,MAAM,EAAE,GAAG,MAAM,CAAC,eAAe,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC,IAAI,CAAC,UAAyB,CAAA;QACnF,EAAE,CAAC,SAAS,GAAG,SAAS,CAAA;QACxB,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC,KAAK,GAAG,IAAI,CAAA;QACtD,EAAE,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC,MAAM,GAAG,IAAI,CAAA;QACxD,EAAE,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAA;QACzB,QAAQ,IAAI,CAAC,SAAS,GAAG,EAAE,EAAC;KAC/B;IAEO,gBAAgB;QACpB,MAAM,IAAI,GAAG,IAAI,CAAA;QACjB,MAAM,gBAAgB,GAAG,QAAQ,CAAC,YAAY,EAAE,GAAG,CAAC,CAAA;QAEpD,MAAM,UAAU,GAAG,MAAM,gBAAgB,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,MAAqB,EAAW,CAAC,CAAA;QAC1F,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,UAAU,EAAE,IAAI,CAAC,CAAA;QAEnD,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,UAAU,EAAE,IAAI,CAAC,CAAC,CAAA;QAE3F,UAAU,CAAC,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC,CAAC,CAAA;QACtD,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAA;QAEtC,IAAI,SAAS,GAAG,CAAC,CAAA;QAEjB,aAAa,EAAE,CAAA;QAEf,SAAS,aAAa,CAAC,OAA4E;YAC/F,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,OAAO,IAAI,EAAE,CAAA;YACvD,YAAY,CAAE,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAuB,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAA;SAC7F;QAED,SAAe,YAAY,CAAC,CAAS,EAAE,QAAiB,EAAE,SAAkB,EAAE,QAAQ,GAAG,CAAC;;gBACtF,IAAI,CAAC,CAAC,EAAE;oBACJ,OAAM;iBACT;gBACD,MAAM,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,EAAE,YAAY,EAAE,GAAG,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAA;gBAEhF,QAAQ,GAAG,QAAQ,IAAI,WAAW,CAAA;gBAClC,SAAS,GAAG,SAAS,IAAI,YAAY,CAAA;gBAErC,QAAQ,QAAQ;oBACZ,KAAK,CAAC;wBACF,SAAS,GAAG,CAAC,CAAA;wBACb,MAAK;oBACT,KAAK,GAAG;wBACJ,SAAS,GAAG,GAAG,CAAA;wBACf,MAAK;iBACZ;gBAED,MAAM,WAAW,GAAG,SAAS,IAAI,QAAQ,CAAA;gBAEzC,IAAI,CAAC,CAAC,MAAM,YAAY,MAAM,EAAE;oBAC5B,MAAM,EAAE,UAAU,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,MAAM,CAAA;oBAClD,UAAU,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,WAAW,CAAC,CAAA;iBACrE;qBAAM;oBACH,MAAM,EAAE,WAAW,EAAE,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,GAAG,CAAC,CAAC,MAAqB,CAAA;oBACnE,UAAU,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,WAAW,CAAC,CAAA;iBACrE;aACJ;SAAA;QAED,SAAS,UAAU,CACf,MAAmB,EACnB,QAAgB,EAChB,SAAiB,EACjB,QAAgB,EAChB,SAAiB,EACjB,WAAmB;YAEnB,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM,CAAC,OAAO,IAAI,EAAE,CAAA;YAElE,MAAM,WAAW,GAAG,UAAU,KAAK,MAAM,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAA;YAEtD,MAAM,MAAM,GAAG,QAAQ,GAAG,QAAQ,CAAA;YAClC,MAAM,MAAM,GAAG,SAAS,IAAI,SAAS,GAAG,WAAW,CAAC,CAAA;YAGpD,MAAM,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,GAAG,MAAM,GAAG,MAAM,GAAG,MAAM,EAAE,WAAW,IAAI,CAAC,CAAC,CAAA;YAE3E,MAAM,IAAI,GAAG,CAAC,QAAQ,GAAG,KAAK,GAAG,QAAQ,IAAI,CAAC,GAAG,CAAC,QAAQ,GAAG,QAAQ,GAAG,KAAK,IAAI,CAAC,CAAA;YAElF,MAAM,GAAG,GAAG,CAAC,SAAS,GAAG,SAAS,GAAG,WAAW,GAAG,KAAK,IAAI,CAAC,CAAA;YAE7D,MAAM,CAAC,KAAK,CAAC,SAAS,GAAG,SAAS,KAAK,GAAG,CAAA;YAC1C,MAAM,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAA;YAC/B,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAA;YAE7B,MAAM,YAAY,GAAG,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;YACjD,MAAM,aAAa,GAAG,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;YAEnD,IAAI,QAAQ,KAAK,YAAY,IAAI,SAAS,KAAK,aAAa,EAAE;gBAC1D,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,QAAQ,GAAG,IAAI,CAAA;gBACpC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,GAAG,IAAI,CAAA;gBACtC,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAA;aACzC;SACJ;QAED,SAAS,WAAW,CAAC,MAAmB;YACpC,OAAO;gBACH,KAAK,EAAE,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,EAAE,EAAE,CAAC;gBACvC,MAAM,EAAE,QAAQ,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC;aAC5C,CAAA;SACJ;QAED,OAAO;YACH,MAAM,EAAE,aAAa;SACxB,CAAA;KACJ;IAEO,WAAW,CAAC,EAAU,EAAE,CAAS;QACrC,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAA;QAC7C,KAAK,CAAC,EAAE,GAAG,EAAE,CAAA;QACb,KAAK,CAAC,SAAS,GAAG,CAAC,CAAA;QACnB,OAAO,KAAK,CAAA;KACf;;;AC1KL,MAAM,oBAAoB,GAAG;IAC3B,QAAQ,EAAE,IAAI;IACd,IAAI,EAAE,SAAS;IACf,MAAM,EAAE,MAAM;IACd,UAAU,EAAE,IAAI;IAChB,QAAQ,EAAE,cAAc;IACxB,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;IACnB,gBAAgB,EAAE,IAAI;CACvB,CAAA;MAEY,MAAM;IAIjB,YAAY,OAAuB;QAHnC,OAAE,GAAkD,WAAW,CAAA;QAC/D,YAAO,GAAe,WAAW,CAAA;QACjC,WAAM,GAAoC,WAAW,CAAA;QAEnD,MAAM,MAAM,GAAG,IAAI,YAAY,CAAC,OAAO,CAAC,CAAA;QACxC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,GAAiB,MAAM,IAAI,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAA;KACzF;CACF;MAEY,YAAY;IAKvB,YAAY,OAAuB;QAFnC,iBAAY,GAAG,IAAI,GAAG,EAAY,CAAA;QAgJ1B,wBAAmB,GAAG,QAAQ,CAAC,MAAM,IAAI,CAAC,YAAY,EAAE,EAAE,GAAG,CAAC,CAAA;QA7IpE,SAAS,CAAC,KAAK,EAAE,CAAA;QACjB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;KACnB;IAEa,IAAI,CAAC,OAAuB;;YAC5B;gBACV,OAAO,EAAE,CAAA;aACV;YACD,MAAM,IAAI,GAAG,8BACX,YAAY,EAAE,IAAI,CAAC,YAAY,IAC5B,oBAAoB,GACpB,OAAO,CACc,CAAA;YAE1B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAA;YACnB,KAAK,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,kBAAkB,CAAC,OAAO,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE,CAAC,CAAA;YAC7E,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,KAAK,CAAC,WAAW,EAAE,CAAC,CAAA;YAEhD,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;YAC3C,MAAM,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAA;YAC/B,MAAM,SAAS,GAAG,iBAAiB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;YAE7C,MAAM,EAAE,KAAK,EAAE,GAAG,SAAS,CAAA;YAC3B,KAAK,CAAC,QAAQ,CAAC;gBACb,IAAI,EAAE,sBAAsB,CAAC,WAAW;gBACxC,IAAI,EAAE,EAAE,OAAO,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE;aACjD,CAAC,CAAA;YAEF,MAAM,QAAQ,GAAG,KAAK,KAAK,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,UAAU,CAAC,MAAM,IAAI,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;YAE5F,IAAI,CAAC,CAAC,GAAG,IAAI,kBAAkB,CAAC,IAAI,CAAC,CAAA;YACrC,MAAM,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC,SAAS,CAAA;YAClC,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACtB,CAAC,IAAI,CAAC,GAAG,GAAG,IAAI,GAAG,EAAE,EAAE,KAAK,CAAC;gBAC3B,IAAI,QAAQ,EAAE;oBACZ,MAAM,SAAS,CAAC,SAAS,CAAC,CAAA;iBAC3B;gBACD,eAAe,CAAC,SAAS,CAAC,CAAA;gBAC1B,IAAI,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,EAAE;oBACnC,KAAK,CAAC,QAAQ,CAAC;wBACb,IAAI,EAAE,kBAAkB,CAAC,KAAK;wBAC9B,IAAI,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE;qBACnB,CAAC,CAAA;iBACH;aACF,CAAA,CAAC,CAAC;YAEH,IAAI,KAAK,CAAC,MAAM,EAAE;gBAChB,IAAI,CAAC,YAAY,EAAE,CAAA;aACpB;YAED,IAAI,OAAO,CAAC,MAAM,IAAI,CAAC,EAAE;gBAEvB,KAAK,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,kBAAkB,CAAC,OAAO,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC,CAAA;gBACzF,MAAM,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAA;gBACjC,IAAI,KAAK,EAAE;oBACT,KAAK,CAAC,YAAY,CAAC,OAAO,EAAE,eAAe,CAAC,CAAA;iBAC7C;aACF;SACF;KAAA;IAEa,UAAU,CAAC,OAA8B;;YACrD,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,WAAW,EAAE,GAAG,OAAO,CAAA;YAClD,MAAM,OAAO,GAAG,WAAW,KAAK,QAAQ,KAAK,MAAM,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;YAEhF,IAAI,CAAC,OAAO,EAAE;gBACZ,MAAM,QAAQ,CAAC,uBAAuB,CAAC,CAAA;aACxC;YAED,OAAO,OAAO,CAAA;SACf;KAAA;IAEO,YAAY;QAClB,MAAM,EAAE,KAAK,EAAE,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,UAAU,CAAA;QAC7C,MAAM,SAAS,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;QAElC,IAAI,QAAQ,GAAG,CAAC,CAAA;QAChB,MAAM,SAAS,GAKT,EAAE,CAAA;QACR,IAAI,QAAQ,GAAG,CAAC,CAAA;QAChB,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK;YACxB,MAAM,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;YAC9B,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;YACtC,IAAI,KAAK,EAAE;gBACT,QAAQ,IAAI,SAAS,GAAG,KAAK,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAA;aAC3D;YACD,MAAM,IAAI,GAAG;gBACX,SAAS;gBACT,OAAO;gBACP,QAAQ,EAAE,OAAO,GAAG,SAAS;gBAC7B,QAAQ;aACT,CAAA;YACD,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;YACpB,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAA;SAC1B,CAAC,CAAA;QACF,MAAM,OAAO,GAAG,SAAS,GAAG,QAAQ,CAAA;QAEpC,KAAK,CAAC,QAAQ,CAAC;YACb,IAAI,EAAE,oBAAoB,CAAC,QAAQ;YACnC,IAAI,EAAE;gBACJ,QAAQ;gBACR,SAAS;gBACT,SAAS;gBACT,OAAO;aACR;SACF,CAAC,CAAA;KACH;IAEO,aAAa,CAAC,IAAY,EAAE,IAAgB;QAClD,MAAM,KAAK,GAAG,IAAI,WAAW,CAAC,IAAI,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAA;QACrD,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAA;KAC5B;IAEa,YAAY,CAAC,QAAsD;;YAC/E,IAAI,UAAmB,CAAA;YACvB,IAAI,IAAgB,CAAA;YACpB,IAAI,QAAwB,CAAA;YAC5B,OAAO,MAAM,IAAI,OAAO,CAAC,OAAO;gBAC9B,QAAQ,CAAC,IAAI;oBACX,IAAI,UAAU,EAAE;wBACd,IAAI,CAAC,aAAa,CAAC,aAAa,EAAE,IAAkB,CAAC,CAAA;qBACtD;yBAAM;wBACL,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,IAAI,EAAE;4BACjC,IAAI,GAAG,IAAI,CAAA;yBACZ;6BAAM,IAAI,IAAI,CAAC,IAAI,KAAK,UAAU,CAAC,QAAQ,EAAE;4BAC5C,QAAQ,GAAG,IAAI,CAAA;yBAChB;wBAED,IAAI,IAAI,IAAI,QAAQ,EAAE;4BACpB,UAAU,GAAG,IAAI,CAAA;4BACjB,OAAO,CAAC,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAA;4BACzB,IAAI,CAAC,aAAa,CAAC,aAAa,EAAE,IAAkB,CAAC,CAAA;yBACtD;qBACF;iBACF,CAAC,CAAA;aACH,CAAC,CAAA;SACH;KAAA;IAIK,OAAO,CAAC,OAA+B,EAAE,SAAS,EAAE,IAAI,EAAE;;;YAC9D,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,EAAE,CAAC,CAAA;YACrC,QAAQ,CAAC,OAAO,EAAE,CAAA;YAClB,KAAK,CAAC,WAAW,EAAE,CAAA;YACnB,MAAM,KAAK,CAAC,CAAC,CAAC,CAAA;YACd,qBAAqB,EAAE,CAAA;YACvB,IAAI,IAAI,CAAC,SAAS,EAAE;gBAClB,MAAM,UAAU,GAAG,IAAI,CAAC,CAAC,CAAC,UAAU,CAAA;gBACpC,MAAA,IAAI,CAAC,CAAC,CAAC,UAAU,CAAC,aAAa,0CAAE,WAAW,CAAC,UAAU,CAAC,CAAA;aACzD;;KACF;IAEM,EAAE,CAAC,GAAqB,EAAE,EAAY;QAC3C,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,CAAA;KACrB;IAEY,MAAM,CAAC,OAAqB;;YACvC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAA;YACd,KAAK,CAAC,QAAQ,CAAC;gBACb,IAAI,EAAE,sBAAsB,CAAC,cAAc;gBAC3C,IAAI,EAAE,EAAE,OAAO,EAAE;aAClB,CAAC,CAAA;YAEF,IAAI,CAAC,mBAAmB,EAAE,CAAA;SAC3B;KAAA;;;;;"}