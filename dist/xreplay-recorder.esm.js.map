{"version":3,"file":"xreplay-recorder.esm.js","sources":["../recorder/events.ts","../recorder/watcher.ts","../recorder/watchers/dom.ts","../recorder/finder.ts","../recorder/form.ts","../recorder/watchers/form.ts","../recorder/watchers/keyboard.ts","../recorder/watchers/location.ts","../recorder/watchers/mouse.ts","../recorder/watchers/scroll.ts","../recorder/watchers/window.ts","../recorder/watchers/index.ts","../recorder/recorder.ts"],"sourcesContent":["export class EventEmitter {\n  listeners: any = {}\n  on(type: string, handler: any) {\n    this.listeners[type] = this.listeners[type] || [];\n    this.listeners[type].push(handler);\n    return this;\n  }\n  emit(type: string, data: any) {\n    console.log(type, data);\n    for (const fn of this.listeners[type] || []) {\n      fn.call(this, data);\n    }\n  }\n}","import { EventEmitter } from \"./events\"\n\ntype Procedure = (...args: any[]) => void\n\ntype Options = {\n  isImmediate?: boolean\n  // not standard\n  isTrailing?: boolean\n}\n\nexport function debounce<F extends Procedure>(\n  func: F,\n  waitMilliseconds: number,\n  options: Options = {\n    isImmediate: false,\n    isTrailing: false\n  }\n): (this: ThisParameterType<F>, ...args: Parameters<F>) => void {\n  let timeoutId: ReturnType<typeof setTimeout> | undefined\n\n  return function (this: ThisParameterType<F>, ...args: Parameters<F>) {\n    const context = this\n    const doLater = function () {\n      timeoutId = undefined\n      if (!options.isImmediate || options.isTrailing) {\n        func.apply(context, args)\n      }\n    }\n    const shouldCallNow = options.isImmediate && timeoutId === undefined\n    if (timeoutId !== undefined) {\n      clearTimeout(timeoutId)\n    }\n    timeoutId = setTimeout(doLater, waitMilliseconds)\n    if (shouldCallNow) {\n      func.apply(context, args)\n    }\n  }\n}\n\nexport function throttle(func: Function, wait: number, options: { leading?: boolean; trailing?: boolean } = {}): any {\n  let context: any\n  let args: any\n  let result: any\n  let timeout: any = null\n  let previous = 0\n\n  const later = function () {\n    previous = options.leading === false ? 0 : Date.now()\n    timeout = null\n    result = func.apply(context, args)\n    if (!timeout) context = args = null\n  }\n  return function (this: any) {\n    const now = Date.now()\n    if (!previous && options.leading === false) previous = now\n    const remaining = wait - (now - previous)\n    context = this\n    args = arguments\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout)\n        timeout = null\n      }\n      previous = now\n      result = func.apply(context, args)\n      if (!timeout) context = args = null\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining)\n    }\n    return result\n  }\n}\n\nexport class Watcher extends EventEmitter {\n  running = false\n  start() {\n    this.running = true;\n  }\n  stop() {\n    this.running = false;\n  }\n  install(options: any) {\n    throw new Error();\n  }\n  report(type: string, data: any) {\n    if (!this.running) return;\n    const timestamp = Date.now();\n    return this.emit('record', { type, data, timestamp });\n  }\n  registerUninstall(fn: any) {\n    return this.on('uninstall', fn);\n  }\n  uninstall() {\n    const hooks = this.listeners['uninstall'];\n    hooks.forEach((fn: any) => fn());\n  }\n  public registerEvent(options: {\n    context: Window\n    eventTypes: string[]\n    handleFn: (...args: any[]) => void\n    listenerOptions: AddEventListenerOptions\n    type: 'throttle' | 'debounce'\n    optimizeOptions?: { [key: string]: boolean }\n    waitTime: number\n  }) {\n    const { context, eventTypes, handleFn, listenerOptions, type, optimizeOptions, waitTime } = options\n    let listenerHandle: any;\n    switch (type) {\n      case 'debounce':\n        listenerHandle = debounce;\n        break;\n      case 'throttle':\n        listenerHandle = throttle;\n        break;\n    }\n    eventTypes\n      .map(type => (fn: (e: Event) => void) => {\n        context.addEventListener(type, fn, listenerOptions)\n      })\n      .forEach(handle => handle(listenerHandle(handleFn, waitTime, optimizeOptions)))\n\n    this.registerUninstall(() => {\n      eventTypes.forEach(type => {\n        context.removeEventListener(type, listenerHandle, listenerOptions)\n      })\n    })\n  }\n}","import { Watcher } from \"../watcher\";\n\nexport class DOMWatcher extends Watcher {\n  install({ context }: any) {\n    const observer = new MutationObserver((records) => {\n      // console.log('records', records);\n      for (const record of records) {\n        const { target, addedNodes, removedNodes, type, attributeName, oldValue } = record\n        switch (type) {\n          case 'attributes':\n            console.log(type, { key: attributeName!, node: target, oldValue });\n            break\n          case 'characterData':\n            console.log(type, target);\n            break\n          case 'childList':\n            console.log(type, addedNodes, removedNodes);\n            break\n          default:\n            break\n        }\n      }\n    });\n    observer.observe(context.document.documentElement, {\n      attributeOldValue: true,\n      attributes: true,\n      characterData: true,\n      characterDataOldValue: true,\n      childList: true,\n      subtree: true\n    })\n    this.registerUninstall(() => observer.disconnect());\n  }\n}","type Node = {\n  name: string;\n  penalty: number;\n  level?: number;\n};\n\ntype Path = Node[];\n\nenum Limit {\n  All,\n  Two,\n  One,\n}\n\nexport type Options = {\n  root: Element;\n  idName: (name: string) => boolean;\n  className: (name: string) => boolean;\n  tagName: (name: string) => boolean;\n  attr: (name: string, value: string) => boolean;\n  seedMinLength: number;\n  optimizedMinLength: number;\n  threshold: number;\n  maxNumberOfTries: number;\n};\n\nlet config: Options;\n\nlet rootDocument: Document | Element;\nexport function finder(input: Element, options?: Partial<Options>) {\n  if (input.nodeType !== Node.ELEMENT_NODE) {\n    console.error(input);\n    throw new Error(`Can't generate CSS selector for non-element node type.`);\n  }\n\n  if (\"html\" === input.tagName.toLowerCase()) {\n    return \"html\";\n  }\n\n  const defaults: Options = {\n    root: document.body,\n    idName: (name: string) => true,\n    className: (name: string) => true,\n    tagName: (name: string) => true,\n    attr: (name: string, value: string) => false,\n    seedMinLength: 1,\n    optimizedMinLength: 2,\n    threshold: 1000,\n    maxNumberOfTries: 10000,\n  };\n\n  config = { ...defaults, ...options };\n\n  rootDocument = findRootDocument(config.root, defaults);\n\n  let path = bottomUpSearch(input, Limit.All, () =>\n    bottomUpSearch(input, Limit.Two, () => bottomUpSearch(input, Limit.One))\n  );\n\n  if (path) {\n    const optimized = sort(optimize(path, input));\n\n    if (optimized.length > 0) {\n      path = optimized[0];\n    }\n\n    return selector(path);\n  } else {\n    throw new Error(`Selector was not found.`);\n  }\n}\n\nfunction findRootDocument(rootNode: Element | Document, defaults: Options) {\n  if (rootNode.nodeType === Node.DOCUMENT_NODE) {\n    return rootNode;\n  }\n  if (rootNode === defaults.root) {\n    return rootNode.ownerDocument as Document;\n  }\n  return rootNode;\n}\n\nfunction bottomUpSearch(\n  input: Element,\n  limit: Limit,\n  fallback?: () => Path | null\n): Path | null {\n  let path: Path | null = null;\n  let stack: Node[][] = [];\n  let current: Element | null = input;\n  let i = 0;\n\n  while (current && current !== config.root.parentElement) {\n    let level: Node[] = maybe(id(current)) ||\n      maybe(...attr(current)) ||\n      maybe(...classNames(current)) ||\n      maybe(tagName(current)) || [any()];\n\n    const nth = index(current);\n\n    if (limit === Limit.All) {\n      if (nth) {\n        level = level.concat(\n          level.filter(dispensableNth).map((node) => nthChild(node, nth))\n        );\n      }\n    } else if (limit === Limit.Two) {\n      level = level.slice(0, 1);\n\n      if (nth) {\n        level = level.concat(\n          level.filter(dispensableNth).map((node) => nthChild(node, nth))\n        );\n      }\n    } else if (limit === Limit.One) {\n      const [node] = (level = level.slice(0, 1));\n\n      if (nth && dispensableNth(node)) {\n        level = [nthChild(node, nth)];\n      }\n    }\n\n    for (let node of level) {\n      node.level = i;\n    }\n\n    stack.push(level);\n\n    if (stack.length >= config.seedMinLength) {\n      path = findUniquePath(stack, fallback);\n      if (path) {\n        break;\n      }\n    }\n\n    current = current.parentElement;\n    i++;\n  }\n\n  if (!path) {\n    path = findUniquePath(stack, fallback);\n  }\n\n  return path;\n}\n\nfunction findUniquePath(\n  stack: Node[][],\n  fallback?: () => Path | null\n): Path | null {\n  const paths = sort(combinations(stack));\n\n  if (paths.length > config.threshold) {\n    return fallback ? fallback() : null;\n  }\n\n  for (let candidate of paths) {\n    if (unique(candidate)) {\n      return candidate;\n    }\n  }\n\n  return null;\n}\n\nfunction selector(path: Path): string {\n  let node = path[0];\n  let query = node.name;\n  for (let i = 1; i < path.length; i++) {\n    const level = path[i].level || 0;\n\n    if (node.level === level - 1) {\n      query = `${path[i].name} > ${query}`;\n    } else {\n      query = `${path[i].name} ${query}`;\n    }\n\n    node = path[i];\n  }\n  return query;\n}\n\nfunction penalty(path: Path): number {\n  return path.map((node) => node.penalty).reduce((acc, i) => acc + i, 0);\n}\n\nfunction unique(path: Path) {\n  switch (rootDocument.querySelectorAll(selector(path)).length) {\n    case 0:\n      throw new Error(\n        `Can't select any node with this selector: ${selector(path)}`\n      );\n    case 1:\n      return true;\n    default:\n      return false;\n  }\n}\n\nfunction id(input: Element): Node | null {\n  const elementId = input.getAttribute(\"id\");\n  if (elementId && config.idName(elementId)) {\n    return {\n      name: \"#\" + cssesc(elementId, { isIdentifier: true }),\n      penalty: 0,\n    };\n  }\n  return null;\n}\n\nfunction attr(input: Element): Node[] {\n  const attrs = Array.from(input.attributes).filter((attr) =>\n    config.attr(attr.name, attr.value)\n  );\n\n  return attrs.map(\n    (attr): Node => ({\n      name:\n        \"[\" +\n        cssesc(attr.name, { isIdentifier: true }) +\n        '=\"' +\n        cssesc(attr.value) +\n        '\"]',\n      penalty: 0.5,\n    })\n  );\n}\n\nfunction classNames(input: Element): Node[] {\n  const names = Array.from(input.classList).filter(config.className);\n\n  return names.map(\n    (name): Node => ({\n      name: \".\" + cssesc(name, { isIdentifier: true }),\n      penalty: 1,\n    })\n  );\n}\n\nfunction tagName(input: Element): Node | null {\n  const name = input.tagName.toLowerCase();\n  if (config.tagName(name)) {\n    return {\n      name,\n      penalty: 2,\n    };\n  }\n  return null;\n}\n\nfunction any(): Node {\n  return {\n    name: \"*\",\n    penalty: 3,\n  };\n}\n\nfunction index(input: Element): number | null {\n  const parent = input.parentNode;\n  if (!parent) {\n    return null;\n  }\n\n  let child = parent.firstChild;\n  if (!child) {\n    return null;\n  }\n\n  let i = 0;\n  while (child) {\n    if (child.nodeType === Node.ELEMENT_NODE) {\n      i++;\n    }\n\n    if (child === input) {\n      break;\n    }\n\n    child = child.nextSibling;\n  }\n\n  return i;\n}\n\nfunction nthChild(node: Node, i: number): Node {\n  return {\n    name: node.name + `:nth-child(${i})`,\n    penalty: node.penalty + 1,\n  };\n}\n\nfunction dispensableNth(node: Node) {\n  return node.name !== \"html\" && !node.name.startsWith(\"#\");\n}\n\nfunction maybe(...level: (Node | null)[]): Node[] | null {\n  const list = level.filter(notEmpty);\n  if (list.length > 0) {\n    return list;\n  }\n  return null;\n}\n\nfunction notEmpty<T>(value: T | null | undefined): value is T {\n  return value !== null && value !== undefined;\n}\n\nfunction* combinations(stack: Node[][], path: Node[] = []): Generator<Node[]> {\n  if (stack.length > 0) {\n    for (let node of stack[0]) {\n      yield* combinations(stack.slice(1, stack.length), path.concat(node));\n    }\n  } else {\n    yield path;\n  }\n}\n\nfunction sort(paths: Iterable<Path>): Path[] {\n  return Array.from(paths).sort((a, b) => penalty(a) - penalty(b));\n}\n\ntype Scope = {\n  counter: number;\n  visited: Map<string, boolean>;\n};\n\nfunction* optimize(\n  path: Path,\n  input: Element,\n  scope: Scope = {\n    counter: 0,\n    visited: new Map<string, boolean>(),\n  }\n): Generator<Node[]> {\n  if (path.length > 2 && path.length > config.optimizedMinLength) {\n    for (let i = 1; i < path.length - 1; i++) {\n      if (scope.counter > config.maxNumberOfTries) {\n        return; // Okay At least I tried!\n      }\n      scope.counter += 1;\n      const newPath = [...path];\n      newPath.splice(i, 1);\n      const newPathKey = selector(newPath);\n      if (scope.visited.has(newPathKey)) {\n        return;\n      }\n      if (unique(newPath) && same(newPath, input)) {\n        yield newPath;\n        scope.visited.set(newPathKey, true);\n        yield* optimize(newPath, input, scope);\n      }\n    }\n  }\n}\n\nfunction same(path: Path, input: Element) {\n  return rootDocument.querySelector(selector(path)) === input;\n}\n\nconst regexAnySingleEscape = /[ -,\\.\\/:-@\\[-\\^`\\{-~]/;\nconst regexSingleEscape = /[ -,\\.\\/:-@\\[\\]\\^`\\{-~]/;\nconst regexExcessiveSpaces =\n  /(^|\\\\+)?(\\\\[A-F0-9]{1,6})\\x20(?![a-fA-F0-9\\x20])/g;\n\nconst defaultOptions = {\n  escapeEverything: false,\n  isIdentifier: false,\n  quotes: \"single\",\n  wrap: false,\n};\n\nfunction cssesc(string: string, opt: Partial<typeof defaultOptions> = {}) {\n  const options = { ...defaultOptions, ...opt };\n  if (options.quotes != \"single\" && options.quotes != \"double\") {\n    options.quotes = \"single\";\n  }\n  const quote = options.quotes == \"double\" ? '\"' : \"'\";\n  const isIdentifier = options.isIdentifier;\n\n  const firstChar = string.charAt(0);\n  let output = \"\";\n  let counter = 0;\n  const length = string.length;\n  while (counter < length) {\n    const character = string.charAt(counter++);\n    let codePoint = character.charCodeAt(0);\n    let value: string | undefined = void 0;\n    // If it’s not a printable ASCII character…\n    if (codePoint < 0x20 || codePoint > 0x7e) {\n      if (codePoint >= 0xd800 && codePoint <= 0xdbff && counter < length) {\n        // It’s a high surrogate, and there is a next character.\n        const extra = string.charCodeAt(counter++);\n        if ((extra & 0xfc00) == 0xdc00) {\n          // next character is low surrogate\n          codePoint = ((codePoint & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n        } else {\n          // It’s an unmatched surrogate; only append this code unit, in case\n          // the next code unit is the high surrogate of a surrogate pair.\n          counter--;\n        }\n      }\n      value = \"\\\\\" + codePoint.toString(16).toUpperCase() + \" \";\n    } else {\n      if (options.escapeEverything) {\n        if (regexAnySingleEscape.test(character)) {\n          value = \"\\\\\" + character;\n        } else {\n          value = \"\\\\\" + codePoint.toString(16).toUpperCase() + \" \";\n        }\n      } else if (/[\\t\\n\\f\\r\\x0B]/.test(character)) {\n        value = \"\\\\\" + codePoint.toString(16).toUpperCase() + \" \";\n      } else if (\n        character == \"\\\\\" ||\n        (!isIdentifier &&\n          ((character == '\"' && quote == character) ||\n            (character == \"'\" && quote == character))) ||\n        (isIdentifier && regexSingleEscape.test(character))\n      ) {\n        value = \"\\\\\" + character;\n      } else {\n        value = character;\n      }\n    }\n    output += value;\n  }\n\n  if (isIdentifier) {\n    if (/^-[-\\d]/.test(output)) {\n      output = \"\\\\-\" + output.slice(1);\n    } else if (/\\d/.test(firstChar)) {\n      output = \"\\\\3\" + firstChar + \" \" + output.slice(1);\n    }\n  }\n\n  // Remove spaces after `\\HEX` escapes that are not followed by a hex digit,\n  // since they’re redundant. Note that this is only possible if the escape\n  // sequence isn’t preceded by an odd number of backslashes.\n  output = output.replace(regexExcessiveSpaces, function ($0, $1, $2) {\n    if ($1 && $1.length % 2) {\n      // It’s not safe to remove the space, so don’t.\n      return $0;\n    }\n    // Strip the space.\n    return ($1 || \"\") + $2;\n  });\n\n  if (!isIdentifier && options.wrap) {\n    return quote + output + quote;\n  }\n  return output;\n}","\n\nenum eventTypes {\n  'input' = 'input',\n  'change' = 'change',\n  'focus' = 'focus',\n  'blur' = 'blur'\n}\n\ntype EventHandler = (el: HTMLInputElement, key: string, value: any) => void;\n\nexport const createFormMonitor = (context: any, handleEvent: EventHandler) => {\n  const eventListenerOptions = { once: false, passive: true, capture: true };\n  function fn(this: Window, e: Event) {\n    const { type: eventType } = e;\n    const target = e.target as HTMLInputElement;\n    let key = '', value;\n    switch (eventType) {\n      case eventTypes.focus:\n        key = 'focus';\n        break;\n      case eventTypes.blur:\n        key = 'blur';\n        break;\n      case eventTypes.input:\n      case eventTypes.change:\n        key = 'value';\n        const inputType = target.getAttribute('type') || 'text';\n        if (inputType === 'checkbox' || inputType === 'radio') {\n          if (eventType === 'input') return;\n          key = 'checked';\n        }\n        value = (target as any)[key];\n        break;\n    }\n    if(target.nodeType === Node.ELEMENT_NODE) {\n      handleEvent(target, key, value);\n    }\n  };\n  const arr: any[] = [];\n  for (const type of Object.values(eventTypes)) {\n    context.addEventListener(type, fn, eventListenerOptions);\n    arr.push(() => context.removeEventListener(type, fn, eventListenerOptions));\n  }\n  const hijacking = (key: string, target: HTMLElement) => {\n    const descriptor: any = Object.getOwnPropertyDescriptor(target, key);\n    Object.defineProperty(target, key, {\n      set(value: string | boolean) {\n        setTimeout(() => handleEvent(this, key, value));\n        if (descriptor && descriptor.set) {\n          descriptor.set.call(this, value);\n        }\n      }\n    });\n    arr.push(() => Object.defineProperty(target, key, descriptor));\n  }\n  const bind = () => {\n    new Map<HTMLElement, string>([\n      [context.HTMLSelectElement.prototype, 'value'],\n      [context.HTMLTextAreaElement.prototype, 'value'],\n      [context.HTMLOptionElement.prototype, 'selected']\n    ]).forEach((target, key) => hijacking(target, key));\n\n    new Map<string, HTMLElement>([\n      ['value', context.HTMLInputElement.prototype],\n      ['checked', context.HTMLInputElement.prototype]\n    ]).forEach((target, key) => hijacking(key, target));\n  };\n  return {\n    bind,\n    hijacking,\n    unbind: () => arr.map(fn => fn())\n  };\n};\n","import { finder } from '../finder';\nimport { Watcher } from '../watcher';\nimport { createFormMonitor } from '../form';\n\nexport class FormWatcher extends Watcher {\n  install({ context }: any) {\n    const { bind, unbind } = createFormMonitor(context, (el: HTMLElement, key: string, value: any) => {\n      const selector = finder(el);\n      this.report('FORM_ELEMENT', { key, value, selector });\n    });\n    this.registerUninstall(unbind);\n    return bind();\n  }\n}\n","import { Watcher } from \"../watcher\";\n\nexport class KeyboardWatcher extends Watcher {\n  install({ context }: any) {\n    this.registerEvent({\n      context,\n      eventTypes: ['keypress'],\n      listenerOptions: { capture: true },\n      type: 'throttle',\n      waitTime: 100,\n      optimizeOptions: {},\n      handleFn: (e) => {\n        const { key, code, ctrlKey, shiftKey, altKey, metaKey, repeat, target } = e;\n        this.report('KEYBOARD', { key, code, ctrlKey, shiftKey, altKey, metaKey, repeat, target });\n      }\n    });\n  }\n}","\nimport { Watcher } from '../watcher'\n\nenum LocationTypes {\n  'replaceState' = 'replaceState',\n  'pushState' = 'pushState',\n  'popstate' = 'popstate',\n  'hashchange' = 'hashchange'\n}\n\nexport const createLocationMonitor = (context: any, fn: any) => {\n  const rewrite = (history: any, type: string) => {\n    const original = history[type];\n    return history[type] = function (this: any) {\n      const e = new Event(type);\n      original.apply(this, arguments);\n      context.dispatchEvent(e);\n    }\n  };\n  const arr: any[] = [];\n  const bind = () => {\n    rewrite(context.history, 'pushState');\n    rewrite(context.history, 'replaceState');\n    const types = Object.values(LocationTypes);\n    types.forEach(type => {\n      context.addEventListener(type, fn);\n      arr.push(() => context.removeEventListener(type, fn));\n    });\n  };\n  return {\n    bind,\n    unbind: () => arr.map(fn => fn())\n  }\n};\n\nexport class LocationWatcher extends Watcher {\n  install({ context }: any) {\n    const { bind, unbind } = createLocationMonitor(context, (e: Event) => {\n      const { title } = document;\n      const { href, pathname, hash } = context.location;\n      this.report('LOCATION', { title, href, path: pathname, hash });\n    });\n    this.registerUninstall(unbind);\n    return bind();\n  }\n}","\nimport { Watcher } from '../watcher'\nimport { finder } from '../finder';\n\n// export const bindMove = (context: any, fn: any) => {\n//   const handle = throttle((e: MouseEvent) => {\n//     const { offsetX: x, offsetY: y } = e;\n//     fn({ x, y });\n//   }, 300, {\n//     trailing: true,\n//     leading: true\n//   });\n//   context.addEventListener('mousemove', handle);\n// };\n\n// export const bindClick = (context: any, fn: any) => {\n//   context.addEventListener('click', (e: PointerEvent) => {\n//     const { offsetX: x, offsetY: y, target } = e;\n//     fn({ x, y, target });\n//   });\n// };\n\n// export const createMouseMonitor = (context: any) => {\n//   return {\n//     bindMove: (fn: any) => bindMove(context, fn),\n//     bindClick: (fn: any) => bindClick(context, fn),\n//   };\n// };\n\ntype OptionType = {\n  context: Window,\n};\n\nexport class MouseWatcher extends Watcher {\n  install({ context }: OptionType) {\n    this.registerEvent({\n      context,\n      eventTypes: ['mousemove'],\n      type: 'throttle',\n      waitTime: 300,\n      listenerOptions: {},\n      optimizeOptions: {\n        trailing: true,\n        leading: true\n      },\n      handleFn: (e: MouseEvent) => {\n        const { offsetX: x, offsetY: y } = e;\n        this.report('MOUSE', { type: 'MOVE', x, y });\n      },\n    });\n    this.registerEvent({\n      context,\n      eventTypes: ['click'],\n      type: 'throttle',\n      waitTime: 300,\n      listenerOptions: {},\n      handleFn: (e) => {\n        const { offsetX: x, offsetY: y, target } = e;\n        const selector = finder(target);\n        this.report('MOUSE', { type: 'CLICK', x, y, selector });\n      }\n    });\n  }\n}\n","import { Watcher } from '../watcher'\n\nexport class ScrollWatcher extends Watcher {\n  install({ context }: any) {\n    const { scrollingElement } = context.document;\n    this.registerEvent({\n      context,\n      type: 'throttle',\n      eventTypes: ['scroll'],\n      listenerOptions: { capture: true },\n      optimizeOptions: {},\n      waitTime: 100,\n      handleFn: (e) => {\n        console.log('scroll', e);\n      }\n    })\n  }\n}\n","\nimport { Watcher } from '../watcher'\n\nconst getWindowSize = (context: any) => {\n  const { innerWidth: width, innerHeight: height } = context;\n  return { width, height }\n};\n\nexport class WindowWatcher extends Watcher {\n  install({ context }: any) {\n    this.sendData(context);\n    this.registerEvent({\n      context,\n      eventTypes: ['resize'],\n      listenerOptions: { capture: true },\n      type: 'throttle',\n      optimizeOptions: { trailing: true },\n      waitTime: 500,\n      handleFn: () => this.sendData(context)\n    })\n  }\n  sendData(context: any) {\n    const size = getWindowSize(context);\n    this.report('WINDOW', size);\n  }\n}\n","import { DOMWatcher } from './dom';\nimport { FormWatcher } from './form';\nimport { KeyboardWatcher } from './keyboard';\nimport { LocationWatcher } from './location';\nimport { MouseWatcher } from './mouse';\nimport { ScrollWatcher } from './scroll';\nimport { WindowWatcher } from './window';\n\nexport const allWatchers: any = [\n    DOMWatcher,\n    FormWatcher,\n    MouseWatcher,\n    ScrollWatcher,\n    WindowWatcher,\n    LocationWatcher,\n    KeyboardWatcher,\n];","import { Watcher } from './watcher';\nimport { EventEmitter } from './events';\nimport { allWatchers } from './watchers';\n\ntype RecorderOption = {\n  disableWatchers: string[]\n};\n\nexport class Recorder extends EventEmitter {\n  options = {\n    context: window\n  }\n  watchers = []\n  constructor({ disableWatchers }: RecorderOption) {\n    super();\n    this.watchers = allWatchers\n      .filter((x: any) => disableWatchers.indexOf(x.name) === -1)\n      .map((W: any) => new W())\n    this.install();\n  }\n  install() {\n    const { options, watchers } = this;\n    const report = (data: any) => this.emit('report', data);\n    for (const watcher of watchers) {\n      (watcher as any).on('report', report);\n      (watcher as any).install(options);\n    }\n  }\n  start() {\n    for (const watcher of this.watchers as any) {\n      watcher.start();\n    }\n  }\n}"],"names":[],"mappings":"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"}